"use strict";(self.webpackChunkchatng=self.webpackChunkchatng||[]).push([[792],{263:()=>{function Ce(e){return"function"==typeof e}function cu(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const uu=cu(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Eo(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class vn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ce(r))try{r()}catch(o){t=o instanceof uu?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{sw(o)}catch(s){t=t??[],s instanceof uu?t=[...t,...s.errors]:t.push(s)}}if(t)throw new uu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)sw(t);else{if(t instanceof vn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Eo(n,t)}remove(t){const{_finalizers:n}=this;n&&Eo(n,t),t instanceof vn&&t._removeParent(this)}}vn.EMPTY=(()=>{const e=new vn;return e.closed=!0,e})();const iw=vn.EMPTY;function ow(e){return e instanceof vn||e&&"closed"in e&&Ce(e.remove)&&Ce(e.add)&&Ce(e.unsubscribe)}function sw(e){Ce(e)?e():e.unsubscribe()}const Ci={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},lu={setTimeout(e,t,...n){const{delegate:r}=lu;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=lu;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function aw(e){lu.setTimeout(()=>{const{onUnhandledError:t}=Ci;if(!t)throw e;t(e)})}function cw(){}const AL=oh("C",void 0,void 0);function oh(e,t,n){return{kind:e,value:t,error:n}}let wi=null;function du(e){if(Ci.useDeprecatedSynchronousErrorHandling){const t=!wi;if(t&&(wi={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=wi;if(wi=null,n)throw r}}else e()}class sh extends vn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ow(t)&&t.add(this)):this.destination=OL}static create(t,n,r){return new Xs(t,n,r)}next(t){this.isStopped?ch(function kL(e){return oh("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ch(function ML(e){return oh("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ch(AL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const RL=Function.prototype.bind;function ah(e,t){return RL.call(e,t)}class xL{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){fu(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){fu(r)}else fu(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){fu(n)}}}class Xs extends sh{constructor(t,n,r){let i;if(super(),Ce(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ci.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ah(t.next,o),error:t.error&&ah(t.error,o),complete:t.complete&&ah(t.complete,o)}):i=t}this.destination=new xL(i)}}function fu(e){Ci.useDeprecatedSynchronousErrorHandling?function NL(e){Ci.useDeprecatedSynchronousErrorHandling&&wi&&(wi.errorThrown=!0,wi.error=e)}(e):aw(e)}function ch(e,t){const{onStoppedNotification:n}=Ci;n&&lu.setTimeout(()=>n(e,t))}const OL={closed:!0,next:cw,error:function PL(e){throw e},complete:cw},uh="function"==typeof Symbol&&Symbol.observable||"@@observable";function hu(e){return e}let rt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function LL(e){return e&&e instanceof sh||function FL(e){return e&&Ce(e.next)&&Ce(e.error)&&Ce(e.complete)}(e)&&ow(e)}(n)?n:new Xs(n,r,i);return du(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=lw(r))((i,o)=>{const s=new Xs({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[uh](){return this}pipe(...n){return function uw(e){return 0===e.length?hu:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=lw(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function lw(e){var t;return null!==(t=e??Ci.Promise)&&void 0!==t?t:Promise}const VL=cu(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let pu=(()=>{class e extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new dw(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new VL}next(n){du(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){du(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){du(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?iw:(this.currentObservers=null,o.push(n),new vn(()=>{this.currentObservers=null,Eo(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new rt;return n.source=this,n}}return e.create=(t,n)=>new dw(t,n),e})();class dw extends pu{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:iw}}function Ur(e){return t=>{if(function UL(e){return Ce(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function or(e,t,n,r,i){return new jL(e,t,n,r,i)}class jL extends sh{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function lh(e,t){return Ur((n,r)=>{let i=0;n.subscribe(or(r,o=>{r.next(e.call(t,o,i++))}))})}function gu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function jr(e){return this instanceof jr?(this.v=e,this):new jr(e)}function gw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function ph(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const mw=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function _w(e){return Ce(e?.then)}function yw(e){return Ce(e[uh])}function vw(e){return Symbol.asyncIterator&&Ce(e?.[Symbol.asyncIterator])}function Ew(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Iw=function fV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function bw(e){return Ce(e?.[Iw])}function Cw(e){return function pw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(y,v){o.push([h,m,y,v])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{!function u(h){h.value instanceof jr?Promise.resolve(h.value.v).then(l,d):f(o[0][2],h)}(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield jr(n.read());if(i)return yield jr(void 0);yield yield jr(r)}}finally{n.releaseLock()}})}function ww(e){return Ce(e?.getReader)}function xn(e){if(e instanceof rt)return e;if(null!=e){if(yw(e))return function hV(e){return new rt(t=>{const n=e[uh]();if(Ce(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(mw(e))return function pV(e){return new rt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(_w(e))return function gV(e){return new rt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,aw)})}(e);if(vw(e))return Dw(e);if(bw(e))return function mV(e){return new rt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ww(e))return function _V(e){return Dw(Cw(e))}(e)}throw Ew(e)}function Dw(e){return new rt(t=>{(function yV(e,t){var n,r,i,o;return function fw(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=gw(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Br(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Tw(e,t,n=1/0){return Ce(t)?Tw((r,i)=>lh((o,s)=>t(r,o,i,s))(xn(e(r,i))),n):("number"==typeof t&&(n=t),Ur((r,i)=>function vV(e,t,n,r,i,o,s,a){const c=[];let u=0,l=0,d=!1;const f=()=>{d&&!c.length&&!u&&t.complete()},h=m=>u<r?p(m):c.push(m),p=m=>{o&&t.next(m),u++;let y=!1;xn(n(m,l++)).subscribe(or(t,v=>{i?.(v),o?h(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){const v=c.shift();s?Br(t,s,()=>p(v)):p(v)}f()}catch(v){t.error(v)}}))};return e.subscribe(or(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const Sw=new rt(e=>e.complete());function mh(e){return e[e.length-1]}function Aw(e){return function bV(e){return e&&Ce(e.schedule)}(mh(e))?e.pop():void 0}function mu(e,t=0){return Ur((n,r)=>{n.subscribe(or(r,i=>Br(r,e,()=>r.next(i),t),()=>Br(r,e,()=>r.complete(),t),i=>Br(r,e,()=>r.error(i),t)))})}function _u(e,t=0){return Ur((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Mw(e,t){if(!e)throw new Error("Iterable cannot be null");return new rt(n=>{Br(n,t,()=>{const r=e[Symbol.asyncIterator]();Br(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _h(e,t){return t?function kV(e,t){if(null!=e){if(yw(e))return function DV(e,t){return xn(e).pipe(_u(t),mu(t))}(e,t);if(mw(e))return function SV(e,t){return new rt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(_w(e))return function TV(e,t){return xn(e).pipe(_u(t),mu(t))}(e,t);if(vw(e))return Mw(e,t);if(bw(e))return function AV(e,t){return new rt(n=>{let r;return Br(n,t,()=>{r=e[Iw](),Br(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>Ce(r?.return)&&r.return()})}(e,t);if(ww(e))return function MV(e,t){return Mw(Cw(e),t)}(e,t)}throw Ew(e)}(e,t):xn(e)}function NV(...e){const t=Aw(e),n=function wV(e,t){return"number"==typeof mh(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?xn(r[0]):function EV(e=1/0){return Tw(hu,e)}(n)(_h(r,t)):Sw}class RV extends pu{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function kw(e={}){const{connector:t=(()=>new pu),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,c,u=0,l=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,l=d=!1},p=()=>{const m=s;h(),m?.unsubscribe()};return Ur((m,y)=>{u++,!d&&!l&&f();const v=c=c??t();y.add(()=>{u--,0===u&&!d&&!l&&(a=yh(p,i))}),v.subscribe(y),!s&&u>0&&(s=new Xs({next:_=>v.next(_),error:_=>{d=!0,f(),a=yh(h,n,_),v.error(_)},complete:()=>{l=!0,f(),a=yh(h,r),v.complete()}}),xn(m).subscribe(s))})(o)}}function yh(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Xs({next:()=>{r.unsubscribe(),e()}});return xn(t(...n)).subscribe(r)}function FV(e,t){return e===t}function se(e){for(let t in e)if(e[t]===se)return t;throw Error("Could not find renamed property on target object.")}function yu(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ge(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function vh(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const LV=se({__forward_ref__:se});function ge(e){return e.__forward_ref__=ge,e.toString=function(){return Ge(this())},e}function P(e){return Eh(e)?e():e}function Eh(e){return"function"==typeof e&&e.hasOwnProperty(LV)&&e.__forward_ref__===ge}function Ih(e){return e&&!!e.\u0275providers}const Nw="https://g.co/ng/security#xss";class T extends Error{constructor(t,n){super(function vu(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function F(e){return"string"==typeof e?e:null==e?"":String(e)}function bh(e,t){throw new T(-201,!1)}function cn(e,t){null==e&&function R(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ae(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Yt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Eu(e){return Rw(e,bu)||Rw(e,xw)}function Rw(e,t){return e.hasOwnProperty(t)?e[t]:null}function Iu(e){return e&&(e.hasOwnProperty(Ch)||e.hasOwnProperty(WV))?e[Ch]:null}const bu=se({\u0275prov:se}),Ch=se({\u0275inj:se}),xw=se({ngInjectableDef:se}),WV=se({ngInjectorDef:se});var K=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(K||{});let wh;function Ft(e){const t=wh;return wh=e,t}function Ow(e,t,n){const r=Eu(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&K.Optional?null:void 0!==t?t:void bh(Ge(e))}const me=globalThis;class N{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Js={},Mh="__NG_DI_FLAG__",Cu="ngTempTokenPath",qV=/\n/gm,Lw="__source";let Io;function $r(e){const t=Io;return Io=e,t}function QV(e,t=K.Default){if(void 0===Io)throw new T(-203,!1);return null===Io?Ow(e,void 0,t):Io.get(e,t&K.Optional?null:void 0,t)}function q(e,t=K.Default){return(function Pw(){return wh}()||QV)(P(e),t)}function de(e,t=K.Default){return q(e,wu(t))}function wu(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function kh(e){const t=[];for(let n=0;n<e.length;n++){const r=P(e[n]);if(Array.isArray(r)){if(0===r.length)throw new T(900,!1);let i,o=K.Default;for(let s=0;s<r.length;s++){const a=r[s],c=ZV(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}t.push(q(i,o))}else t.push(q(r))}return t}function ea(e,t){return e[Mh]=t,e.prototype[Mh]=t,e}function ZV(e){return e[Mh]}function sr(e){return{toString:e}.toString()}var Du=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Du||{}),En=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(En||{});const Pn={},X=[],Tu=se({\u0275cmp:se}),Nh=se({\u0275dir:se}),Rh=se({\u0275pipe:se}),Uw=se({\u0275mod:se}),ar=se({\u0275fac:se}),ta=se({__NG_ELEMENT_ID__:se}),jw=se({__NG_ENV_ID__:se});function Bw(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function xh(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];Hw(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function $w(e){return 3===e||4===e||6===e}function Hw(e){return 64===e.charCodeAt(0)}function na(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Ww(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Ww(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const Gw="ng-template";function eU(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==Bw(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function zw(e){return 4===e.type&&e.value!==Gw}function tU(e,t,n){return t===(4!==e.type||n?e.value:Gw)}function nU(e,t,n){let r=4;const i=e.attrs||[],o=function oU(e){for(let t=0;t<e.length;t++)if($w(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!tU(e,c,n)||""===c&&1===t.length){if(In(r))return!1;s=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!eU(e.attrs,u,n)){if(In(r))return!1;s=!0}continue}const d=rU(8&r?"class":c,i,zw(e),n);if(-1===d){if(In(r))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Bw(h,u,0)||2&r&&u!==f){if(In(r))return!1;s=!0}}}}else{if(!s&&!In(r)&&!In(c))return!1;if(s&&In(c))continue;s=!1,r=c|1&r}}return In(r)||s}function In(e){return 0==(1&e)}function rU(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function sU(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function qw(e,t,n=!1){for(let r=0;r<t.length;r++)if(nU(e,t[r],n))return!0;return!1}function Kw(e,t){return e?":not("+t.trim()+")":t}function cU(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!In(s)&&(t+=Kw(o,i),i=""),r=s,o=o||!In(r);n++}return""!==i&&(t+=Kw(o,i)),t}function ra(e){return sr(()=>{const t=Qw(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Du.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||En.Emulated,styles:e.styles||X,_:null,schemas:e.schemas||null,tView:null,id:""};Zw(n);const r=e.dependencies;return n.directiveDefs=Su(r,!1),n.pipeDefs=Su(r,!0),n.id=function mU(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function fU(e){return Y(e)||it(e)}function hU(e){return null!==e}function un(e){return sr(()=>({type:e.type,bootstrap:e.bootstrap||X,declarations:e.declarations||X,imports:e.imports||X,exports:e.exports||X,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Yw(e,t){if(null==e)return Pn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function L(e){return sr(()=>{const t=Qw(e);return Zw(t),t})}function Lt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Y(e){return e[Tu]||null}function it(e){return e[Nh]||null}function Et(e){return e[Rh]||null}function Qw(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Pn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||X,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yw(e.inputs,t),outputs:Yw(e.outputs)}}function Zw(e){e.features?.forEach(t=>t(e))}function Su(e,t){if(!e)return null;const n=t?Et:fU;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(hU)}const xe=0,M=1,j=2,we=3,bn=4,oa=5,ft=6,bo=7,Ue=8,Hr=9,Co=10,V=11,sa=12,Xw=13,wo=14,je=15,aa=16,Do=17,On=18,ca=19,Jw=20,Wr=21,cr=22,ua=23,la=24,z=25,Ph=1,eD=2,Fn=7,To=9,ot=11;function Vt(e){return Array.isArray(e)&&"object"==typeof e[Ph]}function It(e){return Array.isArray(e)&&!0===e[Ph]}function Oh(e){return 0!=(4&e.flags)}function Ti(e){return e.componentOffset>-1}function Mu(e){return 1==(1&e.flags)}function Cn(e){return!!e.template}function Fh(e){return 0!=(512&e[j])}function Si(e,t){return e.hasOwnProperty(ar)?e[ar]:null}let st=null,ku=!1;function ln(e){const t=st;return st=e,t}const rD={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function oD(e){if(!fa(e)||e.dirty){if(!e.producerMustRecompute(e)&&!cD(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function aD(e){e.dirty=!0,function sD(e){if(void 0===e.liveConsumerNode)return;const t=ku;ku=!0;try{for(const n of e.liveConsumerNode)n.dirty||aD(n)}finally{ku=t}}(e),e.consumerMarkedDirty?.(e)}function Vh(e){return e&&(e.nextProducerIndex=0),ln(e)}function Uh(e,t){if(ln(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(fa(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Nu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function cD(e){So(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(oD(n),r!==n.version))return!0}return!1}function uD(e){if(So(e),fa(e))for(let t=0;t<e.producerNode.length;t++)Nu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Nu(e,t){if(function dD(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),So(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Nu(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];So(i),i.producerIndexOfThis[r]=t}}function fa(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function So(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let fD=null;const mD=()=>{},MU=(()=>({...rD,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:mD}))();class kU{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ur(){return _D}function _D(e){return e.type.prototype.ngOnChanges&&(e.setInput=RU),NU}function NU(){const e=vD(this),t=e?.current;if(t){const n=e.previous;if(n===Pn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function RU(e,t,n,r){const i=this.declaredInputs[n],o=vD(e)||function xU(e,t){return e[yD]=t}(e,{previous:Pn,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new kU(c&&c.currentValue,t,a===Pn),e[r]=t}ur.ngInherit=!0;const yD="__ngSimpleChanges__";function vD(e){return e[yD]||null}const Ln=function(e,t,n){};function _e(e){for(;Array.isArray(e);)e=e[xe];return e}function Ru(e,t){return _e(t[e])}function Ut(e,t){return _e(t[e.index])}function bD(e,t){return e.data[t]}function Ao(e,t){return e[t]}function Zt(e,t){const n=t[e];return Vt(n)?n:n[xe]}function zr(e,t){return null==t?null:e[t]}function CD(e){e[Do]=0}function UU(e){1024&e[j]||(e[j]|=1024,DD(e,1))}function wD(e){1024&e[j]&&(e[j]&=-1025,DD(e,-1))}function DD(e,t){let n=e[we];if(null===n)return;n[oa]+=t;let r=n;for(n=n[we];null!==n&&(1===t&&1===r[oa]||-1===t&&0===r[oa]);)n[oa]+=t,r=n,n=n[we]}const x={lFrame:FD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function AD(){return x.bindingsEnabled}function b(){return x.lFrame.lView}function Q(){return x.lFrame.tView}function qr(e){return x.lFrame.contextLView=e,e[Ue]}function Kr(e){return x.lFrame.contextLView=null,e}function at(){let e=MD();for(;null!==e&&64===e.type;)e=e.parent;return e}function MD(){return x.lFrame.currentTNode}function Vn(e,t){const n=x.lFrame;n.currentTNode=e,n.isParent=t}function Wh(){return x.lFrame.isParent}function Gh(){x.lFrame.isParent=!1}function bt(){const e=x.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ko(){return x.lFrame.bindingIndex++}function dr(e){const t=x.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ZU(e,t){const n=x.lFrame;n.bindingIndex=n.bindingRootIndex=e,zh(t)}function zh(e){x.lFrame.currentDirectiveIndex=e}function xD(){return x.lFrame.currentQueryIndex}function Kh(e){x.lFrame.currentQueryIndex=e}function JU(e){const t=e[M];return 2===t.type?t.declTNode:1===t.type?e[ft]:null}function PD(e,t,n){if(n&K.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&K.Host||(i=JU(o),null===i||(o=o[wo],10&i.type))););if(null===i)return!1;t=i,e=o}const r=x.lFrame=OD();return r.currentTNode=t,r.lView=e,!0}function Yh(e){const t=OD(),n=e[M];x.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function OD(){const e=x.lFrame,t=null===e?null:e.child;return null===t?FD(e):t}function FD(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function LD(){const e=x.lFrame;return x.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const VD=LD;function Qh(){const e=LD();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ct(){return x.lFrame.selectedIndex}function Ai(e){x.lFrame.selectedIndex=e}let jD=!0;function xu(){return jD}function Yr(e){jD=e}function Pu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),null!=l&&(e.destroyHooks??=[]).push(n,l)}}function Ou(e,t,n){BD(e,t,3,n)}function Fu(e,t,n,r){(3&e[j])===n&&BD(e,t,n,r)}function Zh(e,t){let n=e[j];(3&n)===t&&(n&=8191,n+=1,e[j]=n)}function BD(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&e[Do]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[Do]+=65536),(a<o||-1==o)&&(aj(e,n,t,c),e[Do]=(4294901760&e[Do])+c+2),c++}function $D(e,t){Ln(4,e,t);const n=ln(null);try{t.call(e)}finally{ln(n),Ln(5,e,t)}}function aj(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[j]>>13<e[Do]>>16&&(3&e[j])===t&&(e[j]+=8192,$D(a,o)):$D(a,o)}const No=-1;class pa{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Jh(e){return e!==No}function ga(e){return 32767&e}function ma(e,t){let n=function dj(e){return e>>16}(e),r=t;for(;n>0;)r=r[wo],n--;return r}let ep=!0;function Lu(e){const t=ep;return ep=e,t}const HD=255,WD=5;let fj=0;const Un={};function Vu(e,t){const n=GD(e,t);if(-1!==n)return n;const r=t[M];r.firstCreatePass&&(e.injectorIndex=t.length,tp(r.data,e),tp(t,null),tp(r.blueprint,null));const i=Uu(e,t),o=e.injectorIndex;if(Jh(i)){const s=ga(i),a=ma(i,t),c=a[M].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function tp(e,t){e.push(0,0,0,0,0,0,0,0,t)}function GD(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Uu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=XD(i),null===r)return No;if(n++,i=i[wo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return No}function np(e,t,n){!function hj(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ta)&&(r=n[ta]),null==r&&(r=n[ta]=fj++);const i=r&HD;t.data[e+(i>>WD)]|=1<<i}(e,t,n)}function zD(e,t,n){if(n&K.Optional||void 0!==e)return e;bh()}function qD(e,t,n,r){if(n&K.Optional&&void 0===r&&(r=null),!(n&(K.Self|K.Host))){const i=e[Hr],o=Ft(void 0);try{return i?i.get(t,r,n&K.Optional):Ow(t,r,n&K.Optional)}finally{Ft(o)}}return zD(r,0,n)}function KD(e,t,n,r=K.Default,i){if(null!==e){if(2048&t[j]&&!(r&K.Self)){const s=function vj(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[j]&&!(512&s[j]);){const a=YD(o,s,n,r|K.Self,Un);if(a!==Un)return a;let c=o.parent;if(!c){const u=s[Jw];if(u){const l=u.get(n,Un,r);if(l!==Un)return l}c=XD(s),s=s[wo]}o=c}return i}(e,t,n,r,Un);if(s!==Un)return s}const o=YD(e,t,n,r,Un);if(o!==Un)return o}return qD(t,n,r,i)}function YD(e,t,n,r,i){const o=function mj(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ta)?e[ta]:void 0;return"number"==typeof t?t>=0?t&HD:yj:t}(n);if("function"==typeof o){if(!PD(t,e,r))return r&K.Host?zD(i,0,r):qD(t,n,r,i);try{let s;if(s=o(r),null!=s||r&K.Optional)return s;bh()}finally{VD()}}else if("number"==typeof o){let s=null,a=GD(e,t),c=No,u=r&K.Host?t[je][ft]:null;for((-1===a||r&K.SkipSelf)&&(c=-1===a?Uu(e,t):t[a+8],c!==No&&ZD(r,!1)?(s=t[M],a=ga(c),t=ma(c,t)):a=-1);-1!==a;){const l=t[M];if(QD(o,a,l.data)){const d=gj(a,t,n,s,r,u);if(d!==Un)return d}c=t[a+8],c!==No&&ZD(r,t[M].data[a+8]===u)&&QD(o,a,t)?(s=l,a=ga(c),t=ma(c,t)):a=-1}}return i}function gj(e,t,n,r,i,o){const s=t[M],a=s.data[e+8],l=ju(a,s,n,null==r?Ti(a)&&ep:r!=s&&0!=(3&a.type),i&K.Host&&o===a);return null!==l?Mi(t,s,l,a):Un}function ju(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,l=o>>20,f=i?a+l:e.directiveEnd;for(let h=r?a:a+l;h<f;h++){const p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){const h=s[c];if(h&&Cn(h)&&h.type===n)return c}return null}function Mi(e,t,n,r){let i=e[n];const o=t.data;if(function cj(e){return e instanceof pa}(i)){const s=i;s.resolving&&function VV(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new T(-200,`Circular dependency in DI detected for ${e}${n}`)}(function ie(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():F(e)}(o[n]));const a=Lu(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Ft(s.injectImpl):null;PD(e,r,K.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function sj(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=_D(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==u&&Ft(u),Lu(a),s.resolving=!1,VD()}}return i}function QD(e,t,n){return!!(n[t+(e>>WD)]&1<<e)}function ZD(e,t){return!(e&K.Self||e&K.Host&&t)}class wt{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return KD(this._tNode,this._lView,t,wu(r),n)}}function yj(){return new wt(at(),b())}function rp(e){return Eh(e)?()=>{const t=rp(P(e));return t&&t()}:Si(e)}function XD(e){const t=e[M],n=t.type;return 2===n?t.declTNode:1===n?e[ft]:null}const xo="__parameters__";function Oo(e,t,n){return sr(()=>{const r=function op(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,l){const d=c.hasOwnProperty(xo)?c[xo]:Object.defineProperty(c,xo,{value:[]})[xo];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Lo(e,t){e.forEach(n=>Array.isArray(n)?Lo(n,t):t(n))}function eT(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Bu(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Xt(e,t,n){let r=Vo(e,t);return r>=0?e[1|r]=n:(r=~r,function Tj(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function sp(e,t){const n=Vo(e,t);if(n>=0)return e[1|n]}function Vo(e,t){return function tT(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const Ze=ea(Oo("Optional"),8),cp=ea(Oo("SkipSelf"),4);function qu(e){return 128==(128&e.flags)}var Qr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Qr||{});const qj=/^>|^->|<!--|-->|--!>|<!-$/g,Kj=/(<|>)/g,Yj="\u200b$1\u200b";const fp=new Map;let Qj=0;const pp="__ngContext__";function pt(e,t){Vt(t)?(e[pp]=t[ca],function Xj(e){fp.set(e[ca],e)}(t)):e[pp]=t}let gp;function mp(e,t){return gp(e,t)}function ba(e){const t=e[we];return It(t)?t[we]:t}function IT(e){return CT(e[sa])}function bT(e){return CT(e[bn])}function CT(e){for(;null!==e&&!It(e);)e=e[bn];return e}function Bo(e,t,n,r,i){if(null!=r){let o,s=!1;It(r)?o=r:Vt(r)&&(s=!0,r=r[xe]);const a=_e(r);0===e&&null!==n?null==i?ST(t,n,a):ki(t,n,a,i||null,!0):1===e&&null!==n?ki(t,n,a,i||null,!0):2===e?function el(e,t,n){const r=Xu(e,t);r&&function _B(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function EB(e,t,n,r,i){const o=n[Fn];o!==_e(n)&&Bo(t,e,r,o,i);for(let a=ot;a<n.length;a++){const c=n[a];wa(c[M],c,e,t,r,o)}}(t,e,o,n,i)}}function _p(e,t){return e.createComment(function hT(e){return e.replace(qj,t=>t.replace(Kj,Yj))}(t))}function Qu(e,t,n){return e.createElement(t,n)}function DT(e,t){const n=e[To],r=n.indexOf(t);wD(t),n.splice(r,1)}function Zu(e,t){if(e.length<=ot)return;const n=ot+t,r=e[n];if(r){const i=r[aa];null!==i&&i!==e&&DT(i,r),t>0&&(e[n-1][bn]=r[bn]);const o=Bu(e,ot+t);!function uB(e,t){wa(e,t,t[V],2,null,null),t[xe]=null,t[ft]=null}(r[M],r);const s=o[On];null!==s&&s.detachView(o[M]),r[we]=null,r[bn]=null,r[j]&=-129}return r}function yp(e,t){if(!(256&t[j])){const n=t[V];t[ua]&&uD(t[ua]),t[la]&&uD(t[la]),n.destroyNode&&wa(e,t,n,3,null,null),function fB(e){let t=e[sa];if(!t)return vp(e[M],e);for(;t;){let n=null;if(Vt(t))n=t[sa];else{const r=t[ot];r&&(n=r)}if(!n){for(;t&&!t[bn]&&t!==e;)Vt(t)&&vp(t[M],t),t=t[we];null===t&&(t=e),Vt(t)&&vp(t[M],t),n=t&&t[bn]}t=n}}(t)}}function vp(e,t){if(!(256&t[j])){t[j]&=-129,t[j]|=256,function mB(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof pa)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Ln(4,a,c);try{c.call(a)}finally{Ln(5,a,c)}}else{Ln(4,i,o);try{o.call(i)}finally{Ln(5,i,o)}}}}}(e,t),function gB(e,t){const n=e.cleanup,r=t[bo];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[bo]=null);const i=t[Wr];if(null!==i){t[Wr]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[M].type&&t[V].destroy();const n=t[aa];if(null!==n&&It(t[we])){n!==t[we]&&DT(n,t);const r=t[On];null!==r&&r.detachView(e)}!function Jj(e){fp.delete(e[ca])}(t)}}function Ep(e,t,n){return function TT(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[xe];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===En.None||o===En.Emulated)return null}return Ut(r,n)}}(e,t.parent,n)}function ki(e,t,n,r,i){e.insertBefore(t,n,r,i)}function ST(e,t,n){e.appendChild(t,n)}function AT(e,t,n,r,i){null!==r?ki(e,t,n,r,i):ST(e,t,n)}function Xu(e,t){return e.parentNode(t)}let Ip,Dp,NT=function kT(e,t,n){return 40&e.type?Ut(e,n):null};function Ju(e,t,n,r){const i=Ep(e,r,t),o=t[V],a=function MT(e,t,n){return NT(e,t,n)}(r.parent||t[ft],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)AT(o,i,n[c],a,!1);else AT(o,i,n,a,!1);void 0!==Ip&&Ip(o,r,t,n,i)}function Ca(e,t){if(null!==t){const n=t.type;if(3&n)return Ut(t,e);if(4&n)return bp(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ca(e,r);{const i=e[t.index];return It(i)?bp(-1,i):_e(i)}}if(32&n)return mp(t,e)()||_e(e[t.index]);{const r=xT(e,t);return null!==r?Array.isArray(r)?r[0]:Ca(ba(e[je]),r):Ca(e,t.next)}}return null}function xT(e,t){return null!==t?e[je][ft].projection[t.projection]:null}function bp(e,t){const n=ot+e+1;if(n<t.length){const r=t[n],i=r[M].firstChild;if(null!==i)return Ca(r,i)}return t[Fn]}function Cp(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&pt(_e(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)Cp(e,t,n.child,r,i,o,!1),Bo(t,e,i,a,o);else if(32&c){const u=mp(n,r);let l;for(;l=u();)Bo(t,e,i,l,o);Bo(t,e,i,a,o)}else 16&c?OT(e,t,r,n,i,o):Bo(t,e,i,a,o);n=s?n.projectionNext:n.next}}function wa(e,t,n,r,i,o){Cp(n,r,e.firstChild,t,i,o,!1)}function OT(e,t,n,r,i,o){const s=n[je],c=s[ft].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Bo(t,e,i,c[u],o);else{let u=c;const l=s[we];qu(r)&&(u.flags|=128),Cp(e,t,u,l,i,o,!0)}}function FT(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function LT(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&xh(e,t,r),null!==i&&FT(e,t,i),null!==o&&function bB(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}class BT{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nw})`}}function Zr(e){return e instanceof BT?e.changingThisBreaksApplicationSecurity:e}const FB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Wo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Wo||{});function Ni(e){const t=function Sa(){const e=b();return e&&e[Co].sanitizer}();return t?t.sanitize(Wo.URL,e)||"":function Da(e,t){const n=function RB(e){return e instanceof BT&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Nw})`)}return n===t}(e,"URL")?Zr(e):function Sp(e){return(e=String(e)).match(FB)?e:"unsafe:"+e}(F(e))}const il=new N("ENVIRONMENT_INITIALIZER"),YT=new N("INJECTOR",-1),QT=new N("INJECTOR_DEF_TYPES");class Np{get(t,n=Js){if(n===Js){const r=new Error(`NullInjectorError: No provider for ${Ge(t)}!`);throw r.name="NullInjectorError",r}return n}}function QB(...e){return{\u0275providers:XT(0,e),\u0275fromNgModule:!0}}function XT(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Lo(t,s=>{const a=s;ol(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&JT(i,o),n}function JT(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];Rp(i,o=>{t(o,r)})}}function ol(e,t,n,r){if(!(e=P(e)))return!1;let i=null,o=Iu(e);const s=!o&&Y(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const c=e.ngModule;if(o=Iu(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)ol(u,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Lo(o.imports,l=>{ol(l,t,n,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&JT(u,t)}if(!a){const u=Si(i)||(()=>new i);t({provide:i,useFactory:u,deps:X},i),t({provide:QT,useValue:i,multi:!0},i),t({provide:il,useValue:()=>q(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=e;Rp(c,l=>{t(l,u)})}}}return i!==e&&void 0!==e.providers}function Rp(e,t){for(let n of e)Ih(n)&&(n=n.\u0275providers),Array.isArray(n)?Rp(n,t):t(n)}const ZB=se({provide:String,useValue:se});function xp(e){return null!==e&&"object"==typeof e&&ZB in e}function Ri(e){return"function"==typeof e}const Pp=new N("Set Injector scope."),sl={},JB={};let Op;function al(){return void 0===Op&&(Op=new Np),Op}class hr{}class Go extends hr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lp(t,s=>this.processProvider(s)),this.records.set(YT,zo(void 0,this)),i.has("environment")&&this.records.set(hr,zo(void 0,this));const o=this.records.get(Pp);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(QT.multi,X,K.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=$r(this),r=Ft(void 0);try{return t()}finally{$r(n),Ft(r)}}get(t,n=Js,r=K.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(jw))return t[jw](this);r=wu(r);const o=$r(this),s=Ft(void 0);try{if(!(r&K.SkipSelf)){let c=this.records.get(t);if(void 0===c){const u=function i2(e){return"function"==typeof e||"object"==typeof e&&e instanceof N}(t)&&Eu(t);c=u&&this.injectableDefInScope(u)?zo(Fp(t),sl):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&K.Self?al():this.parent).get(t,n=r&K.Optional&&n===Js?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Cu]=a[Cu]||[]).unshift(Ge(t)),o)throw a;return function XV(e,t,n,r){const i=e[Cu];throw t[Lw]&&i.unshift(t[Lw]),e.message=function JV(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Ge(t);if(Array.isArray(t))i=t.map(Ge).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ge(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(qV,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Cu]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Ft(s),$r(o)}}resolveInjectorInitializers(){const t=$r(this),n=Ft(void 0);try{const i=this.get(il.multi,X,K.Self);for(const o of i)o()}finally{$r(t),Ft(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Ge(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(t){let n=Ri(t=P(t))?t:P(t&&t.provide);const r=function t2(e){return xp(e)?zo(void 0,e.useValue):zo(nS(e),sl)}(t);if(Ri(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zo(void 0,sl,!0),i.factory=()=>kh(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===sl&&(n.value=JB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function r2(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=P(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Fp(e){const t=Eu(e),n=null!==t?t.factory:Si(e);if(null!==n)return n;if(e instanceof N)throw new T(204,!1);if(e instanceof Function)return function e2(e){const t=e.length;if(t>0)throw function va(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new T(204,!1);const n=function HV(e){return e&&(e[bu]||e[xw])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new T(204,!1)}function nS(e,t,n){let r;if(Ri(e)){const i=P(e);return Si(i)||Fp(i)}if(xp(e))r=()=>P(e.useValue);else if(function tS(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...kh(e.deps||[]));else if(function eS(e){return!(!e||!e.useExisting)}(e))r=()=>q(P(e.useExisting));else{const i=P(e&&(e.useClass||e.provide));if(!function n2(e){return!!e.deps}(e))return Si(i)||Fp(i);r=()=>new i(...kh(e.deps))}return r}function zo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Lp(e,t){for(const n of e)Array.isArray(n)?Lp(n,t):n&&Ih(n)?Lp(n.\u0275providers,t):t(n)}const cl=new N("AppId",{providedIn:"root",factory:()=>o2}),o2="ng",rS=new N("Platform Initializer"),Xr=new N("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),iS=new N("CSP nonce",{providedIn:"root",factory:()=>function Ho(){if(void 0!==Dp)return Dp;if(typeof document<"u")return document;throw new T(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let oS=(e,t,n)=>null;function Gp(e,t,n=!1){return oS(e,t,n)}class g2{}class cS{}class _2{resolveComponentFactory(t){throw function m2(e){const t=Error(`No component factory found for ${Ge(e)}.`);return t.ngComponent=e,t}(t)}}let pl=(()=>{class e{static{this.NULL=new _2}}return e})();function y2(){return Yo(at(),b())}function Yo(e,t){return new fn(Ut(e,t))}let fn=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=y2}}return e})();function v2(e){return e instanceof fn?e.nativeElement:e}class lS{}let xi=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function E2(){const e=b(),n=Zt(at().index,e);return(Vt(n)?n:e)[V]}()}}return e})(),I2=(()=>{class e{static{this.\u0275prov=ae({token:e,providedIn:"root",factory:()=>null})}}return e})();class ka{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const dS=new ka("16.2.12"),Kp={};function gS(e,t=null,n=null,r){const i=mS(e,t,n,r);return i.resolveInjectorInitializers(),i}function mS(e,t=null,n=null,r,i=new Set){const o=[n||X,QB(e)];return r=r||("object"==typeof e?void 0:Ge(e)),new Go(o,t||al(),r||null,i)}let Dt=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Js}static{this.NULL=new Np}static create(n,r){if(Array.isArray(n))return gS({name:""},r,n,"");{const i=n.name??"";return gS({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=ae({token:e,providedIn:"any",factory:()=>q(YT)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function Qp(e){return e.ngOriginalError}class pr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Qp(t);for(;n&&Qp(n);)n=Qp(n);return n||null}}function Zp(e){return t=>{setTimeout(e,void 0,t)}}const ct=class M2 extends pu{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Zp(o),i&&(i=Zp(i)),s&&(s=Zp(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof vn&&t.add(a),a}};function yS(...e){}class fe{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function k2(){const e="function"==typeof me.requestAnimationFrame;let t=me[e?"requestAnimationFrame":"setTimeout"],n=me[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function x2(e){const t=()=>{!function R2(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(me,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Jp(e),e.isCheckStableRunning=!0,Xp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Jp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function O2(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return vS(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),ES(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return vS(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),ES(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Jp(e),Xp(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fe.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(fe.isInAngularZone())throw new T(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,N2,yS,yS);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const N2={};function Xp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Jp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vS(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ES(e){e._nesting--,Xp(e)}class P2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const IS=new N("",{providedIn:"root",factory:bS});function bS(){const e=de(fe);let t=!0;return NV(new rt(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new rt(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(kw()))}function CS(e){return e.ownerDocument}let eg=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Na(e){for(;e;){e[j]|=64;const t=ba(e);if(Fh(e)&&!t)return e;e=t}return null}const AS=new N("",{providedIn:"root",factory:()=>!1});let _l=null;function RS(e,t){return e[t]??OS()}function xS(e,t){const n=OS();n.producerNode?.length&&(e[t]=_l,n.lView=e,_l=PS())}const W2={...rD,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Na(e.lView)},lView:null};function PS(){return Object.create(W2)}function OS(){return _l??=PS(),_l}const U={};function ce(e){FS(Q(),b(),Ct()+e,!1)}function FS(e,t,n,r){if(!r)if(3==(3&t[j])){const o=e.preOrderCheckHooks;null!==o&&Ou(t,o,n)}else{const o=e.preOrderHooks;null!==o&&Fu(t,o,0,n)}Ai(n)}function C(e,t=K.Default){const n=b();return null===n?q(e,t):KD(at(),n,P(e),t)}function yl(e,t,n,r,i,o,s,a,c,u,l){const d=t.blueprint.slice();return d[xe]=i,d[j]=140|r,(null!==u||e&&2048&e[j])&&(d[j]|=2048),CD(d),d[we]=d[wo]=e,d[Ue]=n,d[Co]=s||e&&e[Co],d[V]=a||e&&e[V],d[Hr]=c||e&&e[Hr]||null,d[ft]=o,d[ca]=function Zj(){return Qj++}(),d[cr]=l,d[Jw]=u,d[je]=2==t.type?e[je]:d,d}function Xo(e,t,n,r,i){let o=e.data[t];if(null===o)o=function tg(e,t,n,r,i){const o=MD(),s=Wh(),c=e.data[t]=function J2(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function Mo(){return null!==x.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(e,t,n,r,i),function QU(){return x.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function ha(){const e=x.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vn(o,!0),o}function Ra(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function LS(e,t,n,r,i){const o=RS(t,ua),s=Ct(),a=2&r;try{Ai(-1),a&&t.length>z&&FS(e,t,z,!1),Ln(a?2:0,i);const u=a?o:null,l=Vh(u);try{null!==u&&(u.dirty=!1),n(r,i)}finally{Uh(u,l)}}finally{a&&null===t[ua]&&xS(t,ua),Ai(s),Ln(a?3:1,i)}}function ng(e,t,n){if(Oh(t)){const r=ln(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ln(r)}}}function rg(e,t,n){AD()&&(function s$(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Ti(n)&&function h$(e,t,n){const r=Ut(t,e),i=VS(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=vl(e,yl(e,i,null,s,r,t,null,e[Co].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Vu(n,t),pt(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const c=e.data[a],u=Mi(t,e,a,n);pt(u,t),null!==s&&p$(0,a-i,u,c,0,s),Cn(c)&&(Zt(n.index,t)[Ue]=Mi(t,e,a,n))}}(e,t,n,Ut(n,t)),64==(64&n.flags)&&HS(e,t,n))}function ig(e,t,n=Ut){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function VS(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=og(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function og(e,t,n,r,i,o,s,a,c,u,l){const d=z+r,f=d+i,h=function q2(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:U);return n}(d,f),p="function"==typeof u?u():u;return h[M]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}let US=e=>null;function jS(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?BS(n,t,i,o):r.hasOwnProperty(i)&&BS(n,t,r[i],o)}return n}function BS(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function sg(e,t,n,r){if(AD()){const i=null===r?null:{"":-1},o=function c$(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(qw(t,s.selectors,!1))if(r||(r=[]),Cn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),ag(e,t,a.length)}else r.unshift(s),ag(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&$S(e,t,n,s,i,a),i&&function u$(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new T(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=na(n.mergedAttrs,n.attrs)}function $S(e,t,n,r,i,o){for(let u=0;u<r.length;u++)np(Vu(n,t),e,r[u].type);!function d$(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Ra(e,t,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=na(n.mergedAttrs,l.hostAttrs),f$(e,n,t,c,l),l$(c,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function e$(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let c=null,u=null;for(let l=t.directiveStart;l<i;l++){const d=o[l],f=n?n.get(d):null,p=f?f.outputs:null;c=jS(d.inputs,l,c,f?f.inputs:null),u=jS(d.outputs,l,u,p);const m=null===c||null===s||zw(t)?null:g$(c,l,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}(e,n,o)}function HS(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function XU(){return x.lFrame.currentDirectiveIndex}();try{Ai(o);for(let a=r;a<i;a++){const c=e.data[a],u=t[a];zh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&a$(c,u)}}finally{Ai(-1),zh(s)}}function a$(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ag(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function l$(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Cn(t)&&(n[""]=e)}}function f$(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Si(i.type)),s=new pa(o,Cn(i),C);e.blueprint[r]=s,n[r]=s,function i$(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function o$(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,Ra(e,n,i.hostVars,U),i)}function p$(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)WS(r,n,s[a++],s[a++],s[a++])}function WS(e,t,n,r,i){const o=ln(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{ln(o)}}function g$(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function GS(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function zS(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Kh(n[r]),s.contentQueries(2,t[o],o)}}}function vl(e,t){return e[sa]?e[Xw][bn]=t:e[sa]=t,e[Xw]=t,t}function ug(e,t,n){Kh(0);const r=ln(null);try{t(e,n)}finally{ln(r)}}function qS(e){return e[bo]||(e[bo]=[])}function KS(e){return e.cleanup||(e.cleanup=[])}function QS(e,t){const n=e[Hr],r=n?n.get(pr,null):null;r&&r.handleError(t)}function lg(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];WS(e.data[s],t[s],r,a,i)}}function mr(e,t,n){const r=Ru(t,e);!function wT(e,t,n){e.setValue(t,n)}(e[V],r,n)}function m$(e,t){const n=Zt(t,e),r=n[M];!function _$(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[xe];null!==i&&null===n[cr]&&(n[cr]=Gp(i,n[Hr])),dg(r,n,n[Ue])}function dg(e,t,n){Yh(t);try{const r=e.viewQuery;null!==r&&ug(1,r,n);const i=e.template;null!==i&&LS(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&zS(e,t),e.staticViewQueries&&ug(2,e.viewQuery,n);const o=e.components;null!==o&&function y$(e,t){for(let n=0;n<t.length;n++)m$(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[j]&=-5,Qh()}}let ZS=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function AU(e,t,n){const r=Object.create(MU);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>aD(r),run:()=>{if(r.dirty=!1,r.hasRun&&!cD(r))return;r.hasRun=!0;const s=Vh(r);try{r.cleanupFn(),r.cleanupFn=mD,r.fn(i)}finally{Uh(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,u=>{this.all.has(u)&&this.queue.set(u,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new e})}}return e})();function El(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=vh(i,a):2==o&&(r=vh(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function xa(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(_e(o)),It(o)&&XS(o,r);const s=n.type;if(8&s)xa(e,t,n.child,r);else if(32&s){const a=mp(n,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=xT(t,n);if(Array.isArray(a))r.push(...a);else{const c=ba(t[je]);xa(c[M],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function XS(e,t){for(let n=ot;n<e.length;n++){const r=e[n],i=r[M].firstChild;null!==i&&xa(r[M],r,i,t)}e[Fn]!==e[xe]&&t.push(e[Fn])}function Il(e,t,n,r=!0){const i=t[Co],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{JS(e,t,e.template,n)}catch(c){throw r&&QS(t,c),c}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function JS(e,t,n,r){const i=t[j];if(256!=(256&i)){t[Co].effectManager?.flush(),Yh(t);try{CD(t),function ND(e){return x.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&LS(e,t,n,2,r);const s=3==(3&i);if(s){const u=e.preOrderCheckHooks;null!==u&&Ou(t,u,null)}else{const u=e.preOrderHooks;null!==u&&Fu(t,u,0,null),Zh(t,0)}if(function I$(e){for(let t=IT(e);null!==t;t=bT(t)){if(!t[eD])continue;const n=t[To];for(let r=0;r<n.length;r++){UU(n[r])}}}(t),eA(t,2),null!==e.contentQueries&&zS(e,t),s){const u=e.contentCheckHooks;null!==u&&Ou(t,u)}else{const u=e.contentHooks;null!==u&&Fu(t,u,1),Zh(t,1)}!function z2(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=RS(t,la);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Ai(~o);else{const s=o,a=n[++i],c=n[++i];ZU(a,s),r.dirty=!1;const u=Vh(r);try{c(2,t[s])}finally{Uh(r,u)}}}}finally{null===t[la]&&xS(t,la),Ai(-1)}}(e,t);const a=e.components;null!==a&&nA(t,a,0);const c=e.viewQuery;if(null!==c&&ug(2,c,r),s){const u=e.viewCheckHooks;null!==u&&Ou(t,u)}else{const u=e.viewHooks;null!==u&&Fu(t,u,2),Zh(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[j]&=-73,wD(t)}finally{Qh()}}}function eA(e,t){for(let n=IT(e);null!==n;n=bT(n))for(let r=ot;r<n.length;r++)tA(n[r],t)}function b$(e,t,n){tA(Zt(t,e),n)}function tA(e,t){if(!function LU(e){return 128==(128&e[j])}(e))return;const n=e[M],r=e[j];if(80&r&&0===t||1024&r||2===t)JS(n,e,n.template,e[Ue]);else if(e[oa]>0){eA(e,1);const i=n.components;null!==i&&nA(e,i,1)}}function nA(e,t,n){for(let r=0;r<t.length;r++)b$(e,t[r],n)}class Pa{get rootNodes(){const t=this._lView,n=t[M];return xa(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ue]}set context(t){this._lView[Ue]=t}get destroyed(){return 256==(256&this._lView[j])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[we];if(It(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Zu(t,r),Bu(n,r))}this._attachedToViewContainer=!1}yp(this._lView[M],this._lView)}onDestroy(t){!function TD(e,t){if(256==(256&e[j]))throw new T(911,!1);null===e[Wr]&&(e[Wr]=[]),e[Wr].push(t)}(this._lView,t)}markForCheck(){Na(this._cdRefInjectingView||this._lView)}detach(){this._lView[j]&=-129}reattach(){this._lView[j]|=128}detectChanges(){Il(this._lView[M],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dB(e,t){wa(e,t,t[V],2,null,null)}(this._lView[M],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=t}}class C$ extends Pa{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Il(t[M],t,t[Ue],!1)}checkNoChanges(){}get context(){return null}}class rA extends pl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Y(t);return new Oa(n,this.ngModule)}}function iA(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class D${constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=wu(r);const i=this.injector.get(t,Kp,r);return i!==Kp||n===Kp?i:this.parentInjector.get(t,n,r)}}class Oa extends cS{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=iA(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return iA(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function uU(e){return e.map(cU).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof hr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new D$(t,o):t,a=s.get(lS,null);if(null===a)throw new T(407,!1);const d={rendererFactory:a,sanitizer:s.get(I2,null),effectManager:s.get(ZS,null),afterRenderEventManager:s.get(eg,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function K2(e,t,n,r){const o=r.get(AS,!1)||n===En.ShadowDom,s=e.selectRootElement(t,o);return function Y2(e){US(e)}(s),s}(f,r,this.componentDef.encapsulation,s):Qu(f,h,function w$(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _=null;null!==p&&(_=Gp(p,s,!0));const I=og(0,null,null,1,0,null,null,null,null,null,null),D=yl(null,I,null,v,null,null,d,f,s,null,_);let k,re;Yh(D);try{const Qe=this.componentDef;let vt,sn=null;Qe.findHostDirectiveDefs?(vt=[],sn=new Map,Qe.findHostDirectiveDefs(Qe,vt,sn),vt.push(Qe)):vt=[Qe];const Zs=function S$(e,t){const n=e[M],r=z;return e[r]=t,Xo(n,r,2,"#host",null)}(D,p),KC=function A$(e,t,n,r,i,o,s){const a=i[M];!function M$(e,t,n,r){for(const i of e)t.mergedAttrs=na(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(El(t,t.mergedAttrs,!0),null!==n&&LT(r,n,t))}(r,e,t,s);let c=null;null!==t&&(c=Gp(t,i[Hr]));const u=o.rendererFactory.createRenderer(t,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=yl(i,VS(n),null,l,i[e.index],e,o,u,null,null,c);return a.firstCreatePass&&ag(a,e,r.length-1),vl(i,d),i[e.index]=d}(Zs,p,Qe,vt,D,d,f);re=bD(I,z),p&&function N$(e,t,n,r){if(r)xh(e,n,["ng-version",dS.full]);else{const{attrs:i,classes:o}=function lU(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!In(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&xh(e,n,i),o&&o.length>0&&FT(e,n,o.join(" "))}}(f,Qe,p,r),void 0!==n&&function R$(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(re,this.ngContentSelectors,n),k=function k$(e,t,n,r,i,o){const s=at(),a=i[M],c=Ut(s,i);$S(a,i,s,n,null,r);for(let l=0;l<n.length;l++)pt(Mi(i,a,s.directiveStart+l,s),i);HS(a,i,s),c&&pt(c,i);const u=Mi(i,a,s.directiveStart+s.componentOffset,s);if(e[Ue]=i[Ue]=u,null!==o)for(const l of o)l(u,t);return ng(a,s,e),u}(KC,Qe,vt,sn,D,[x$]),dg(I,D,null)}finally{Qh()}return new T$(this.componentType,k,Yo(re,D),D,re)}}class T$ extends g2{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new C$(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;lg(o[M],o,i,t,n),this.previousInputValues.set(t,n),Na(Zt(this._tNode.index,o))}}get injector(){return new wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function x$(){const e=at();Pu(b()[M],e)}function ue(e){let t=function oA(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(Cn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new T(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=bl(e.inputs),s.inputTransforms=bl(e.inputTransforms),s.declaredInputs=bl(e.declaredInputs),s.outputs=bl(e.outputs);const a=i.hostBindings;a&&L$(e,a);const c=i.viewQuery,u=i.contentQueries;if(c&&O$(e,c),u&&F$(e,u),yu(e.inputs,i.inputs),yu(e.declaredInputs,i.declaredInputs),yu(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),yu(s.inputTransforms,i.inputTransforms)),Cn(i)&&i.data.animation){const l=e.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===ue&&(n=!1)}}t=Object.getPrototypeOf(t)}!function P$(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=na(i.hostAttrs,n=na(n,i.hostAttrs))}}(r)}function bl(e){return e===Pn?{}:e===X?[]:e}function O$(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function F$(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function L$(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function Cl(e){return!!function fg(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Bn(e,t,n){return e[t]=n}function gt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Pi(e,t,n,r){const i=gt(e,t,n);return gt(e,t+1,r)||i}function ts(e,t,n,r,i,o){const a=Pi(e,function lr(){return x.lFrame.bindingIndex}(),n,i);return dr(2),a?t+F(n)+r+F(i)+o:U}function en(e,t,n,r,i,o,s,a){const c=b(),u=Q(),l=e+z,d=u.firstCreatePass?function uH(e,t,n,r,i,o,s,a,c){const u=t.consts,l=Xo(t,e,4,s||null,zr(u,a));sg(t,n,l,zr(u,c)),Pu(t,l);const d=l.tView=og(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,o,s):u.data[l];Vn(d,!1);const f=IA(u,c,d,e);xu()&&Ju(u,c,f,d),pt(f,c),vl(c,c[l]=GS(f,c,f,d)),Mu(d)&&rg(u,c,d),null!=s&&ig(c,d,a)}let IA=function bA(e,t,n,r){return Yr(!0),t[V].createComment("")};function yg(e){return Ao(function YU(){return x.lFrame.contextLView}(),z+e)}function Pe(e,t,n){const r=b();return gt(r,ko(),t)&&function Jt(e,t,n,r,i,o,s,a){const c=Ut(t,n);let l,u=t.inputs;!a&&null!=u&&(l=u[r])?(lg(e,n,l,r,i),Ti(t)&&function n$(e,t){const n=Zt(t,e);16&n[j]||(n[j]|=64)}(n,t.index)):3&t.type&&(r=function t$(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(c,r,i))}(Q(),function Me(){const e=x.lFrame;return bD(e.tView,e.selectedIndex)}(),r,e,t,r[V],n,!1),Pe}function vg(e,t,n,r,i){const s=i?"class":"style";lg(e,n,t.inputs[s],s,r)}function Z(e,t,n,r){const i=b(),o=Q(),s=z+e,a=i[V],c=o.firstCreatePass?function hH(e,t,n,r,i,o){const s=t.consts,c=Xo(t,e,2,r,zr(s,i));return sg(t,n,c,zr(s,o)),null!==c.attrs&&El(c,c.attrs,!1),null!==c.mergedAttrs&&El(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,t,n,r):o.data[s],u=CA(o,i,c,a,t,e);i[s]=u;const l=Mu(c);return Vn(c,!0),LT(a,u,c),32!=(32&c.flags)&&xu()&&Ju(o,i,u,c),0===function BU(){return x.lFrame.elementDepthCount}()&&pt(u,i),function $U(){x.lFrame.elementDepthCount++}(),l&&(rg(o,i,c),ng(o,c,i)),null!==r&&ig(i,c),Z}function J(){let e=at();Wh()?Gh():(e=e.parent,Vn(e,!1));const t=e;(function WU(e){return x.skipHydrationRootTNode===e})(t)&&function KU(){x.skipHydrationRootTNode=null}(),function HU(){x.lFrame.elementDepthCount--}();const n=Q();return n.firstCreatePass&&(Pu(n,e),Oh(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function uj(e){return 0!=(8&e.flags)}(t)&&vg(n,t,b(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function lj(e){return 0!=(16&e.flags)}(t)&&vg(n,t,b(),t.stylesWithoutHost,!1),J}function Oi(e,t,n,r){return Z(e,t,n,r),J(),Oi}let CA=(e,t,n,r,i,o)=>(Yr(!0),Qu(r,i,function UD(){return x.lFrame.currentNamespace}()));function Jr(e,t,n){const r=b(),i=Q(),o=e+z,s=i.firstCreatePass?function mH(e,t,n,r,i){const o=t.consts,s=zr(o,r),a=Xo(t,e,8,"ng-container",s);return null!==s&&El(a,s,!0),sg(t,n,a,zr(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,n):i.data[o];Vn(s,!0);const a=DA(i,r,s,e);return r[o]=a,xu()&&Ju(i,r,a,s),pt(a,r),Mu(s)&&(rg(i,r,s),ng(i,s,r)),null!=n&&ig(r,s),Jr}function ei(){let e=at();const t=Q();return Wh()?Gh():(e=e.parent,Vn(e,!1)),t.firstCreatePass&&(Pu(t,e),Oh(e)&&t.queries.elementEnd(e)),ei}let DA=(e,t,n,r)=>(Yr(!0),_p(t[V],""));function cs(){return b()}function Al(e){return!!e&&"function"==typeof e.then}function TA(e){return!!e&&"function"==typeof e.subscribe}function De(e,t,n,r){const i=b(),o=Q(),s=at();return function AA(e,t,n,r,i,o,s){const a=Mu(r),u=e.firstCreatePass&&KS(e),l=t[Ue],d=qS(t);let f=!0;if(3&r.type||s){const m=Ut(r,t),y=s?s(m):m,v=d.length,_=s?D=>s(_e(D[r.index])):r.index;let I=null;if(!s&&a&&(I=function vH(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[bo],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=o,I.__ngLastListenerFn__=o,f=!1;else{o=kA(r,t,l,o,!1);const D=n.listen(y,i,o);d.push(o,D),u&&u.push(i,_,v,v+1)}}else o=kA(r,t,l,o,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const m=p.length;if(m)for(let y=0;y<m;y+=2){const k=t[p[y]][p[y+1]].subscribe(o),re=d.length;d.push(o,k),u&&u.push(i,r.index,re,-(re+1))}}}(o,i,i[V],s,e,t,r),De}function MA(e,t,n,r){try{return Ln(6,t,n),!1!==n(r)}catch(i){return QS(e,i),!1}finally{Ln(7,t,n)}}function kA(e,t,n,r,i){return function o(s){if(s===Function)return r;Na(e.componentOffset>-1?Zt(e.index,t):t);let c=MA(t,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=MA(t,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function Tt(e=1){return function ej(e){return(x.lFrame.contextLView=function tj(e,t){for(;e>0;)t=t[wo],e--;return t}(e,x.lFrame.contextLView))[Ue]}(e)}function Ml(e,t){return e<<17|t<<2}function ti(e){return e>>17&32767}function Ig(e){return 2|e}function Fi(e){return(131068&e)>>2}function bg(e,t){return-131069&e|t<<2}function Cg(e){return 1|e}function jA(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?ti(o):Fi(o),c=!1;for(;0!==a&&(!1===c||s);){const l=e[a+1];AH(e[a],t)&&(c=!0,e[a+1]=r?Cg(l):Ig(l)),a=r?ti(l):Fi(l)}c&&(e[n+1]=r?Ig(o):Cg(o))}function AH(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Vo(e,t)>=0}function wg(e,t,n){return wn(e,t,n,!1),wg}function ja(e,t){return wn(e,t,null,!0),ja}function wn(e,t,n,r){const i=b(),o=Q(),s=dr(2);o.firstUpdatePass&&function KA(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[Ct()],s=function qA(e,t){return t>=e.expandoStartIndex}(e,n);(function XA(e,t){return 0!=(e.flags&(t?8:16))})(o,r)&&null===t&&!s&&(t=!1),t=function LH(e,t,n,r){const i=function qh(e){const t=x.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ba(n=Dg(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=Dg(i,e,t,n,r),null===o){let c=function VH(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Fi(r))return e[ti(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=Dg(null,e,t,c[1],r),c=Ba(c,t.attrs,r),function UH(e,t,n,r){e[ti(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else o=function jH(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Ba(r,e[o].hostAttrs,n);return Ba(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function TH(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ti(s),c=Fi(s);e[r]=n;let l,u=!1;if(Array.isArray(n)?(l=n[1],(null===l||Vo(n,l)>0)&&(u=!0)):l=n,i)if(0!==c){const f=ti(e[a+1]);e[r+1]=Ml(f,a),0!==f&&(e[f+1]=bg(e[f+1],r)),e[a+1]=function wH(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=Ml(a,0),0!==a&&(e[a+1]=bg(e[a+1],r)),a=r;else e[r+1]=Ml(c,0),0===a?a=r:e[c+1]=bg(e[c+1],r),c=r;u&&(e[r+1]=Ig(e[r+1])),jA(e,l,r,!0),jA(e,l,r,!1),function SH(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Vo(o,t)>=0&&(n[r+1]=Cg(n[r+1]))}(t,l,e,r,o),s=Ml(a,c),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}(o,e,s,r),t!==U&&gt(i,s,t)&&function QA(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const c=e.data,u=c[a+1],l=function DH(e){return 1==(1&e)}(u)?ZA(c,t,n,i,Fi(u),s):void 0;kl(l)||(kl(o)||function CH(e){return 2==(2&e)}(u)&&(o=ZA(c,null,n,i,a,s)),function IB(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Qr.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qr.Important),e.setStyle(n,r,i,o))}}(r,s,Ru(Ct(),n),i,o))}(o,o.data[Ct()],i,i[V],e,i[s+1]=function WH(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Ge(Zr(e)))),e}(t,n),r,s)}function Dg(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=Ba(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Ba(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Xt(e,s,!!n||t[++o]))}return void 0===e?null:e}function ZA(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const c=e[i],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let f=n[i+1];f===U&&(f=d?X:void 0);let h=d?sp(f,r):l===r?f:void 0;if(u&&!kl(h)&&(h=sp(c,r)),kl(h)&&(a=h,s))return a;const p=e[i+1];i=s?ti(p):Fi(p)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=sp(c,r))}return a}function kl(e){return void 0!==e}function Ke(e,t=""){const n=b(),r=Q(),i=e+z,o=r.firstCreatePass?Xo(r,i,1,t,null):r.data[i],s=JA(r,n,o,t,e);n[i]=s,xu()&&Ju(r,n,s,o),Vn(o,!1)}let JA=(e,t,n,r,i)=>(Yr(!0),function Yu(e,t){return e.createText(t)}(t[V],r));function Li(e){return $a("",e,""),Li}function $a(e,t,n){const r=b(),i=function es(e,t,n,r){return gt(e,ko(),n)?t+F(n)+r:U}(r,e,t,n);return i!==U&&mr(r,Ct(),i),$a}function Tg(e,t,n,r,i){const o=b(),s=ts(o,e,t,n,r,i);return s!==U&&mr(o,Ct(),s),Tg}const Vi=void 0;var fW=["en",[["a","p"],["AM","PM"],Vi],[["AM","PM"],Vi,Vi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vi,"{1} 'at' {0}",Vi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dW(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let ls={};function St(e){const t=function hW(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=E0(t);if(n)return n;const r=t.split("-")[0];if(n=E0(r),n)return n;if("en"===r)return fW;throw new T(701,!1)}function E0(e){return e in ls||(ls[e]=me.ng&&me.ng.common&&me.ng.common.locales&&me.ng.common.locales[e]),ls[e]}var ye=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(ye||{});const ds="en-US";let I0=ds;function Mg(e,t,n,r,i){if(e=P(e),Array.isArray(e))for(let o=0;o<e.length;o++)Mg(e[o],t,n,r,i);else{const o=Q(),s=b(),a=at();let c=Ri(e)?e:P(e.provide);const u=nS(e),l=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(Ri(e)||!e.multi){const h=new pa(u,i,C),p=Ng(c,t,i?l:l+f,d);-1===p?(np(Vu(a,s),o,c),kg(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=Ng(c,t,l+f,d),p=Ng(c,t,l,l+f),y=p>=0&&n[p];if(i&&!y||!i&&!(h>=0&&n[h])){np(Vu(a,s),o,c);const v=function dG(e,t,n,r,i){const o=new pa(e,n,C);return o.multi=[],o.index=t,o.componentProviders=0,z0(o,i,r&&!n),o}(i?lG:uG,n.length,i,r,u);!i&&y&&(n[p].providerFactory=v),kg(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else kg(o,e,h>-1?h:p,z0(n[i?p:h],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function kg(e,t,n,r){const i=Ri(t),o=function XB(e){return!!e.useClass}(t);if(i||o){const c=(o?P(t.useClass):t).prototype.ngOnDestroy;if(c){const u=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const l=u.indexOf(n);-1===l?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function z0(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ng(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function uG(e,t,n,r){return Rg(this.multi,[])}function lG(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Mi(n,n[M],this.providerFactory.index,r);o=a.slice(0,s),Rg(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Rg(i,o);return o}function Rg(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Te(e,t=[]){return n=>{n.providersResolver=(r,i)=>function cG(e,t,n){const r=Q();if(r.firstCreatePass){const i=Cn(e);Mg(n,r.data,r.blueprint,i,!0),Mg(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class Ui{}class fG{}class xg extends Ui{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rA(this);const i=function Qt(e,t){const n=e[Uw]||null;if(!n&&!0===t)throw new Error(`Type ${Ge(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function gr(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=mS(t,n,[{provide:Ui,useValue:this},{provide:pl,useValue:this.componentFactoryResolver},...r],Ge(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Pg extends fG{constructor(t){super(),this.moduleType=t}create(t){return new xg(this.moduleType,t,[])}}function Ka(e,t){const n=e[t];return n===U?void 0:n}function Fg(e,t){const n=Q();let r;const i=e+z;n.firstCreatePass?(r=function FG(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Si(r.type)),a=Ft(C);try{const c=Lu(!1),u=o();return Lu(c),function fH(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,b(),i,u),u}finally{Ft(a)}}function oM(e,t,n){const r=e+z,i=b(),o=Ao(i,r);return Ya(i,r)?function eM(e,t,n,r,i,o){const s=t+n;return gt(e,s,i)?Bn(e,s+1,o?r.call(o,i):r(i)):Ka(e,s+1)}(i,bt(),t,o.transform,n,o):o.transform(n)}function sM(e,t,n,r){const i=e+z,o=b(),s=Ao(o,i);return Ya(o,i)?function tM(e,t,n,r,i,o,s){const a=t+n;return Pi(e,a,i,o)?Bn(e,a+2,s?r.call(s,i,o):r(i,o)):Ka(e,a+2)}(o,bt(),t,s.transform,n,r,s):s.transform(n,r)}function Ya(e,t){return e[M].data[t].pure}function jG(){return this._results[Symbol.iterator]()}class Lg{get changes(){return this._changes||(this._changes=new ct)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Lg.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=jG)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function dn(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function wj(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function $G(e,t,n,r=!0){const i=t[M];if(function hB(e,t,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][bn]=t),r<o-ot?(t[bn]=n[i],eT(n,ot+r,t)):(n.push(t),t[bn]=null),t[we]=n;const s=t[aa];null!==s&&n!==s&&function pB(e,t){const n=e[To];t[je]!==t[we][we][je]&&(e[eD]=!0),null===n?e[To]=[t]:n.push(t)}(s,t);const a=t[On];null!==a&&a.insertView(e),t[j]|=128}(i,t,e,n),r){const o=bp(n,e),s=t[V],a=Xu(s,e[Fn]);null!==a&&function lB(e,t,n,r,i,o){r[xe]=i,r[ft]=t,wa(e,r,n,1,i,o)}(i,e[ft],s,t,a,o)}}let yr=(()=>{class e{static{this.__NG_ELEMENT_ID__=GG}}return e})();const HG=yr,WG=class extends HG{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function BG(e,t,n,r){const i=t.tView,a=yl(e,i,n,4096&e[j]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[aa]=e[t.index];const u=e[On];return null!==u&&(a[On]=u.createEmbeddedView(i)),dg(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Pa(i)}};function GG(){return Ol(at(),b())}function Ol(e,t){return 4&e.type?new WG(t,e,Yo(e,t)):null}let Wn=(()=>{class e{static{this.__NG_ELEMENT_ID__=ZG}}return e})();function ZG(){return hM(at(),b())}const XG=Wn,dM=class extends XG{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new wt(this._hostTNode,this._hostLView)}get parentInjector(){const t=Uu(this._hostTNode,this._hostLView);if(Jh(t)){const n=ma(t,this._hostLView),r=ga(t);return new wt(n[M].data[r+8],n)}return new wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=fM(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,o){const s=t&&!function ya(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}const c=s?t:new Oa(Y(t)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const y=(s?u:this.parentInjector).get(hr,null);y&&(o=y)}Y(c.componentType??{});const h=c.create(u,i,null,o);return this.insertImpl(h.hostView,a,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function VU(e){return It(e[we])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const u=i[we],l=new dM(u,u[ft],u[we]);l.detach(l.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;return $G(a,i,s,!r),t.attachToViewContainerRef(),eT(Vg(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=fM(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Zu(this._lContainer,n);r&&(Bu(Vg(this._lContainer),n),yp(r[M],r))}detach(t){const n=this._adjustIndex(t,-1),r=Zu(this._lContainer,n);return r&&null!=Bu(Vg(this._lContainer),n)?new Pa(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function fM(e){return e[8]}function Vg(e){return e[8]||(e[8]=[])}function hM(e,t){let n;const r=t[e.index];return It(r)?n=r:(n=GS(r,t,null,e),t[e.index]=n,vl(t,n)),pM(n,t,e,r),new dM(n,e,t)}let pM=function gM(e,t,n,r){if(e[Fn])return;let i;i=8&n.type?_e(r):function JG(e,t){const n=e[V],r=n.createComment(""),i=Ut(t,e);return ki(n,Xu(n,i),r,function yB(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Fn]=i};class Ug{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ug(this.queryList)}setDirty(){this.queryList.setDirty()}}class jg{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new jg(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==EM(t,n).matches&&this.queries[n].setDirty()}}class mM{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Bg{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new Bg(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class $g{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new $g(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,nz(n,o)),this.matchTNodeWithReadOption(t,n,ju(n,t,o,!1,!1))}else r===yr?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ju(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===fn||i===Wn||i===yr&&4&n.type)this.addMatch(n.index,-2);else{const o=ju(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function nz(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function iz(e,t,n,r){return-1===n?function rz(e,t){return 11&e.type?Yo(e,t):4&e.type?Ol(e,t):null}(t,e):-2===n?function oz(e,t,n){return n===fn?Yo(t,e):n===yr?Ol(t,e):n===Wn?hM(t,e):void 0}(e,t,r):Mi(e,e[M],n,t)}function _M(e,t,n,r){const i=t[On].queries[r];if(null===i.matches){const o=e.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const u=s[c];a.push(u<0?null:iz(t,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function Hg(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=_M(e,t,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],l=t[-c];for(let d=ot;d<l.length;d++){const f=l[d];f[aa]===f[we]&&Hg(f[M],f,u,r)}if(null!==l[To]){const d=l[To];for(let f=0;f<d.length;f++){const h=d[f];Hg(h[M],h,u,r)}}}}}return r}function Wg(e){const t=b(),n=Q(),r=xD();Kh(r+1);const i=EM(n,r);if(e.dirty&&function FU(e){return 4==(4&e[j])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Hg(n,t,r,[]):_M(n,t,i,r);e.reset(o,v2),e.notifyOnChanges()}return!0}return!1}function Gg(e,t,n){const r=Q();r.firstCreatePass&&(function vM(e,t,n){null===e.queries&&(e.queries=new Bg),e.queries.track(new $g(t,n))}(r,new mM(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function yM(e,t,n){const r=new Lg(4==(4&n));(function X2(e,t,n,r){const i=qS(t);i.push(n),e.firstCreatePass&&KS(e).push(r,i.length-1)})(e,t,r,r.destroy),null===t[On]&&(t[On]=new jg),t[On].queries.push(new Ug(r))}(r,b(),t)}function zg(){return function az(e,t){return e[On].queries[t].queryList}(b(),xD())}function EM(e,t){return e.queries.getByIndex(t)}const kz=new N("Application Initializer");let Zg=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=de(kz,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Al(o))n.push(o);else if(TA(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const vr=new N("LocaleId",{providedIn:"root",factory:()=>de(vr,K.Optional|K.SkipSelf)||function Rz(){return typeof $localize<"u"&&$localize.locale||ds}()});let Oz=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new RV(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const BM=new N(""),Ul=new N("");let nm,em=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nm||(function i3(e){nm=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(q(fe),q(tm),q(Ul))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})(),tm=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return nm?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),ni=null;const $M=new N("AllowMultipleToken"),rm=new N("PlatformDestroyListeners"),HM=new N("appBootstrapListener");function zM(e,t,n=[]){const r=`Platform: ${t}`,i=new N(r);return(o=[])=>{let s=im();if(!s||s.injector.get($M,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function a3(e){if(ni&&!ni.get($M,!1))throw new T(400,!1);(function WM(){!function CU(e){fD=e}(()=>{throw new T(600,!1)})})(),ni=e;const t=e.get(KM);(function GM(e){e.get(rS,null)?.forEach(n=>n())})(e)}(function qM(e=[],t){return Dt.create({name:t,providers:[{provide:Pp,useValue:"platform"},{provide:rm,useValue:new Set([()=>ni=null])},...e]})}(a,r))}return function u3(e){const t=im();if(!t)throw new T(401,!1);return t}()}}function im(){return ni?.get(KM)??null}let KM=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function l3(e="zone.js",t){return"noop"===e?new P2:"zone.js"===e?new fe(t):e}(r?.ngZone,function YM(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function pG(e,t,n){return new xg(e,t,n)}(n.moduleType,this.injector,function ek(e){return[{provide:fe,useFactory:e},{provide:il,multi:!0,useFactory:()=>{const t=de(f3,{optional:!0});return()=>t.initialize()}},{provide:JM,useFactory:d3},{provide:IS,useFactory:bS}]}(()=>i)),s=o.injector.get(pr,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{jl(this._modules,o),a.unsubscribe()})}),function QM(e,t,n){try{const r=n();return Al(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Zg);return a.runInitializers(),a.donePromise.then(()=>(function b0(e){cn(e,"Expected localeId to be defined"),"string"==typeof e&&(I0=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(vr,ds)||ds),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=ZM({},r);return function o3(e,t,n){const r=new Pg(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Xa);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new T(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new T(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(rm,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(q(Dt))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function ZM(e,t){return Array.isArray(t)?t.reduce(ZM,e):{...e,...t}}let Xa=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(JM),this.zoneIsStable=de(IS),this.componentTypes=[],this.components=[],this.isStable=de(Oz).hasPendingTasks.pipe(function PV(e,t){return Ur((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(or(r,c=>{i?.unsubscribe();let u=0;const l=o++;xn(e(c,l)).subscribe(i=or(r,d=>r.next(t?t(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}(n=>n?function xV(...e){return _h(e,Aw(e))}(!1):this.zoneIsStable),function OV(e,t=hu){return e=e??FV,Ur((n,r)=>{let i,o=!0;n.subscribe(or(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),kw()),this._injector=de(hr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof cS;if(!this._injector.get(Zg).done)throw!i&&function ia(e){const t=Y(e)||it(e)||Et(e);return null!==t&&t.standalone}(n),new T(405,!1);let s;s=i?n:this._injector.get(pl).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function s3(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Ui),u=s.create(Dt.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(BM,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),jl(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new T(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;jl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(HM,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>jl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new T(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function jl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const JM=new N("",{providedIn:"root",factory:()=>de(pr).handleError.bind(void 0)});function d3(){const e=de(fe),t=de(pr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let f3=(()=>{class e{constructor(){this.zone=de(fe),this.applicationRef=de(Xa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();let nk=(()=>{class e{static{this.__NG_ELEMENT_ID__=p3}}return e})();function p3(e){return function g3(e,t,n){if(Ti(e)&&!n){const r=Zt(e.index,t);return new Pa(r,r)}return 47&e.type?new Pa(t[je],t):null}(at(),b(),16==(16&e))}class sk{constructor(){}supports(t){return Cl(t)}create(t){return new E3(t)}}const v3=(e,t)=>t;class E3{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||v3}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<ck(r,i,o)?n:r,a=ck(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,l=c-i;if(u!=l){for(let f=0;f<u;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;l<=p&&p<u&&(o[f]=h+1)}o[s.previousIndex]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Cl(t))throw new T(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function G$(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new I3(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new ak),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ak),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class I3{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b3{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class ak{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new b3,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ck(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function lk(){return new Hl([new sk])}let Hl=(()=>{class e{static{this.\u0275prov=ae({token:e,providedIn:"root",factory:lk})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||lk()),deps:[[e,new cp,new Ze]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new T(901,!1)}}return e})();const S3=zM(null,"core",[]);let A3=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(q(Xa))}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({})}}return e})();let dm=null;function ec(){return dm}class B3{}const Bi=new N("DocumentToken");var Gl=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(Gl||{}),Mt=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Mt||{}),he=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(he||{}),tn=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(tn||{}),Be=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Be||{});function zl(e,t){return gn(St(e)[ye.DateFormat],t)}function ql(e,t){return gn(St(e)[ye.TimeFormat],t)}function Kl(e,t){return gn(St(e)[ye.DateTimeFormat],t)}function pn(e,t){const n=St(e),r=n[ye.NumberSymbols][t];if(typeof r>"u"){if(t===Be.CurrencyDecimal)return n[ye.NumberSymbols][Be.Decimal];if(t===Be.CurrencyGroup)return n[ye.NumberSymbols][Be.Group]}return r}function Ik(e){if(!e[ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gn(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function hm(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const r8=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,tc={},i8=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Er=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(Er||{}),te=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(te||{}),ne=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(ne||{});function o8(e,t,n,r){let i=function p8(e){if(wk(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,s=1]=e.split("-").map(a=>+a);return Yl(i,o-1,s)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(r8))return function g8(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),u=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,c,u),t}(r)}const t=new Date(e);if(!wk(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=Ir(n,t)||t;let a,s=[];for(;t;){if(a=i8.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const l=s.pop();if(!l)break;t=l}}let c=i.getTimezoneOffset();r&&(c=Ck(r,c),i=function h8(e,t,n){const r=n?-1:1,i=e.getTimezoneOffset();return function f8(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,r*(Ck(t,i)-i))}(i,r,!0));let u="";return s.forEach(l=>{const d=function d8(e){if(gm[e])return gm[e];let t;switch(e){case"G":case"GG":case"GGG":t=ve(ne.Eras,he.Abbreviated);break;case"GGGG":t=ve(ne.Eras,he.Wide);break;case"GGGGG":t=ve(ne.Eras,he.Narrow);break;case"y":t=$e(te.FullYear,1,0,!1,!0);break;case"yy":t=$e(te.FullYear,2,0,!0,!0);break;case"yyy":t=$e(te.FullYear,3,0,!1,!0);break;case"yyyy":t=$e(te.FullYear,4,0,!1,!0);break;case"Y":t=Jl(1);break;case"YY":t=Jl(2,!0);break;case"YYY":t=Jl(3);break;case"YYYY":t=Jl(4);break;case"M":case"L":t=$e(te.Month,1,1);break;case"MM":case"LL":t=$e(te.Month,2,1);break;case"MMM":t=ve(ne.Months,he.Abbreviated);break;case"MMMM":t=ve(ne.Months,he.Wide);break;case"MMMMM":t=ve(ne.Months,he.Narrow);break;case"LLL":t=ve(ne.Months,he.Abbreviated,Mt.Standalone);break;case"LLLL":t=ve(ne.Months,he.Wide,Mt.Standalone);break;case"LLLLL":t=ve(ne.Months,he.Narrow,Mt.Standalone);break;case"w":t=pm(1);break;case"ww":t=pm(2);break;case"W":t=pm(1,!0);break;case"d":t=$e(te.Date,1);break;case"dd":t=$e(te.Date,2);break;case"c":case"cc":t=$e(te.Day,1);break;case"ccc":t=ve(ne.Days,he.Abbreviated,Mt.Standalone);break;case"cccc":t=ve(ne.Days,he.Wide,Mt.Standalone);break;case"ccccc":t=ve(ne.Days,he.Narrow,Mt.Standalone);break;case"cccccc":t=ve(ne.Days,he.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":t=ve(ne.Days,he.Abbreviated);break;case"EEEE":t=ve(ne.Days,he.Wide);break;case"EEEEE":t=ve(ne.Days,he.Narrow);break;case"EEEEEE":t=ve(ne.Days,he.Short);break;case"a":case"aa":case"aaa":t=ve(ne.DayPeriods,he.Abbreviated);break;case"aaaa":t=ve(ne.DayPeriods,he.Wide);break;case"aaaaa":t=ve(ne.DayPeriods,he.Narrow);break;case"b":case"bb":case"bbb":t=ve(ne.DayPeriods,he.Abbreviated,Mt.Standalone,!0);break;case"bbbb":t=ve(ne.DayPeriods,he.Wide,Mt.Standalone,!0);break;case"bbbbb":t=ve(ne.DayPeriods,he.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":t=ve(ne.DayPeriods,he.Abbreviated,Mt.Format,!0);break;case"BBBB":t=ve(ne.DayPeriods,he.Wide,Mt.Format,!0);break;case"BBBBB":t=ve(ne.DayPeriods,he.Narrow,Mt.Format,!0);break;case"h":t=$e(te.Hours,1,-12);break;case"hh":t=$e(te.Hours,2,-12);break;case"H":t=$e(te.Hours,1);break;case"HH":t=$e(te.Hours,2);break;case"m":t=$e(te.Minutes,1);break;case"mm":t=$e(te.Minutes,2);break;case"s":t=$e(te.Seconds,1);break;case"ss":t=$e(te.Seconds,2);break;case"S":t=$e(te.FractionalSeconds,1);break;case"SS":t=$e(te.FractionalSeconds,2);break;case"SSS":t=$e(te.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Zl(Er.Short);break;case"ZZZZZ":t=Zl(Er.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Zl(Er.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Zl(Er.Long);break;default:return null}return gm[e]=t,t}(l);u+=d?d(i,n,c):"''"===l?"'":l.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Yl(e,t,n){const r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Ir(e,t){const n=function G3(e){return St(e)[ye.LocaleId]}(e);if(tc[n]=tc[n]||{},tc[n][t])return tc[n][t];let r="";switch(t){case"shortDate":r=zl(e,tn.Short);break;case"mediumDate":r=zl(e,tn.Medium);break;case"longDate":r=zl(e,tn.Long);break;case"fullDate":r=zl(e,tn.Full);break;case"shortTime":r=ql(e,tn.Short);break;case"mediumTime":r=ql(e,tn.Medium);break;case"longTime":r=ql(e,tn.Long);break;case"fullTime":r=ql(e,tn.Full);break;case"short":const i=Ir(e,"shortTime"),o=Ir(e,"shortDate");r=Ql(Kl(e,tn.Short),[i,o]);break;case"medium":const s=Ir(e,"mediumTime"),a=Ir(e,"mediumDate");r=Ql(Kl(e,tn.Medium),[s,a]);break;case"long":const c=Ir(e,"longTime"),u=Ir(e,"longDate");r=Ql(Kl(e,tn.Long),[c,u]);break;case"full":const l=Ir(e,"fullTime"),d=Ir(e,"fullDate");r=Ql(Kl(e,tn.Full),[l,d])}return r&&(tc[n][t]=r),r}function Ql(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return null!=t&&r in t?t[r]:n})),e}function Tn(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function $e(e,t,n=0,r=!1,i=!1){return function(o,s){let a=function a8(e,t){switch(e){case te.FullYear:return t.getFullYear();case te.Month:return t.getMonth();case te.Date:return t.getDate();case te.Hours:return t.getHours();case te.Minutes:return t.getMinutes();case te.Seconds:return t.getSeconds();case te.FractionalSeconds:return t.getMilliseconds();case te.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((n>0||a>-n)&&(a+=n),e===te.Hours)0===a&&-12===n&&(a=12);else if(e===te.FractionalSeconds)return function s8(e,t){return Tn(e,3).substring(0,t)}(a,t);const c=pn(s,Be.MinusSign);return Tn(a,t,c,r,i)}}function ve(e,t,n=Mt.Format,r=!1){return function(i,o){return function c8(e,t,n,r,i,o){switch(n){case ne.Months:return function K3(e,t,n){const r=St(e),o=gn([r[ye.MonthsFormat],r[ye.MonthsStandalone]],t);return gn(o,n)}(t,i,r)[e.getMonth()];case ne.Days:return function q3(e,t,n){const r=St(e),o=gn([r[ye.DaysFormat],r[ye.DaysStandalone]],t);return gn(o,n)}(t,i,r)[e.getDay()];case ne.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const u=function X3(e){const t=St(e);return Ik(t),(t[ye.ExtraData][2]||[]).map(r=>"string"==typeof r?hm(r):[hm(r[0]),hm(r[1])])}(t),l=function J3(e,t,n){const r=St(e);Ik(r);const o=gn([r[ye.ExtraData][0],r[ye.ExtraData][1]],t)||[];return gn(o,n)||[]}(t,i,r),d=u.findIndex(f=>{if(Array.isArray(f)){const[h,p]=f,m=s>=h.hours&&a>=h.minutes,y=s<p.hours||s===p.hours&&a<p.minutes;if(h.hours<p.hours){if(m&&y)return!0}else if(m||y)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(-1!==d)return l[d]}return function z3(e,t,n){const r=St(e),o=gn([r[ye.DayPeriodsFormat],r[ye.DayPeriodsStandalone]],t);return gn(o,n)}(t,i,r)[s<12?0:1];case ne.Eras:return function Y3(e,t){return gn(St(e)[ye.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,e,t,n,r)}}function Zl(e){return function(t,n,r){const i=-1*r,o=pn(n,Be.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Er.Short:return(i>=0?"+":"")+Tn(s,2,o)+Tn(Math.abs(i%60),2,o);case Er.ShortGMT:return"GMT"+(i>=0?"+":"")+Tn(s,1,o);case Er.Long:return"GMT"+(i>=0?"+":"")+Tn(s,2,o)+":"+Tn(Math.abs(i%60),2,o);case Er.Extended:return 0===r?"Z":(i>=0?"+":"")+Tn(s,2,o)+":"+Tn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}const u8=0,Xl=4;function bk(e){return Yl(e.getFullYear(),e.getMonth(),e.getDate()+(Xl-e.getDay()))}function pm(e,t=!1){return function(n,r){let i;if(t){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{const o=bk(n),s=function l8(e){const t=Yl(e,u8,1).getDay();return Yl(e,0,1+(t<=Xl?Xl:Xl+7)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Tn(i,e,pn(r,Be.MinusSign))}}function Jl(e,t=!1){return function(n,r){return Tn(bk(n).getFullYear(),e,pn(r,Be.MinusSign),t)}}const gm={};function Ck(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function wk(e){return e instanceof Date&&!isNaN(e.valueOf())}const m8=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function vm(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class k8{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bm=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new k8(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),kk(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{kk(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(C(Wn),C(yr),C(Hl))}}static{this.\u0275dir=L({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function kk(e,t){e.context.$implicit=t.item}let Cm=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new N8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Nk("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Nk("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(C(Wn),C(yr))}}static{this.\u0275dir=L({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class N8{constructor(){this.$implicit=null,this.ngIf=null}}function Nk(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ge(t)}'.`)}function Sn(e,t){return new T(2100,!1)}const W8=new N("DATE_PIPE_DEFAULT_TIMEZONE"),G8=new N("DATE_PIPE_DEFAULT_OPTIONS");let xk=(()=>{class e{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(null==n||""===n||n!=n)return null;try{return o8(n,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw Sn()}}static{this.\u0275fac=function(r){return new(r||e)(C(vr,16),C(W8,24),C(G8,24))}}static{this.\u0275pipe=Lt({name:"date",type:e,pure:!0,standalone:!0})}}return e})(),Ok=(()=>{class e{constructor(n){this._locale=n}transform(n,r,i){if(!function Tm(e){return!(null==e||""===e||e!=e)}(n))return null;i=i||this._locale;try{return function b8(e,t,n){return function _m(e,t,n,r,i,o,s=!1){let a="",c=!1;if(isFinite(e)){let u=function w8(e){let r,i,o,s,a,t=Math.abs(e)+"",n=0;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;"0"===t.charAt(o);o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;"0"===t.charAt(a);)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>22&&(r=r.splice(0,21),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}(e);s&&(u=function C8(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(u));let l=t.minInt,d=t.minFrac,f=t.maxFrac;if(o){const _=o.match(m8);if(null===_)throw new Error(`${o} is not a valid digit info`);const I=_[1],D=_[3],k=_[5];null!=I&&(l=vm(I)),null!=D&&(d=vm(D)),null!=k?f=vm(k):null!=D&&d>f&&(f=d)}!function D8(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const o=Math.min(Math.max(t,i),n);let s=o+e.integerLen,a=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=0!==o;const u=t+e.integerLen,l=r.reduceRight(function(d,f,h,p){return p[h]=(f+=d)<10?f:f-10,c&&(0===p[h]&&h>=u?p.pop():c=!1),f>=10?1:0},0);l&&(r.unshift(l),e.integerLen++)}(u,d,f);let h=u.digits,p=u.integerLen;const m=u.exponent;let y=[];for(c=h.every(_=>!_);p<l;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?y=h.splice(p,h.length):(y=h,h=[0]);const v=[];for(h.length>=t.lgSize&&v.unshift(h.splice(-t.lgSize,h.length).join(""));h.length>t.gSize;)v.unshift(h.splice(-t.gSize,h.length).join(""));h.length&&v.unshift(h.join("")),a=v.join(pn(n,r)),y.length&&(a+=pn(n,i)+y.join("")),m&&(a+=pn(n,Be.Exponential)+"+"+m)}else a=pn(n,Be.Infinity);return a=e<0&&!c?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,function ym(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf("#"));for(let l=0;l<c.length;l++){const d=c.charAt(l);"0"===d?n.minFrac=n.maxFrac=l+1:"#"===d?n.maxFrac=l+1:n.posSuf+=d}const u=a.split(",");if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){const l=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf("#");n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+l).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function fm(e,t){return St(e)[ye.NumberFormats][t]}(t,Gl.Decimal),pn(t,Be.MinusSign)),t,Be.Group,Be.Decimal,n)}(function Sm(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(n),i,r)}catch(o){throw Sn()}}static{this.\u0275fac=function(r){return new(r||e)(C(vr,16))}}static{this.\u0275pipe=Lt({name:"number",type:e,pure:!0,standalone:!0})}}return e})();let e4=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({})}}return e})();function Lk(e){return"server"===e}class A4 extends B3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class km extends A4{static makeCurrent(){!function j3(e){dm||(dm=e)}(new km)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function M4(){return ic=ic||document.querySelector("base"),ic?ic.getAttribute("href"):null}();return null==n?null:function k4(e){rd=rd||document.createElement("a"),rd.setAttribute("href",e);const t=rd.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ic=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function S8(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let rd,ic=null,R4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();const Nm=new N("EventManagerPlugins");let $k=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new T(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(q(Nm),q(fe))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();class Hk{constructor(t){this._doc=t}}const Rm="ng-app-id";let Wk=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Lk(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Rm}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Rm),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Rm,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(q(Bi),q(cl),q(iS,8),q(Xr))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();const xm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pm=/%COMP%/g,F4=new N("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function zk(e,t){return t.map(n=>n.replace(Pm,e))}let qk=(()=>{class e{constructor(n,r,i,o,s,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Lk(a),this.defaultRenderer=new Om(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r={...r,encapsulation:En.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof Yk?i.applyToHost(n):i instanceof Fm&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case En.Emulated:o=new Yk(c,u,r,this.appId,l,s,a,d);break;case En.ShadowDom:return new j4(c,u,n,r,s,a,this.nonce,d);default:o=new Fm(c,u,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(q($k),q(Wk),q(cl),q(F4),q(Bi),q(Xr),q(fe),q(iS))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();class Om{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(xm[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Kk(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Kk(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new T(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=xm[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=xm[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Qr.DashCase|Qr.Important)?t.style.setProperty(n,r,i&Qr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Qr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ec().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function Kk(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class j4 extends Om{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=zk(i.id,i.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Fm extends Om{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?zk(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Yk extends Fm{constructor(t,n,r,i,o,s,a,c){const u=i+"-"+r.id;super(t,n,r,o,s,a,c,u),this.contentAttr=function L4(e){return"_ngcontent-%COMP%".replace(Pm,e)}(u),this.hostAttr=function V4(e){return"_nghost-%COMP%".replace(Pm,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let B4=(()=>{class e extends Hk{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(q(Bi))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();const Qk=["alt","control","meta","shift"],$4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H4={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let W4=(()=>{class e extends Hk{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ec().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Qk.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=$4[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Qk.forEach(s=>{s!==i&&(0,H4[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(q(Bi))}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();const K4=zM(S3,"browser",[{provide:Xr,useValue:"browser"},{provide:rS,useValue:function G4(){km.makeCurrent()},multi:!0},{provide:Bi,useFactory:function q4(){return function TB(e){Dp=e}(document),document},deps:[]}]),Y4=new N(""),Jk=[{provide:Ul,useClass:class N4{addToWindow(t){me.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new T(5103,!1);return o},me.getAllAngularTestabilities=()=>t.getAllTestabilities(),me.getAllAngularRootElements=()=>t.getAllRootElements(),me.frameworkStabilizers||(me.frameworkStabilizers=[]),me.frameworkStabilizers.push(r=>{const i=me.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ec().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:BM,useClass:em,deps:[fe,tm,Ul]},{provide:em,useClass:em,deps:[fe,tm,Ul]}],eN=[{provide:Pp,useValue:"root"},{provide:pr,useFactory:function z4(){return new pr},deps:[]},{provide:Nm,useClass:B4,multi:!0,deps:[Bi,fe,Xr]},{provide:Nm,useClass:W4,multi:!0,deps:[Bi]},qk,Wk,$k,{provide:lS,useExisting:qk},{provide:class o4{},useClass:R4,deps:[]},[]];let Q4=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:cl,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(q(Y4,12))}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({providers:[...eN,...Jk],imports:[e4,A3]})}}return e})();typeof window<"u"&&window;const{isArray:rq}=Array,{getPrototypeOf:iq,prototype:oq,keys:sq}=Object;const{isArray:uq}=Array;function fq(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function hq(...e){const t=function CV(e){return Ce(mh(e))?e.pop():void 0}(e),{args:n,keys:r}=function aq(e){if(1===e.length){const t=e[0];if(rq(t))return{args:t,keys:null};if(function cq(e){return e&&"object"==typeof e&&iq(e)===oq}(t)){const n=sq(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e),i=new rt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let l=0;l<s;l++){let d=!1;xn(n[l]).subscribe(or(o,f=>{d||(d=!0,u--),a[l]=f},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?fq(r,a):a),o.complete())}))}});return t?i.pipe(function dq(e){return lh(t=>function lq(e,t){return uq(t)?e(...t):e(t)}(e,t))}(t)):i}let iN=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(C(xi),C(fn))}}static{this.\u0275dir=L({type:e})}}return e})(),$i=(()=>{class e extends iN{static{this.\u0275fac=function(){let n;return function(i){return(n||(n=function ht(e){return sr(()=>{const t=e.prototype.constructor,n=t[ar]||rp(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[ar]||rp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(e)))(i||e)}}()}static{this.\u0275dir=L({type:e,features:[ue]})}}return e})();const Gn=new N("NgValueAccessor"),gq={provide:Gn,useExisting:ge(()=>id),multi:!0},_q=new N("CompositionEventMode");let id=(()=>{class e extends iN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mq(){const e=ec()?ec().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(C(xi),C(fn),C(_q,8))}}static{this.\u0275dir=L({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&De("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Te([gq]),ue]})}}return e})();const mt=new N("NgValidators"),oi=new N("NgAsyncValidators");function gN(e){return null!=e}function mN(e){return Al(e)?_h(e):e}function _N(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function yN(e,t){return t.map(n=>n(e))}function vN(e){return e.map(t=>function vq(e){return!e.validate}(t)?t:n=>t.validate(n))}function Vm(e){return null!=e?function EN(e){if(!e)return null;const t=e.filter(gN);return 0==t.length?null:function(n){return _N(yN(n,t))}}(vN(e)):null}function Um(e){return null!=e?function IN(e){if(!e)return null;const t=e.filter(gN);return 0==t.length?null:function(n){return hq(yN(n,t).map(mN)).pipe(lh(_N))}}(vN(e)):null}function bN(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function jm(e){return e?Array.isArray(e)?e:[e]:[]}function sd(e,t){return Array.isArray(e)?e.includes(t):e===t}function DN(e,t){const n=jm(t);return jm(e).forEach(i=>{sd(n,i)||n.push(i)}),n}function TN(e,t){return jm(t).filter(n=>!sd(e,n))}class SN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Um(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class kt extends SN{get formDirective(){return null}get path(){return null}}class si extends SN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class AN{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let MN=(()=>{class e extends AN{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(C(si,2))}}static{this.\u0275dir=L({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ja("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ue]})}}return e})();const oc="VALID",cd="INVALID",gs="PENDING",sc="DISABLED";function ud(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Gm{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===oc}get invalid(){return this.status===cd}get pending(){return this.status==gs}get disabled(){return this.status===sc}get enabled(){return this.status!==sc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(DN(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(DN(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(TN(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(TN(t,this._rawAsyncValidators))}hasValidator(t){return sd(this._rawValidators,t)}hasAsyncValidator(t){return sd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=gs,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=sc,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=oc,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oc||this.status===gs)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sc:oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=gs,this._hasOwnPendingAsyncValidator=!0;const n=mN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?sc:this.errors?cd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gs)?gs:this._anyControlsHaveStatus(cd)?cd:oc}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ud(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function wq(e){return Array.isArray(e)?Vm(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Dq(e){return Array.isArray(e)?Um(e):e||null}(this._rawAsyncValidators)}}const ms=new N("CallSetDisabledState",{providedIn:"root",factory:()=>ld}),ld="always";function ac(e,t,n=ld){(function qm(e,t){const n=function CN(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(bN(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function wN(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(bN(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();hd(t._rawValidators,i),hd(t._rawAsyncValidators,i)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function Aq(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&xN(e,t)})}(e,t),function kq(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function Mq(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&xN(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function Sq(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function hd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function xN(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function FN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function LN(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const VN=class extends Gm{constructor(t=null,n,r){super(function Hm(e){return(ud(e)?e.validators:e)||null}(n),function Wm(e,t){return(ud(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ud(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=LN(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){FN(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){FN(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){LN(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Vq={provide:si,useExisting:ge(()=>Xm)},BN=(()=>Promise.resolve())();let Xm=(()=>{class e extends si{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new VN,this._registered=!1,this.name="",this.update=new ct,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Qm(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===id?n=o:function xq(e){return Object.getPrototypeOf(e.constructor)===$i}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Ym(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ac(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){BN.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function lm(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);BN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function dd(e,t){return[...t.path,e]}(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(C(kt,9),C(mt,10),C(oi,10),C(Gn,10),C(nk,8),C(ms,8))}}static{this.\u0275dir=L({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Te([Vq]),ue,ur]})}}return e})(),HN=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({})}}return e})(),u6=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({imports:[HN]})}}return e})(),d6=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:ms,useValue:n.callSetDisabledState??ld}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=un({type:e})}static{this.\u0275inj=Yt({imports:[u6]})}}return e})();function aR(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(c){aR(o,r,i,s,a,"next",c)}function a(c){aR(o,r,i,s,a,"throw",c)}s(void 0)})}}const w=function(e,t){if(!e)throw _s(t)},_s=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},cR=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},gd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0;let f=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(cR(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(1023&c))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==d)throw new h6;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uR=function(e){const t=cR(e);return gd.encodeByteArray(t,!0)},md=function(e){return uR(e).replace(/\./g,"")},_d=function(e){try{return gd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p6(e){return lR(void 0,e)}function lR(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!g6(n)||(e[n]=lR(e[n],t[n]));return e}function g6(e){return"__proto__"!==e}const yd=()=>{try{return function m6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&_d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},dR=e=>{var t,n;return null===(n=null===(t=yd())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},fR=e=>{const t=dR(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hR=()=>{var e;return null===(e=yd())||void 0===e?void 0:e.config},pR=e=>{var t;return null===(t=yd())||void 0===t?void 0:t[`_${e}`]};class Wi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(n):t(n,r))}}}function gR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[md(JSON.stringify({alg:"none",type:"JWT"})),md(JSON.stringify(s)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function s_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function a_(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _R(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Gi(){try{return"object"==typeof indexedDB}catch{return!1}}function uc(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){t(n)}})}function c_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class mn extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zn.prototype.create)}}class zn{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?function b6(e,t){return e.replace(C6,(n,r)=>{const i=t[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new mn(i,`${this.serviceName}: ${s} (${i}).`,r)}}const C6=/\{\$([^}]+)}/g;function lc(e){return JSON.parse(e)}function Ye(e){return JSON.stringify(e)}const vd=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=lc(_d(o[0])||""),n=lc(_d(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};function qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ys(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function u_(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ed(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Id(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(yR(o)&&yR(s)){if(!Id(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yR(e){return null!==e&&"object"==typeof e}function vs(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class T6{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if("string"==typeof t)for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(f<<1|f>>>31)}let u,l,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^o&(s^a),l=1518500249):(u=o^s^a,l=1859775393):d<60?(u=o&s|a&(o|s),l=2400959708):(u=o^s^a,l=3395469782);const f=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(null==t)return;void 0===n&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(0===s)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const t=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}class A6{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function M6(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r},void 0===i.next&&(i.next=l_),void 0===i.error&&(i.error=l_),void 0===i.complete&&(i.complete=l_);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){void 0===this.observers||void 0===this.observers[t]||(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l_(){}function Es(e,t){return`${e} failed: ${t} argument `}const bd=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},N6=1e3,R6=2,x6=144e5,P6=.5;function d_(e,t=N6,n=R6){const r=t*Math.pow(n,e),i=Math.round(P6*r*(Math.random()-.5)*2);return Math.min(x6,r+i)}function He(e){return e&&e._delegate?e._delegate:e}class ut{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const zi="[DEFAULT]";class F6{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Wi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),i=null!==(n=t?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function V6(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=zi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return g(function*(){const n=Array.from(t.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t=zi){return this.instances.has(t)}getOptions(t=zi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t,e===zi?void 0:e),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var e;return r||null}normalizeInstanceIdentifier(t=zi){return this.component?this.component.multipleInstances?t:zi:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U6{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new F6(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}const f_=[];var le=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(le||{});const vR={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},j6=le.INFO,B6={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},$6=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=B6[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Is{constructor(t){this.name=t,this._logLevel=j6,this._logHandler=$6,this._userLogHandler=null,f_.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in le))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?vR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...t),this._logHandler(this,le.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...t),this._logHandler(this,le.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,le.INFO,...t),this._logHandler(this,le.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,le.WARN,...t),this._logHandler(this,le.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...t),this._logHandler(this,le.ERROR,...t)}}const H6=(e,t)=>t.some(n=>e instanceof n);let ER,IR;const bR=new WeakMap,h_=new WeakMap,CR=new WeakMap,p_=new WeakMap,g_=new WeakMap;let m_={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return h_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||CR.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Q6(e){return"function"==typeof e?function Y6(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function G6(){return IR||(IR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...t){return e.apply(__(this),t),ai(bR.get(this))}:function(...t){return ai(e.apply(__(this),t))}:function(t,...n){const r=e.call(__(this),t,...n);return CR.set(r,t.sort?t.sort():[t]),ai(r)}}(e):(e instanceof IDBTransaction&&function q6(e){if(h_.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});h_.set(e,t)}(e),H6(e,function W6(){return ER||(ER=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,m_):e)}function ai(e){if(e instanceof IDBRequest)return function z6(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(ai(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&bR.set(n,e)}).catch(()=>{}),g_.set(t,e),t}(e);if(p_.has(e))return p_.get(e);const t=Q6(e);return t!==e&&(p_.set(e,t),g_.set(t,e)),t}const __=e=>g_.get(e),X6=["get","getKey","getAll","getAllKeys","count"],J6=["put","add","delete","clear"],y_=new Map;function wR(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(y_.get(t))return y_.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=J6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!X6.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return y_.set(t,o),o}!function K6(e){m_=e(m_)}(e=>({...e,get:(t,n,r)=>wR(t,n)||e.get(t,n,r),has:(t,n)=>!!wR(t,n)||e.has(t,n)}));class e5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function t5(e){const t=e.getComponent();return"VERSION"===t?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const v_="@firebase/app",qi=new Is("@firebase/app"),Cd="[DEFAULT]",S5={[v_]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ki=new Map,wd=new Map;function A5(e,t){try{e.container.addComponent(t)}catch(n){qi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _t(e){const t=e.name;if(wd.has(t))return qi.debug(`There were multiple attempts to register component ${t}.`),!1;wd.set(t,e);for(const n of Ki.values())A5(n,e);return!0}function Yi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Cr=new zn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class k5{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}const ci="9.23.0";function TR(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Cd,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(n||(n=hR()),!n)throw Cr.create("no-options");const o=Ki.get(i);if(o){if(Id(n,o.options)&&Id(r,o.config))return o;throw Cr.create("duplicate-app",{appName:i})}const s=new U6(i);for(const c of wd.values())s.addComponent(c);const a=new k5(n,r,s);return Ki.set(i,a),a}function Dd(e=Cd){const t=Ki.get(e);if(!t&&e===Cd&&hR())return TR();if(!t)throw Cr.create("no-app",{appName:e});return t}function SR(){return Array.from(Ki.values())}function be(e,t,n){var r;let i=null!==(r=S5[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void qi.warn(a.join(" "))}_t(new ut(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const N5="firebase-heartbeat-database",R5=1,dc="firebase-heartbeat-store";let I_=null;function AR(){return I_||(I_=function Z6(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=ai(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ai(s.result),c.oldVersion,c.newVersion,ai(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}(N5,R5,{upgrade:(e,t)=>{0===t&&e.createObjectStore(dc)}}).catch(e=>{throw Cr.create("idb-open",{originalErrorMessage:e.message})})),I_}function b_(){return(b_=g(function*(e){try{return yield(yield AR()).transaction(dc).objectStore(dc).get(kR(e))}catch(t){if(t instanceof mn)qi.warn(t.message);else{const n=Cr.create("idb-get",{originalErrorMessage:t?.message});qi.warn(n.message)}}})).apply(this,arguments)}function MR(e,t){return C_.apply(this,arguments)}function C_(){return(C_=g(function*(e,t){try{const r=(yield AR()).transaction(dc,"readwrite");yield r.objectStore(dc).put(t,kR(e)),yield r.done}catch(n){if(n instanceof mn)qi.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n?.message});qi.warn(r.message)}}})).apply(this,arguments)}function kR(e){return`${e.name}!${e.options.appId}`}class F5{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new V5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var t=this;return g(function*(){const r=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NR();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==i&&!t._heartbeatsCache.heartbeats.some(o=>o.date===i))return t._heartbeatsCache.heartbeats.push({date:i,agent:r}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return g(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const n=NR(),{heartbeatsToSend:r,unsentEntries:i}=function L5(e,t=1024){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RR(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RR(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(t._heartbeatsCache.heartbeats),o=md(JSON.stringify({version:2,heartbeats:r}));return t._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(t._heartbeatsCache.heartbeats=i,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),o})()}}function NR(){return(new Date).toISOString().substring(0,10)}class V5{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!Gi()&&uc().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return g(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function x5(e){return b_.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return MR(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return MR(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}})()}}function RR(e){return md(JSON.stringify({version:2,heartbeats:e})).length}!function U5(e){_t(new ut("platform-logger",t=>new e5(t),"PRIVATE")),_t(new ut("heartbeat",t=>new F5(t),"PRIVATE")),be(v_,"0.9.13",e),be(v_,"0.9.13","esm2017"),be("fire-js","")}(""),be("firebase","9.23.0","app");const $5=(e,t)=>t.some(n=>e instanceof n);let xR,PR;const OR=new WeakMap,w_=new WeakMap,FR=new WeakMap,D_=new WeakMap,T_=new WeakMap;let S_={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return w_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||FR.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y5(e){return"function"==typeof e?function K5(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W5(){return PR||(PR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...t){return e.apply(A_(this),t),ui(OR.get(this))}:function(...t){return ui(e.apply(A_(this),t))}:function(t,...n){const r=e.call(A_(this),t,...n);return FR.set(r,t.sort?t.sort():[t]),ui(r)}}(e):(e instanceof IDBTransaction&&function z5(e){if(w_.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});w_.set(e,t)}(e),$5(e,function H5(){return xR||(xR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,S_):e)}function ui(e){if(e instanceof IDBRequest)return function G5(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(ui(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&OR.set(n,e)}).catch(()=>{}),T_.set(t,e),t}(e);if(D_.has(e))return D_.get(e);const t=Y5(e);return t!==e&&(D_.set(e,t),T_.set(t,e)),t}const A_=e=>T_.get(e),Z5=["get","getKey","getAll","getAllKeys","count"],X5=["put","add","delete","clear"],M_=new Map;function LR(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(M_.get(t))return M_.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=X5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z5.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return M_.set(t,o),o}!function q5(e){S_=e(S_)}(e=>({...e,get:(t,n,r)=>LR(t,n)||e.get(t,n,r),has:(t,n)=>!!LR(t,n)||e.has(t,n)}));const VR="@firebase/installations",k_="0.6.4",UR=1e4,jR=`w:${k_}`,BR="FIS_v2",J5="https://firebaseinstallations.googleapis.com/v1",e7=36e5,wr=new zn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $R(e){return e instanceof mn&&e.code.includes("request-failed")}function N_({projectId:e}){return`${J5}/projects/${e}/installations`}function HR(e){return{token:e.token,requestStatus:2,expiresIn:i7(e.expiresIn),creationTime:Date.now()}}function R_(e,t){return x_.apply(this,arguments)}function x_(){return(x_=g(function*(e,t){const r=(yield t.json()).error;return wr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function WR({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function P_(e){return O_.apply(this,arguments)}function O_(){return(O_=g(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function i7(e){return Number(e.replace("s","000"))}function F_(){return(F_=g(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=N_(e),i=WR(e),o=t.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:BR,appId:e.appId,sdkVersion:jR})},c=yield P_(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:HR(u.authToken)}}throw yield R_("Create Installation",c)})).apply(this,arguments)}function zR(e){return new Promise(t=>{setTimeout(t,e)})}const c7=/^[cdef][\w-]{21}$/,L_="";function u7(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=function l7(e){return function a7(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return c7.test(n)?n:L_}catch{return L_}}function bs(e){return`${e.appName}!${e.appId}`}const Cs=new Map;function qR(e,t){const n=bs(e);KR(n,t),function h7(e,t){const n=function YR(){return!Qi&&"BroadcastChannel"in self&&(Qi=new BroadcastChannel("[Firebase] FID Change"),Qi.onmessage=e=>{KR(e.data.key,e.data.fid)}),Qi}();n&&n.postMessage({key:e,fid:t}),function QR(){0===Cs.size&&Qi&&(Qi.close(),Qi=null)}()}(n,t)}function KR(e,t){const n=Cs.get(e);if(n)for(const r of n)r(t)}let Qi=null;const p7="firebase-installations-database",g7=1,Zi="firebase-installations-store";let V_=null;function U_(){return V_||(V_=function Q5(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=ui(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ui(s.result),c.oldVersion,c.newVersion,ui(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(p7,g7,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Zi)}})),V_}function Td(e,t){return j_.apply(this,arguments)}function j_(){return(j_=g(function*(e,t){const n=bs(e),i=(yield U_()).transaction(Zi,"readwrite"),o=i.objectStore(Zi),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&qR(e,t.fid),t})).apply(this,arguments)}function B_(e){return $_.apply(this,arguments)}function $_(){return($_=g(function*(e){const t=bs(e),r=(yield U_()).transaction(Zi,"readwrite");yield r.objectStore(Zi).delete(t),yield r.done})).apply(this,arguments)}function fc(e,t){return H_.apply(this,arguments)}function H_(){return(H_=g(function*(e,t){const n=bs(e),i=(yield U_()).transaction(Zi,"readwrite"),o=i.objectStore(Zi),s=yield o.get(n),a=t(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&qR(e,a.fid),a})).apply(this,arguments)}function W_(e){return G_.apply(this,arguments)}function G_(){return G_=g(function*(e){let t;const n=yield fc(e.appConfig,r=>{const i=function m7(e){return XR(e||{fid:u7(),registrationStatus:0})}(r),o=function _7(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(wr.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function y7(e,t){return z_.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:v7(e)}:{installationEntry:t}}(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===L_?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}}),G_.apply(this,arguments)}function z_(){return z_=g(function*(e,t){try{const n=yield function s7(e,t){return F_.apply(this,arguments)}(e,t);return Td(e.appConfig,n)}catch(n){throw $R(n)&&409===n.customData.serverCode?yield B_(e.appConfig):yield Td(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}),z_.apply(this,arguments)}function v7(e){return q_.apply(this,arguments)}function q_(){return(q_=g(function*(e){let t=yield ZR(e.appConfig);for(;1===t.registrationStatus;)yield zR(100),t=yield ZR(e.appConfig);if(0===t.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield W_(e);return r||n}return t})).apply(this,arguments)}function ZR(e){return fc(e,t=>{if(!t)throw wr.create("installation-not-found");return XR(t)})}function XR(e){return function E7(e){return 1===e.registrationStatus&&e.registrationTime+UR<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function K_(){return(K_=g(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=function b7(e,{fid:t}){return`${N_(e)}/${t}/authTokens:generate`}(e,n),i=function GR(e,{refreshToken:t}){const n=WR(e);return n.append("Authorization",function o7(e){return`${BR} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:jR,appId:e.appId}})},c=yield P_(()=>fetch(r,a));if(c.ok)return HR(yield c.json());throw yield R_("Generate Auth Token",c)})).apply(this,arguments)}function Y_(e){return Q_.apply(this,arguments)}function Q_(){return Q_=g(function*(e,t=!1){let n;const r=yield fc(e.appConfig,o=>{if(!ex(o))throw wr.create("not-registered");const s=o.authToken;if(!t&&function D7(e){return 2===e.requestStatus&&!function T7(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+e7}(e)}(s))return o;if(1===s.requestStatus)return n=function C7(e,t){return Z_.apply(this,arguments)}(e,t),o;{if(!navigator.onLine)throw wr.create("app-offline");const a=function S7(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(o);return n=function w7(e,t){return X_.apply(this,arguments)}(e,a),a}});return n?yield n:r.authToken}),Q_.apply(this,arguments)}function Z_(){return(Z_=g(function*(e,t){let n=yield JR(e.appConfig);for(;1===n.authToken.requestStatus;)yield zR(100),n=yield JR(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Y_(e,t):r})).apply(this,arguments)}function JR(e){return fc(e,t=>{if(!ex(t))throw wr.create("not-registered");return function A7(e){return 1===e.requestStatus&&e.requestTime+UR<Date.now()}(t.authToken)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function X_(){return X_=g(function*(e,t){try{const n=yield function I7(e,t){return K_.apply(this,arguments)}(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield Td(e.appConfig,r),n}catch(n){if(!$R(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield Td(e.appConfig,r)}else yield B_(e.appConfig);throw n}}),X_.apply(this,arguments)}function ex(e){return void 0!==e&&2===e.registrationStatus}function J_(){return(J_=g(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield W_(t);return r?r.catch(console.error):Y_(t).catch(console.error),n.fid})).apply(this,arguments)}function ey(){return ey=g(function*(e,t=!1){const n=e;return yield function N7(e){return ty.apply(this,arguments)}(n),(yield Y_(n,t)).token}),ey.apply(this,arguments)}function ty(){return(ty=g(function*(e){const{registrationPromise:t}=yield W_(e);t&&(yield t)})).apply(this,arguments)}function iy(e){return wr.create("missing-app-config-values",{valueName:e})}const tx="installations",F7=e=>{const t=e.getProvider("app").getImmediate(),n=function P7(e){if(!e||!e.options)throw iy("App Configuration");if(!e.name)throw iy("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw iy(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Yi(t,"heartbeat"),_delete:()=>Promise.resolve()}},L7=e=>{const n=Yi(e.getProvider("app").getImmediate(),tx).getImmediate();return{getId:()=>function M7(e){return J_.apply(this,arguments)}(n),getToken:i=>function k7(e){return ey.apply(this,arguments)}(n,i)}};(function V7(){_t(new ut(tx,F7,"PUBLIC")),_t(new ut("installations-internal",L7,"PRIVATE"))})(),be(VR,k_),be(VR,k_,"esm2017");const oy="@firebase/remote-config",Ht=new zn("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Y7{constructor(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}fetch(t){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(t.cacheMaxAgeMillis,r))return i;t.eTag=i&&i.eTag;const o=yield n.client.fetch(t),s=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(n.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function Q7(e=navigator){return e.languages&&e.languages[0]||e.language}class Z7{constructor(t,n,r,i,o,s){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(t){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},c={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:Q7()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(s,u),d=new Promise((v,_)=>{t.signal.addEventListener(()=>{const I=new Error("The operation was aborted.");I.name="AbortError",_(I)})});let f;try{yield Promise.race([l,d]),f=yield l}catch(v){let _="fetch-client-network";throw"AbortError"===v?.name&&(_="fetch-timeout"),Ht.create(_,{originalErrorMessage:v?.message})}let h=f.status;const p=f.headers.get("ETag")||void 0;let m,y;if(200===f.status){let v;try{v=yield f.json()}catch(_){throw Ht.create("fetch-client-parse",{originalErrorMessage:_?.message})}m=v.entries,y=v.state}if("INSTANCE_STATE_UNSPECIFIED"===y?h=500:"NO_CHANGE"===y?h=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(m={}),304!==h&&200!==h)throw Ht.create("fetch-status",{httpStatus:h});return{status:h,eTag:p,config:m}})()}}class eK{constructor(t,n){this.client=t,this.storage=n}fetch(t){var n=this;return g(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(t,r)})()}attemptFetch(t,n){var r=this;return g(function*(i,{throttleEndTimeMillis:o,backoffCount:s}){yield function X7(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(Ht.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(i.signal,o);try{const a=yield r.client.fetch(i);return yield r.storage.deleteThrottleMetadata(),a}catch(a){if(!function J7(e){if(!(e instanceof mn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a))throw a;const c={throttleEndTimeMillis:Date.now()+d_(s),backoffCount:s+1};return yield r.storage.setThrottleMetadata(c),r.attemptFetch(i,c)}}).apply(this,arguments)}}class rK{constructor(t,n,r,i,o){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ad(e,t){const n=e.target.error||void 0;return Ht.create(t,{originalErrorMessage:n&&n?.message})}const Xi="app_namespace_store";class aK{constructor(t,n,r,i=function sK(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{t(Ad(r,"storage-open"))},n.onsuccess=r=>{e(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xi,{keyPath:"compositeKey"})}}catch(n){t(Ht.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xi],"readonly").objectStore(Xi),c=n.createCompositeKey(t);try{const u=a.get(c);u.onerror=l=>{o(Ad(l,"storage-get"))},u.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(u){o(Ht.create("storage-get",{originalErrorMessage:u?.message}))}})})()}set(t,n){var r=this;return g(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([Xi],"readwrite").objectStore(Xi),u=r.createCompositeKey(t);try{const l=c.put({compositeKey:u,value:n});l.onerror=d=>{s(Ad(d,"storage-set"))},l.onsuccess=()=>{o()}}catch(l){s(Ht.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(t){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xi],"readwrite").objectStore(Xi),c=n.createCompositeKey(t);try{const u=a.delete(c);u.onerror=l=>{o(Ad(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){o(Ht.create("storage-delete",{originalErrorMessage:u?.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class cK{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return g(function*(){const n=t.storage.getLastFetchStatus(),r=t.storage.getLastSuccessfulFetchTimestampMillis(),i=t.storage.getActiveConfig(),o=yield n;o&&(t.lastFetchStatus=o);const s=yield r;s&&(t.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(t.activeConfig=a)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function lK(){return ly.apply(this,arguments)}function ly(){return(ly=g(function*(){if(!Gi())return!1;try{return yield uc()}catch{return!1}})).apply(this,arguments)}!function uK(){_t(new ut("remote-config",function e(t,{instanceIdentifier:n}){const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ht.create("registration-window");if(!Gi())throw Ht.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Ht.create("registration-project-id");if(!s)throw Ht.create("registration-api-key");if(!a)throw Ht.create("registration-app-id");const c=new aK(a,r.name,n=n||"firebase"),u=new cK(c),l=new Is(oy);l.logLevel=le.ERROR;const d=new Z7(i,ci,n,o,s,a),f=new eK(d,c),h=new Y7(f,c,u,l),p=new rK(r,h,u,c,l);return function z7(e){const t=He(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),be(oy,"0.4.4"),be(oy,"0.4.4","esm2017")}();const dK=(e,t)=>t.some(n=>e instanceof n);let ox,sx;const ax=new WeakMap,dy=new WeakMap,cx=new WeakMap,fy=new WeakMap,hy=new WeakMap;let py={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dy.get(e);if("objectStoreNames"===t)return e.objectStoreNames||cx.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function yK(e){return"function"==typeof e?function _K(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hK(){return sx||(sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...t){return e.apply(gy(this),t),Dr(ax.get(this))}:function(...t){return Dr(e.apply(gy(this),t))}:function(t,...n){const r=e.call(gy(this),t,...n);return cx.set(r,t.sort?t.sort():[t]),Dr(r)}}(e):(e instanceof IDBTransaction&&function gK(e){if(dy.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});dy.set(e,t)}(e),dK(e,function fK(){return ox||(ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,py):e)}function Dr(e){if(e instanceof IDBRequest)return function pK(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Dr(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&ax.set(n,e)}).catch(()=>{}),hy.set(t,e),t}(e);if(fy.has(e))return fy.get(e);const t=yK(e);return t!==e&&(fy.set(e,t),hy.set(t,e)),t}const gy=e=>hy.get(e);function ux(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=Dr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Dr(s.result),c.oldVersion,c.newVersion,Dr(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function my(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),Dr(n).then(()=>{})}const vK=["get","getKey","getAll","getAllKeys","count"],EK=["put","add","delete","clear"],_y=new Map;function lx(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(_y.get(t))return _y.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=EK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vK.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return _y.set(t,o),o}!function mK(e){py=e(py)}(e=>({...e,get:(t,n,r)=>lx(t,n)||e.get(t,n,r),has:(t,n)=>!!lx(t,n)||e.has(t,n)}));const IK="/firebase-messaging-sw.js",bK="/firebase-cloud-messaging-push-scope",dx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",CK="https://fcmregistrations.googleapis.com/v1",fx="google.c.a.c_id",wK="google.c.a.c_l",DK="google.c.a.ts";var Md=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(Md||{});function Tr(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function AK(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const yy="fcm_token_details_db",MK=5,hx="fcm_token_object_Store";function vy(){return vy=g(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(yy))return null;let t=null;return(yield ux(yy,MK,{upgrade:(r=g(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(hx))return;const u=a.objectStore(hx),l=yield u.index("fcmSenderId").get(e);if(yield u.clear(),l)if(2===o){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;t={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Tr(d.vapidKey)}}}else if(3===o){const d=l;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Tr(d.auth),p256dh:Tr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Tr(d.vapidKey)}}}else if(4===o){const d=l;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Tr(d.auth),p256dh:Tr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Tr(d.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield my(yy),yield my("fcm_vapid_details_db"),yield my("undefined"),function NK(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null;var r}),vy.apply(this,arguments)}const RK="firebase-messaging-database",xK=1,Ji="firebase-messaging-store";let Ey=null;function Iy(){return Ey||(Ey=ux(RK,xK,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ji)}})),Ey}function px(e){return by.apply(this,arguments)}function by(){return by=g(function*(e){const t=Ty(e),r=yield(yield Iy()).transaction(Ji).objectStore(Ji).get(t);if(r)return r;{const i=yield function kK(e){return vy.apply(this,arguments)}(e.appConfig.senderId);if(i)return yield Cy(e,i),i}}),by.apply(this,arguments)}function Cy(e,t){return wy.apply(this,arguments)}function wy(){return(wy=g(function*(e,t){const n=Ty(e),i=(yield Iy()).transaction(Ji,"readwrite");return yield i.objectStore(Ji).put(t,n),yield i.done,t})).apply(this,arguments)}function Dy(){return(Dy=g(function*(e){const t=Ty(e),r=(yield Iy()).transaction(Ji,"readwrite");yield r.objectStore(Ji).delete(t),yield r.done})).apply(this,arguments)}function Ty({appConfig:e}){return e.appId}const lt=new zn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function FK(e,t){return Sy.apply(this,arguments)}function Sy(){return(Sy=g(function*(e,t){const n=yield Ny(e),r=mx(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(ky(e.appConfig),i)).json()}catch(s){throw lt.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw lt.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw lt.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function Ay(){return(Ay=g(function*(e,t){const n=yield Ny(e),r=mx(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${ky(e.appConfig)}/${t.token}`,i)).json()}catch(s){throw lt.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw lt.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw lt.create("token-update-no-token");return o.token})).apply(this,arguments)}function gx(e,t){return My.apply(this,arguments)}function My(){return(My=g(function*(e,t){const r={method:"DELETE",headers:yield Ny(e)};try{const o=yield(yield fetch(`${ky(e.appConfig)}/${t}`,r)).json();if(o.error)throw lt.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw lt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function ky({projectId:e}){return`${CK}/projects/${e}/registrations`}function Ny(e){return Ry.apply(this,arguments)}function Ry(){return(Ry=g(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function mx({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==dx&&(i.web.applicationPubKey=r),i}const VK=6048e5;function xy(){return xy=g(function*(e){const t=yield function BK(e,t){return Ly.apply(this,arguments)}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Tr(t.getKey("auth")),p256dh:Tr(t.getKey("p256dh"))},r=yield px(e.firebaseDependencies);if(r){if(function $K(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+VK?function jK(e,t){return Oy.apply(this,arguments)}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield gx(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return yx(e.firebaseDependencies,n)}return yx(e.firebaseDependencies,n)}),xy.apply(this,arguments)}function Py(){return Py=g(function*(e){const t=yield px(e.firebaseDependencies);t&&(yield gx(e.firebaseDependencies,t.token),yield function PK(e){return Dy.apply(this,arguments)}(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),Py.apply(this,arguments)}function Oy(){return Oy=g(function*(e,t){try{const n=yield function LK(e,t){return Ay.apply(this,arguments)}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Cy(e.firebaseDependencies,r),n}catch(n){throw yield function _x(e){return Py.apply(this,arguments)}(e),n}}),Oy.apply(this,arguments)}function yx(e,t){return Fy.apply(this,arguments)}function Fy(){return(Fy=g(function*(e,t){const r={token:yield FK(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Cy(e,r),r.token})).apply(this,arguments)}function Ly(){return(Ly=g(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:AK(t)})})).apply(this,arguments)}function vx(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function HK(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const o=t.notification.icon;o&&(e.notification.icon=o)}(t,e),function WK(e,t){t.data&&(e.data=t.data)}(t,e),function GK(e,t){var n,r,i,o,s;if(!(t.fcmOptions||null!==(n=t.notification)&&void 0!==n&&n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=t.notification)||void 0===o?void 0:o.click_action;a&&(e.fcmOptions.link=a);const c=null===(s=t.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(t,e),t}function Ex(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Vy(e){return lt.create("missing-app-config-values",{valueName:e})}Ex("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ex("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class KK{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function qK(e){if(!e||!e.options)throw Vy("App Configuration Object");if(!e.name)throw Vy("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Vy(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Uy(){return(Uy=g(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(IK,{scope:bK}),e.swRegistration.update().catch(()=>{})}catch(t){throw lt.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})).apply(this,arguments)}function jy(){return(jy=g(function*(e,t){if(!t&&!e.swRegistration&&(yield function Ix(e){return Uy.apply(this,arguments)}(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw lt.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function By(){return(By=g(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=dx)})).apply(this,arguments)}function $y(){return $y=g(function*(e,t){if(!navigator)throw lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lt.create("permission-blocked");return yield function QK(e,t){return By.apply(this,arguments)}(e,t?.vapidKey),yield function YK(e,t){return jy.apply(this,arguments)}(e,t?.serviceWorkerRegistration),function UK(e){return xy.apply(this,arguments)}(e)}),$y.apply(this,arguments)}function Hy(){return(Hy=g(function*(e,t,n){const r=function XK(e){switch(e){case Md.NOTIFICATION_CLICKED:return"notification_open";case Md.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[fx],message_name:n[wK],message_time:n[DK],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wy(){return Wy=g(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Md.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(vx(n)):e.onMessageHandler.next(vx(n)));const r=n.data;(function zK(e){return"object"==typeof e&&!!e&&fx in e})(r)&&"1"===r["google.c.a.e"]&&(yield function ZK(e,t,n){return Hy.apply(this,arguments)}(e,n.messageType,r))}),Wy.apply(this,arguments)}const Cx="@firebase/messaging",e9=e=>{const t=new KK(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function JK(e,t){return Wy.apply(this,arguments)}(t,n)),t},t9=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>function bx(e,t){return $y.apply(this,arguments)}(t,r)}};function Dx(){return Gy.apply(this,arguments)}function Gy(){return(Gy=g(function*(){try{yield uc()}catch{return!1}return typeof window<"u"&&Gi()&&c_()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function n9(){_t(new ut("messaging",e9,"PUBLIC")),_t(new ut("messaging-internal",t9,"PRIVATE")),be(Cx,"0.12.4"),be(Cx,"0.12.4","esm2017")}();const kd="analytics",o9="firebase_id",s9="origin",a9=6e4,c9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ky="https://www.googletagmanager.com/gtag/js",Je=new Is("@firebase/analytics"),Nt=new zn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function l9(e){if(!e.startsWith(Ky)){const t=Nt.create("invalid-gtag-resource",{gtagURL:e});return Je.warn(t.message),""}return e}function Tx(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Yy(){return(Yy=g(function*(e,t,n,r,i,o){const s=r[i];try{if(s)yield t[s];else{const c=(yield Tx(n)).find(u=>u.measurementId===i);c&&(yield t[c.appId])}}catch(a){Je.error(a)}e("config",i,o)})).apply(this,arguments)}function Qy(){return(Qy=g(function*(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield Tx(n);for(const c of s){const u=a.find(d=>d.measurementId===c),l=u&&t[u.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){Je.error(o)}})).apply(this,arguments)}const v9=30,Sx=new class I9{constructor(t={},n=1e3){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function b9(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Zy(){return(Zy=g(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:b9(r)},o=c9.replace("{app-id}",n),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(t=c.error)&&void 0!==t&&t.message&&(a=c.error.message)}catch{}throw Nt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function Xy(){return(Xy=g(function*(e,t=Sx,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Nt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Nt.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new S9;return setTimeout(g(function*(){a.abort()}),void 0!==n?n:a9),Ax({appId:r,apiKey:i,measurementId:o},s,a,t)})).apply(this,arguments)}function Ax(e,t,n){return Jy.apply(this,arguments)}function Jy(){return Jy=g(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Sx){var o;const{appId:s,measurementId:a}=e;try{yield function D9(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(Nt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(c){if(a)return Je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function C9(e){return Zy.apply(this,arguments)}(e);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!function T9(e){if(!(e instanceof mn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(u)){if(i.deleteThrottleMetadata(s),a)return Je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw c}const l=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?d_(n,i.intervalMillis,v9):d_(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(s,d),Je.debug(`Calling attemptFetch again in ${l} millis`),Ax(e,d,r,i)}}),Jy.apply(this,arguments)}class S9{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}let ev,av;function tv(){return(tv=g(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const o=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function cv(){return(cv=g(function*(){if(!Gi())return Je.warn(Nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield uc()}catch(e){return Je.warn(Nt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0})).apply(this,arguments)}function uv(){return uv=g(function*(e,t,n,r,i,o,s){var a;const c=function w9(e){return Xy.apply(this,arguments)}(e);c.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&Je.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Je.error(h)),t.push(c);const u=function P9(){return cv.apply(this,arguments)}().then(h=>{if(h)return r.getId()}),[l,d]=yield Promise.all([c,u]);(function y9(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ky)&&n.src.includes(e))return n;return null})(o)||function f9(e,t){const n=function d9(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:l9}),r=document.createElement("script"),i=`${Ky}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,l.measurementId),av&&(i("consent","default",av),function Mx(e){av=e}(void 0)),i("js",new Date);const f=null!==(a=s?.config)&&void 0!==a?a:{};return f[s9]="firebase",f.update=!0,null!=d&&(f[o9]=d),i("config",l.measurementId,f),ev&&(i("set",ev),function kx(e){ev=e}(void 0)),l.measurementId}),uv.apply(this,arguments)}class F9{constructor(t){this.app=t}_delete(){return delete Kn[this.app.options.appId],Promise.resolve()}}let Kn={},Nx=[];const Rx={};let Px,Yn,Nd="dataLayer",lv=!1;function V9(e,t,n){!function L9(){const e=[];if(a_()&&e.push("This is a browser extension environment."),c_()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Nt.create("invalid-analytics-context",{errorInfo:t});Je.warn(n.message)}}();const r=e.options.appId;if(!r)throw Nt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Nt.create("no-api-key");Je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kn[r])throw Nt.create("already-exists",{id:r});if(!lv){!function h9(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Nd);const{wrappedGtag:o,gtagCore:s}=function _9(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function m9(e,t,n,r){function o(){return o=g(function*(s,...a){try{if("event"===s){const[c,u]=a;yield function g9(e,t,n,r,i){return Qy.apply(this,arguments)}(e,t,n,c,u)}else if("config"===s){const[c,u]=a;yield function p9(e,t,n,r,i,o){return Yy.apply(this,arguments)}(e,t,n,r,c,u)}else if("consent"===s){const[c]=a;e("consent","update",c)}else if("get"===s){const[c,u,l]=a;e("get",c,u,l)}else if("set"===s){const[c]=a;e("set",c)}else e(s,...a)}catch(c){Je.error(c)}}),o.apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(Kn,Nx,Rx,Nd,"gtag");Yn=o,Px=s,lv=!0}return Kn[r]=function O9(e,t,n,r,i,o,s){return uv.apply(this,arguments)}(e,Nx,Rx,t,Px,Nd,n),new F9(e)}function j9(){return dv.apply(this,arguments)}function dv(){return(dv=g(function*(){if(a_()||!c_()||!Gi())return!1;try{return yield uc()}catch{return!1}})).apply(this,arguments)}const Ox="@firebase/analytics";!function $9(){_t(new ut(kd,(t,{options:n})=>V9(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),_t(new ut("analytics-internal",function e(t){try{const n=t.getProvider(kd).getImmediate();return{logEvent:(r,i,o)=>function B9(e,t,n,r){e=He(e),function A9(e,t,n,r,i){return tv.apply(this,arguments)}(Yn,Kn[e.app.options.appId],t,n,r).catch(i=>Je.error(i))}(n,r,i,o)}}catch(n){throw Nt.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),be(Ox,"0.10.0"),be(Ox,"0.10.0","esm2017")}();class H9 extends vn{constructor(t,n){super()}schedule(t,n=0){return this}}const Rd={setInterval(e,t,...n){const{delegate:r}=Rd;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=Rd;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class Lx extends H9{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return Rd.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Rd.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Eo(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}const Vx={now:()=>(Vx.delegate||Date).now(),delegate:void 0};class hc{constructor(t,n=hc.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}hc.now=Vx.now;class Ux extends hc{constructor(t,n=hc.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const z9=new class G9 extends Ux{}(class W9 extends Lx{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}}),q9=new Ux(Lx),pc=new ka("7.6.1"),hv="__angularfire_symbol__analyticsIsSupportedValue",pv="__angularfire_symbol__analyticsIsSupported",gv="__angularfire_symbol__remoteConfigIsSupportedValue",mv="__angularfire_symbol__remoteConfigIsSupported",_v="__angularfire_symbol__messagingIsSupportedValue",yv="__angularfire_symbol__messagingIsSupported";function xd(e,t,n){if(t){if(1===t.length)return t[0];const o=t.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[pv]||(globalThis[pv]=j9().then(e=>globalThis[hv]=e).catch(()=>globalThis[hv]=!1)),globalThis[yv]||(globalThis[yv]=Dx().then(e=>globalThis[_v]=e).catch(()=>globalThis[_v]=!1)),globalThis[mv]||(globalThis[mv]=lK().then(e=>globalThis[gv]=e).catch(()=>globalThis[gv]=!1));const Pd=(e,t)=>{const n=t?[t]:SR(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function ws(){}class jx{constructor(t,n=z9){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{t.apply(this,[s])})},n,r)}}class Y9{constructor(t){this.zone=t,this.task=null}call(t,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws)),n.pipe(function K9(e,t,n){const r=Ce(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ur((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(or(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):hu}({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Od=(()=>{class e{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new jx(Zone.current)),this.insideAngular=n.run(()=>new jx(Zone.current,q9)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(n){return new(n||e)(q(fe))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function eo(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function to(e){return eo().ngZone.run(()=>e())}function Z9(e){return eo(),function X9(e){return function(n){return(n=n.lift(new Y9(e.ngZone))).pipe(_u(e.outsideAngular),mu(e.insideAngular))}}(eo())(e)}const J9=(e,t)=>function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),to(()=>e.apply(void 0,r))},Rt=(e,t)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(t&&(n||(n=to(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws)))),r[o]=J9(r[o],n));const i=function Q9(e){return eo().ngZone.runOutsideAngular(()=>e())}(()=>e.apply(this,r));if(!t){if(i instanceof rt){const o=eo();return i.pipe(_u(o.outsideAngular),mu(o.insideAngular))}return to(()=>i)}return i instanceof rt?i.pipe(Z9):i instanceof Promise?to(()=>new Promise((o,s)=>i.then(a=>to(()=>o(a)),a=>to(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:to(()=>i)};class no{constructor(t){return t}}class Fd{constructor(){return SR()}}const Ev=new N("angularfire2._apps"),tY={provide:no,useFactory:function eY(e){return e&&1===e.length?e[0]:new no(Dd())},deps:[[new Ze,Ev]]},nY={provide:Fd,deps:[[new Ze,Ev]]};function rY(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new no(r)}}let iY=(()=>{class e{constructor(n){be("angularfire",pc.full,"core"),be("angularfire",pc.full,"app"),be("angular",dS.full,n.toString())}}return e.\u0275fac=function(n){return new(n||e)(q(Xr))},e.\u0275mod=un({type:e}),e.\u0275inj=Yt({providers:[tY,nY]}),e})();function oY(e,...t){return{ngModule:iY,providers:[{provide:Ev,useFactory:rY(e),multi:!0,deps:[fe,Dt,Od,...t]}]}}const sY=Rt(TR,!0),Iv=new Map,Bx={activated:!1,tokenObservers:[]},aY={initialized:!1,enabled:!1};function Fe(e){return Iv.get(e)||Object.assign({},Bx)}function Ld(){return aY}const bv="https://content-firebaseappcheck.googleapis.com/v1",dY="exchangeDebugToken",$x={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class hY{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var n=this;return g(function*(){n.stop();try{n.pending=new Wi,yield function pY(e){return new Promise(t=>{setTimeout(t,e)})}(n.getNextRun(t)),n.pending.resolve(),yield n.pending.promise,n.pending=new Wi,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const dt=new zn("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Cv(e){if(!Fe(e).activated)throw dt.create("use-before-activation",{appName:e.name})}function jd(e,t){return Dv.apply(this,arguments)}function Dv(){return(Dv=g(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s,a;try{s=yield fetch(e,o)}catch(d){throw dt.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==s.status)throw dt.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(d){throw dt.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw dt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function Hx(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${bv}/projects/${n}/apps/${r}:${dY}?key=${i}`,body:{debug_token:t}}}const yY="firebase-app-check-database",vY=1,gc="firebase-app-check-store";let Bd=null;function Tv(){return(Tv=g(function*(e,t){const r=(yield function Gx(){return Bd||(Bd=new Promise((e,t)=>{try{const n=indexedDB.open(yY,vY);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(dt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(gc,{keyPath:"compositeKey"})}}catch(n){t(dt.create("storage-open",{originalErrorMessage:n?.message}))}}),Bd)}()).transaction(gc,"readwrite"),o=r.objectStore(gc).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(dt.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const mc=new Is("@firebase/app-check");function Mv(e,t){return Gi()?function IY(e,t){return function zx(e,t){return Tv.apply(this,arguments)}(function Kx(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(n=>{mc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Nv(){return Ld().enabled}function Rv(){return xv.apply(this,arguments)}function xv(){return(xv=g(function*(){const e=Ld();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const SY={error:"UNKNOWN_ERROR"};function AY(e){return gd.encodeString(JSON.stringify(e),!1)}function $d(e){return Pv.apply(this,arguments)}function Pv(){return(Pv=g(function*(e,t=!1){const n=e.app;Cv(n);const r=Fe(n);let o,i=r.token;if(i&&!Ds(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(Ds(c)?i=c:yield Mv(n,void 0))}if(!t&&i&&Ds(i))return{token:i.token};let a,s=!1;if(Nv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jd(Hx(n,yield Rv()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const c=yield r.exchangeTokenPromise;return yield Mv(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Fe(n).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?mc.warn(c.message):mc.error(c),o=c}return i?o?a=Ds(i)?{token:i.token,internalError:o}:Xx(o):(a={token:i.token},r.token=i,yield Mv(n,i)):a=Xx(o),s&&function Zx(e,t){const n=Fe(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(n,a),a})).apply(this,arguments)}function Yx(e){return Ov.apply(this,arguments)}function Ov(){return(Ov=g(function*(e){const t=e.app;Cv(t);const{provider:n}=Fe(t);if(Nv()){const r=yield Rv(),{token:i}=yield jd(Hx(t,r),e.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function Lv(e,t){const n=Fe(e),r=n.tokenObservers.filter(i=>i.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Qx(e){const{app:t}=e,n=Fe(t);let r=n.tokenRefresher;r||(r=function MY(e){const{app:t}=e;return new hY(g(function*(){let r;if(r=Fe(t).token?yield $d(e,!0):yield $d(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=Fe(t);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},$x.RETRIAL_MIN_WAIT,$x.RETRIAL_MAX_WAIT)}(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ds(e){return e.expireTimeMillis-Date.now()>0}function Xx(e){return{token:AY(SY),error:e}}class kY{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Fe(this.app);for(const n of t)Lv(this.app,n.next);return Promise.resolve()}}const sP="app-check-internal";!function WY(){_t(new ut("app-check",e=>function NY(e,t){return new kY(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(sP).initialize()})),_t(new ut(sP,e=>function RY(e){return{getToken:t=>$d(e,t),getLimitedUseToken:()=>Yx(e),addTokenListener:t=>function Fv(e,t,n,r){const{app:i}=e,o=Fe(i);if(o.tokenObservers=[...o.tokenObservers,{next:n,error:r,type:t}],o.token&&Ds(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),Qx(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Qx(e))}(e,"INTERNAL",t),removeTokenListener:t=>Lv(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),be("@firebase/app-check","0.8.0")}();class Wd{constructor(){return Pd("app-check")}}typeof window<"u"&&window;const YY=function cP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},uP=new zn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gd=new Is("@firebase/auth");function zd(e,...t){Gd.logLevel<=le.ERROR&&Gd.error(`Auth (${ci}): ${e}`,...t)}function Wt(e,...t){throw $v(e,...t)}function nn(e,...t){return $v(e,...t)}function lP(e,t,n){const r=Object.assign(Object.assign({},YY()),{[t]:n});return new zn("auth","Firebase",r).create(t,{appName:e.name})}function $v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return uP.create(e,...t)}function S(e,t,...n){if(!e)throw $v(t,...n)}function Qn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zd(t),new Error(t)}function Sr(e,t){e||Qn(t)}function _c(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dP(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class yc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Sr(n>t,"Short delay should be less than long delay!"),this.isMobile=s_()||_R()}get(){return function ZY(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Hv(){return"http:"===dP()||"https:"===dP()}()||a_()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wv(e,t){Sr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class fP{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const JY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},eQ=new yc(3e4,6e4);function ke(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Le(e,t,n,r){return Gv.apply(this,arguments)}function Gv(){return(Gv=g(function*(e,t,n,r,i={}){return hP(e,i,g(function*(){let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const a=vs(Object.assign({key:e.config.apiKey},s)).slice(1),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),fP.fetch()(pP(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function hP(e,t,n){return zv.apply(this,arguments)}function zv(){return(zv=g(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},JY),t);try{const i=new tQ(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw vc(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw vc(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw vc(e,"email-already-in-use",s);if("USER_DISABLED"===c)throw vc(e,"user-disabled",s);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lP(e,l,u);Wt(e,l)}}catch(i){if(i instanceof mn)throw i;Wt(e,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function qv(){return(qv=g(function*(e,t,n,r,i={}){const o=yield Le(e,t,n,r,i);return"mfaPendingCredential"in o&&Wt(e,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function pP(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Wv(e.config,i):`${e.config.apiScheme}://${i}`}class tQ{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nn(this.auth,"network-request-failed")),eQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vc(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nn(e,t,r);return i.customData._tokenResponse=n,i}function Kv(){return(Kv=g(function*(e,t){return Le(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function Qv(){return(Qv=g(function*(e,t){return Le(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Ec(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Zv(){return(Zv=g(function*(e,t=!1){const n=He(e),r=yield n.getIdToken(t),i=qd(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ec(Xv(i.auth_time)),issuedAtTime:Ec(Xv(i.iat)),expirationTime:Ec(Xv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function Xv(e){return 1e3*Number(e)}function qd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return zd("JWT malformed, contained fewer than 3 sections"),null;try{const i=_d(n);return i?JSON.parse(i):(zd("Failed to decode base64 JWT payload"),null)}catch(i){return zd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mr(e,t){return Jv.apply(this,arguments)}function Jv(){return(Jv=g(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof mn&&function aQ({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}class cQ{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(g(function*(){yield n.iteration()}),r)}iteration(){var t=this;return g(function*(){try{yield t.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&t.schedule(!0))}t.schedule()})()}}class gP{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ic(e){return eE.apply(this,arguments)}function eE(){return eE=g(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Mr(e,function iQ(e,t){return Qv.apply(this,arguments)}(n,{idToken:r}));S(i?.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?function dQ(e){return e.map(t=>{var{providerId:n}=t,r=gu(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function lQ(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}(e.providerData,s),l=!!e.isAnonymous&&!(e.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new gP(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,d)}),eE.apply(this,arguments)}function tE(){return(tE=g(function*(e){const t=He(e);yield Ic(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function nE(){return(nE=g(function*(e,t){const n=yield hP(e,{},g(function*(){const r=vs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=pP(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fP.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){S(t.idToken,"internal-error"),S(typeof t.idToken<"u","internal-error"),S(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):function sQ(e){const t=qd(e);return S(t,"internal-error"),S(typeof t.exp<"u","internal-error"),S(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}getToken(t){var n=this;return g(function*(r,i=!1){return S(!n.accessToken||n.refreshToken,r,"user-token-expired"),i||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null:n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(t,n){var r=this;return g(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function fQ(e,t){return nE.apply(this,arguments)}(t,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new bc;return r&&(S("string"==typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(S("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),o&&(S("number"==typeof o,"internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bc,this.toJSON())}_performRefresh(){return Qn("not implemented")}}function li(e,t){S("string"==typeof e||typeof e>"u","internal-error",{appName:t})}class ro{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=gu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gP(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){var n=this;return g(function*(){const r=yield Mr(n,n.stsTokenManager.getToken(n.auth,t));return S(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(t){return function oQ(e){return Zv.apply(this,arguments)}(this,t)}reload(){return function uQ(e){return tE.apply(this,arguments)}(this)}_assign(t){this!==t&&(S(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new ro(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t){var n=this;return g(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Ic(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var t=this;return g(function*(){const n=yield t.getIdToken();return yield Mr(t,function nQ(e,t){return Kv.apply(this,arguments)}(t.auth,{idToken:n})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,u,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,m=null!==(a=n.tenantId)&&void 0!==a?a:void 0,y=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,v=null!==(u=n.createdAt)&&void 0!==u?u:void 0,_=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:I,emailVerified:D,isAnonymous:k,providerData:re,stsTokenManager:Qe}=n;S(I&&Qe,t,"internal-error");const vt=bc.fromJSON(this.name,Qe);S("string"==typeof I,t,"internal-error"),li(d,t.name),li(f,t.name),S("boolean"==typeof D,t,"internal-error"),S("boolean"==typeof k,t,"internal-error"),li(h,t.name),li(p,t.name),li(m,t.name),li(y,t.name),li(v,t.name),li(_,t.name);const sn=new ro({uid:I,auth:t,email:f,emailVerified:D,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:vt,createdAt:v,lastLoginAt:_});return re&&Array.isArray(re)&&(sn.providerData=re.map(Zs=>Object.assign({},Zs))),y&&(sn._redirectEventId=y),sn}static _fromIdTokenResponse(t,n){return g(function*(r,i,o=!1){const s=new bc;s.updateFromServerResponse(i);const a=new ro({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Ic(a),a}).apply(this,arguments)}}const mP=new Map;function kr(e){Sr(e instanceof Function,"Expected a class definition");let t=mP.get(e);return t?(Sr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mP.set(e,t),t)}const _P=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(n,r){var i=this;return g(function*(){i.storage[n]=r})()}_get(n){var r=this;return g(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return g(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})();function Kd(e,t,n){return`firebase:${e}:${t}:${n}`}class Ss{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Kd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Kd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return g(function*(){const n=yield t.persistence._get(t.fullUserKey);return n?ro._fromJSON(t.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var n=this;return g(function*(){if(n.persistence===t)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=t,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n){return g(function*(r,i,o="authUser"){if(!i.length)return new Ss(kr(_P),r,o);const s=(yield Promise.all(i.map(function(){var d=g(function*(f){if(yield f._isAvailable())return f});return function(f){return d.apply(this,arguments)}}()))).filter(d=>d);let a=s[0]||kr(_P);const c=Kd(o,r.config.apiKey,r.name);let u=null;for(const d of i)try{const f=yield d._get(c);if(f){const h=ro._fromJSON(r,f);d!==a&&(u=h),a=d;break}}catch{}const l=s.filter(d=>d._shouldAllowMigration);return a._shouldAllowMigration&&l.length?(a=l[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var d=g(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return d.apply(this,arguments)}}())),new Ss(a,r,o)):new Ss(a,r,o)}).apply(this,arguments)}}function yP(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(IP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CP(t))return"Blackberry";if(wP(t))return"Webos";if(rE(t))return"Safari";if((t.includes("chrome/")||EP(t))&&!t.includes("edge/"))return"Chrome";if(bP(t))return"Android";{const r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function vP(e=Xe()){return/firefox\//i.test(e)}function rE(e=Xe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function EP(e=Xe()){return/crios\//i.test(e)}function IP(e=Xe()){return/iemobile/i.test(e)}function bP(e=Xe()){return/android/i.test(e)}function CP(e=Xe()){return/blackberry/i.test(e)}function wP(e=Xe()){return/webos/i.test(e)}function Yd(e=Xe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function DP(e=Xe()){return Yd(e)||bP(e)||wP(e)||CP(e)||/windows phone/i.test(e)||IP(e)}function TP(e,t=[]){let n;switch(e){case"Browser":n=yP(Xe());break;case"Worker":n=`${yP(Xe())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ci}/${r}`}function SP(e,t){return oE.apply(this,arguments)}function oE(){return(oE=g(function*(e,t){return Le(e,"GET","/v2/recaptchaConfig",ke(e,t))})).apply(this,arguments)}function MP(e){return void 0!==e&&void 0!==e.enterprise}class kP{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function sE(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=nn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function _Q(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function NP(e){return`__${e}${Math.floor(1e6*Math.random())}`}class RP{constructor(t){this.type="recaptcha-enterprise",this.auth=et(t)}verify(){var t=this;return g(function*(n="verify",r=!1){function o(){return o=g(function*(a){if(!r){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=g(function*(u,l){SP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const f=new kP(d);return null==a.tenantId?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,u(f.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(u,l){return c.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,c,u){const l=window.grecaptcha;MP(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:n}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return o.apply(this,arguments)})(t.auth).then(u=>{if(!r&&MP(window.grecaptcha))s(u,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));sE("https://www.google.com/recaptcha/enterprise.js?render="+u).then(()=>{s(u,a,c)}).catch(l=>{c(l)})}}).catch(u=>{c(u)})})}).apply(this,arguments)}}class IQ{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{s(t(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){var n=this;return g(function*(){if(n.auth.currentUser===t)return;const r=[];try{for(const i of n.queue)yield i(t),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class bQ{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xP(this),this.idTokenSubscription=new xP(this),this.beforeStateQueue=new IQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){var r=this;return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(g(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Ss.create(r,t),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return g(function*(){if(t._deleted)return;const n=yield t.assertedPersistence.getCurrentUser();if(t.currentUser||n){if(t.currentUser&&n&&t.currentUser.uid===n.uid)return t._currentUser._assign(n),void(yield t.currentUser.getIdToken());yield t._updateCurrentUser(n,!0)}})()}initializeCurrentUser(t){var n=this;return g(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(t&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(t);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return S(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(t){var n=this;return g(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,t,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(t){var n=this;return g(function*(){try{yield Ic(t)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function XY(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var t=this;return g(function*(){t._deleted=!0})()}updateCurrentUser(t){var n=this;return g(function*(){const r=t?He(t):null;return r&&S(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(t){var n=this;return g(function*(r,i=!1){if(!n._deleted)return r&&S(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(g(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var t=this;return g(function*(){return yield t.beforeStateQueue.runMiddleware(null),(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null,!0)})()}setPersistence(t){var n=this;return this.queue(g(function*(){yield n.assertedPersistence.setPersistence(kr(t))}))}initializeRecaptchaConfig(){var t=this;return g(function*(){const n=yield SP(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new kP(n);null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.emailPasswordEnabled&&new RP(t).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new zn("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,n){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===t?i.removeCurrentUser():i.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var n=this;return g(function*(){if(!n.redirectPersistenceManager){const r=t&&kr(t)||n._popupRedirectResolver;S(r,n,"argument-error"),n.redirectPersistenceManager=yield Ss.create(n,[kr(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(t){var n=this;return g(function*(){var r,i;return n._isInitialized&&(yield n.queue(g(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===t?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?n.redirectUser:null})()}_persistUserIfCurrent(t){var n=this;return g(function*(){if(t===n.currentUser)return n.queue(g(function*(){return n.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),s=this._isInitialized?Promise.resolve():this._initializationPromise;return S(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof n?t.addObserver(n,r,i):t.addObserver(n)}directlySetCurrentUser(t){var n=this;return g(function*(){n.currentUser&&n.currentUser!==t&&n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh(),n.currentUser=t,t?yield n.assertedPersistence.setCurrentUser(t):yield n.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=TP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return g(function*(){var n;const r={"X-Client-Version":t.clientVersion};t.app.options.appId&&(r["X-Firebase-gmpid"]=t.app.options.appId);const i=yield null===(n=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield t._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var t=this;return g(function*(){var n;const r=yield null===(n=t.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function QY(e,...t){Gd.logLevel<=le.WARN&&Gd.warn(`Auth (${ci}): ${e}`,...t)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function et(e){return He(e)}class xP{constructor(t){this.auth=t,this.observer=null,this.addObserver=function S6(e,t){const n=new A6(e,t);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function PP(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function OP(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Cc{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(t){return Qn("not implemented")}_linkToIdToken(t,n){return Qn("not implemented")}_getReauthenticationResolver(t){return Qn("not implemented")}}function Nr(e,t){return CE.apply(this,arguments)}function CE(){return(CE=g(function*(e,t){return function Ar(e,t,n,r){return qv.apply(this,arguments)}(e,"POST","/v1/accounts:signInWithIdp",ke(e,t))})).apply(this,arguments)}class As extends Cc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new As(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Wt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=gu(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new As(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){return Nr(t,this.buildRequest())}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Nr(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Nr(t,n)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=vs(n)}return t}}class Rr{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class UP extends Rr{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}let BQ=(()=>{class e extends UP{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return As._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return e.credentialFromTaggedObject(n)}static credentialFromError(n){return e.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})();class _n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r){return g(function*(i,o,s,a=!1){const c=yield ro._fromIdTokenResponse(i,s,a),u=jP(s);return new _n({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(t,n,r){return g(function*(){yield t._updateTokensIfNecessary(r,!0);const i=jP(r);return new _n({user:t,providerId:i,_tokenResponse:r,operationType:n})})()}}function jP(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ef extends mn{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new ef(t,n,r,i)}}function BP(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?ef._fromErrorAndOperation(e,o,t,r):o})}function xE(){return(xE=g(function*(e,t,n=!1){const r=yield Mr(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return _n._forOperation(e,"link",r)})).apply(this,arguments)}function OE(){return(OE=g(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const o=yield Mr(e,BP(r,i,t,e),n);S(o.idToken,r,"internal-error");const s=qd(o.idToken);S(s,r,"internal-error");const{sub:a}=s;return S(e.uid===a,r,"user-mismatch"),_n._forOperation(e,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Wt(r,"user-mismatch"),o}})).apply(this,arguments)}function FE(){return(FE=g(function*(e,t,n=!1){const r="signIn",i=yield BP(e,r,t),o=yield _n._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})).apply(this,arguments)}const nf="__sak";class qP{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const lZ=(()=>{class e extends qP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function aZ(){const e=Xe();return rE(e)||Yd(e)}()&&function gQ(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=DP(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function pQ(){return function E6(){const e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return g(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return g(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return e.type="LOCAL",e})(),KP=(()=>{class e extends qP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})();let fZ=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return g(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var d=g(function*(f){return f(i.origin,a)});return function(f){return d.apply(this,arguments)}}()),l=yield function dZ(e){return Promise.all(e.map(function(){var t=g(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return t.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function rf(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class hZ{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n){var r=this;return g(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((l,d)=>{const f=rf("",20);a.port1.start();const h=setTimeout(()=>{d(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(p){const m=p;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(h),c=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),l(m.data.response);break;default:clearTimeout(h),clearTimeout(c),d(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function We(){return window}function lI(){return typeof We().WorkerGlobalScope<"u"&&"function"==typeof We().importScripts}function dI(){return(dI=g(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const YP="firebaseLocalStorageDb",of="firebaseLocalStorage",QP="fbase_key";class Sc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(e,t){return e.transaction([of],t?"readwrite":"readonly").objectStore(of)}function fI(){const e=indexedDB.open(YP,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(of,{keyPath:QP})}catch(i){n(i)}}),e.addEventListener("success",g(function*(){const r=e.result;r.objectStoreNames.contains(of)?t(r):(r.close(),yield function vZ(){const e=indexedDB.deleteDatabase(YP);return new Sc(e).toPromise()}(),t(yield fI()))}))})}function ZP(e,t,n){return hI.apply(this,arguments)}function hI(){return(hI=g(function*(e,t,n){const r=sf(e,!0).put({[QP]:t,value:n});return new Sc(r).toPromise()})).apply(this,arguments)}function pI(){return(pI=g(function*(e,t){const n=sf(e,!1).get(t),r=yield new Sc(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function XP(e,t){const n=sf(e,!0).delete(t);return new Sc(n).toPromise()}const CZ=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return g(function*(){return n.db||(n.db=yield fI()),n.db})()}_withRetries(n){var r=this;return g(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return g(function*(){return lI()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return g(function*(){n.receiver=fZ._getInstance(function _Z(){return lI()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=g(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=g(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return g(function*(){var r,i;if(n.activeServiceWorker=yield function gZ(){return dI.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new hZ(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function mZ(){var e;return(null===(e=navigator?.serviceWorker)||void 0===e?void 0:e.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const n=yield fI();return yield ZP(n,nf,"1"),yield XP(n,nf),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return g(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(o=>ZP(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return g(function*(){const i=yield r._withRetries(o=>function EZ(e,t){return pI.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>XP(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return g(function*(){const r=yield n._withRetries(s=>{const a=sf(s,!1).getAll();return new Sc(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function oo(e,t){return t?kr(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}NP("rcb"),new yc(3e4,6e4);class CI extends Cc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Nr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Nr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Nr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function UZ(e){return function WP(e,t){return FE.apply(this,arguments)}(e.auth,new CI(e),e.bypassAuthState)}function jZ(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),function HP(e,t){return OE.apply(this,arguments)}(n,new CI(e),e.bypassAuthState)}function BZ(e){return wI.apply(this,arguments)}function wI(){return(wI=g(function*(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),function RE(e,t){return xE.apply(this,arguments)}(n,new CI(e),e.bypassAuthState)})).apply(this,arguments)}class eO{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var t=this;return new Promise(function(){var n=g(function*(r,i){t.pendingPromise={resolve:r,reject:i};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(o){t.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(t){var n=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=t;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(l){n.reject(l)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UZ;case"linkViaPopup":case"linkViaRedirect":return BZ;case"reauthViaPopup":case"reauthViaRedirect":return jZ;default:Wt(this.auth,"internal-error")}}resolve(t){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $Z=new yc(2e3,1e4);function HZ(e,t,n){return DI.apply(this,arguments)}function DI(){return(DI=g(function*(e,t,n){const r=et(e);!function Ts(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Wt(e,"argument-error"),lP(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,Rr);const i=oo(r,n);return new AI(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}let AI=(()=>{class e extends eO{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var n=this;return g(function*(){const r=yield n.execute();return S(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return g(function*(){Sr(1===n.filter.length,"Popup operations only handle one event");const r=rf();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(nn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(nn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,$Z.get())};n()}}return e.currentPopupAction=null,e})();const WZ="pendingRedirect",Ac=new Map;class GZ extends eO{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var t=()=>super.execute,n=this;return g(function*(){let r=Ac.get(n.auth._key());if(!r){try{const o=(yield function zZ(e,t){return MI.apply(this,arguments)}(n.resolver,n.auth))?yield t().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Ac.set(n.auth._key(),r)}return n.bypassAuthState||Ac.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(t){var n=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===t.type)return n().call(r,t);if("unknown"!==t.type){if(t.eventId){const i=yield r.auth._redirectUserForId(t.eventId);if(i)return r.user=i,n().call(r,t);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function MI(){return(MI=g(function*(e,t){const n=function nO(e){return Kd(WZ,e.config.apiKey,e.name)}(t),r=function tO(e){return kr(e._redirectPersistence)}(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function qZ(e,t){Ac.set(e._key(),t)}function rO(e,t){return FI.apply(this,arguments)}function FI(){return(FI=g(function*(e,t,n=!1){const r=et(e),i=oo(r,t),s=yield new GZ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}class XZ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function JZ(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sO(e);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!sO(t)){const i=(null===(r=t.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(nn(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=null===n.eventId||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oO(t))}saveEventToCache(t){this.cachedEventUids.add(oO(t)),this.lastProcessedEventTime=Date.now()}}function oO(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function sO({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}function VI(){return(VI=g(function*(e,t={}){return Le(e,"GET","/v1/projects",t)})).apply(this,arguments)}const tX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nX=/^https?/;function UI(){return UI=g(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield function eX(e){return VI.apply(this,arguments)}(e);for(const n of t)try{if(iX(n))return}catch{}Wt(e,"unauthorized-domain")}),UI.apply(this,arguments)}function iX(e){const t=_c(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!nX.test(n))return!1;if(tX.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const oX=new yc(3e4,6e4);function aO(){const e=We().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let cf=null;const cX=new yc(5e3,15e3),uX="__/auth/iframe",lX="emulator/auth/iframe",dX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hX(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wv(t,lX):`https://${e.config.authDomain}/${uX}`,r={apiKey:t.apiKey,appName:e.name,v:ci},i=fX.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${vs(r).slice(1)}`}function jI(){return jI=g(function*(e){const t=yield function aX(e){return cf=cf||function sX(e){return new Promise((t,n)=>{var r,i,o;function s(){aO(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{aO(),n(nn(e,"network-request-failed"))},timeout:oX.get()})}if(null!==(i=null===(r=We().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)t(gapi.iframes.getContext());else{if(null===(o=We().gapi)||void 0===o||!o.load){const a=NP("iframefcb");return We()[a]=()=>{gapi.load?s():n(nn(e,"network-request-failed"))},sE(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}s()}}).catch(t=>{throw cf=null,t})}(e),cf}(e),n=We().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:hX(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dX,dontclear:!0},r=>new Promise(function(){var i=g(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=nn(e,"network-request-failed"),c=We().setTimeout(()=>{s(a)},cX.get());function u(){We().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),jI.apply(this,arguments)}const gX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cO{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const bX="__/auth/handler",CX="emulator/auth/handler",wX=encodeURIComponent("fac");function uO(e,t,n,r,i,o){return BI.apply(this,arguments)}function BI(){return(BI=g(function*(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ci,eventId:i};if(t instanceof Rr){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",u_(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(t instanceof UP){const l=t.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=yield e._getAppCheckToken(),u=c?`#${wX}=${encodeURIComponent(c)}`:"";return`${function DX({config:e}){return e.emulator?Wv(e,CX):`https://${e.authDomain}/${bX}`}(e)}?${vs(a).slice(1)}${u}`})).apply(this,arguments)}const $I="webStorageSupport",SX=class TX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KP,this._completeRedirectFn=rO,this._overrideRedirectResult=qZ}_openPopup(t,n,r,i){var o=this;return g(function*(){var s;Sr(null===(s=o.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield uO(t,n,r,_c(),i);return function EX(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},gX),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Xe().toLowerCase();n&&(a=EP(u)?"_blank":n),vP(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(function hQ(e=Xe()){var t;return Yd(e)&&!(null===(t=window.navigator)||void 0===t||!t.standalone)}(u)&&"_self"!==a)return function IX(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new cO(null);const d=window.open(t||"",a,l);S(d,e,"popup-blocked");try{d.focus()}catch{}return new cO(d)}(t,a,rf())})()}_openRedirect(t,n,r,i){var o=this;return g(function*(){return yield o._originValidation(t),function pZ(e){We().location.href=e}(yield uO(t,n,r,_c(),i)),new Promise(()=>{})})()}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Sr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){var n=this;return g(function*(){const r=yield function pX(e){return jI.apply(this,arguments)}(t),i=new XZ(t);return r.register("authEvent",o=>(S(o?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:i},n.iframes[t._key()]=r,i})()}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($I,{type:$I},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[$I];void 0!==s&&n(!!s),Wt(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function rX(e){return UI.apply(this,arguments)}(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return DP()||rE()||Yd()}};var hO="@firebase/auth";class AX{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var n=this;return g(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const RX=pR("authIdTokenMaxAge")||300;let gO=null;const xX=e=>function(){var t=g(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>RX)return;const o=r?.token;gO!==o&&(gO=o,yield fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return t.apply(this,arguments)}}();function PX(e=Dd()){const t=Yi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function CQ(e,t){const n=Yi(e,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Id(n.getOptions(),t??{}))return i;Wt(i,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:SX,persistence:[CZ,lZ,KP]}),r=pR("authTokenSyncURL");if(r){const o=xX(r);(function nZ(e,t,n){He(e).beforeAuthStateChanged(t,n)})(n,o,()=>o(n.currentUser)),function tZ(e,t,n,r){He(e).onIdTokenChanged(t,n,r)}(n,s=>o(s))}const i=dR("auth");return i&&function DQ(e,t,n){const r=et(e);S(r._canInitEmulator,r,"emulator-config-failed"),S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=PP(t),{host:s,port:a}=function TQ(e){const t=PP(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:OP(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:OP(s)}}}(t);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function SQ(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${i}`),n}!function kX(e){_t(new ut("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;S(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TP(e)},u=new bQ(r,i,o,c);return function wQ(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),_t(new ut("auth-internal",t=>{const n=et(t.getProvider("auth").getImmediate());return new AX(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(hO,"0.23.2",function MX(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),be(hO,"0.23.2","esm2017")}("Browser");class lf{constructor(t){return t}}class WI{constructor(){return Pd("auth")}}const GI=new N("angularfire2.auth-instances");function FX(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new lf(r)}}const LX={provide:WI,deps:[[new Ze,GI]]},VX={provide:lf,useFactory:function OX(e,t){const n=xd("auth",e,t);return n&&new lf(n)},deps:[[new Ze,GI],no]};let UX=(()=>{class e{constructor(){be("angularfire",pc.full,"auth")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=un({type:e}),e.\u0275inj=Yt({providers:[VX,LX]}),e})();function jX(e,...t){return{ngModule:UX,providers:[{provide:GI,useFactory:FX(e),multi:!0,deps:[fe,Dt,Od,Fd,[new Ze,Wd],...t]}]}}const BX=Rt(PX,!0),$X=Rt(HZ,!0),_O="@firebase/database";let zI="";class WX{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){null==n?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ye(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return null==n?null:lc(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class GX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){null==n?delete this.cache_[t]:this.cache_[t]=n}get(t){return qn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const vO=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new WX(t)}}catch{}return new GX},so=vO("localStorage"),qI=vO("sessionStorage"),Ns=new Is("@firebase/database"),EO=function(){let e=1;return function(){return e++}}(),IO=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,w(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new T6;n.update(t);const r=n.digest();return gd.encodeByteArray(r)},Mc=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Mc.apply(null,r):t+="object"==typeof r?Ye(r):r,t+=" "}return t};let ao=null,bO=!0;const tt=function(...e){if(!0===bO&&(bO=!1,null===ao&&!0===qI.get("logging_enabled")&&function(e,t){w(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ns.logLevel=le.VERBOSE,ao=Ns.log.bind(Ns),t&&qI.set("logging_enabled",!0)):"function"==typeof e?ao=e:(ao=null,qI.remove("logging_enabled"))}(!0)),ao){const t=Mc.apply(null,e);ao(t)}},kc=function(e){return function(...t){tt(e,...t)}},KI=function(...e){const t="FIREBASE INTERNAL ERROR: "+Mc(...e);Ns.error(t)},Zn=function(...e){const t=`FIREBASE FATAL ERROR: ${Mc(...e)}`;throw Ns.error(t),new Error(t)},yt=function(...e){const t="FIREBASE WARNING: "+Mc(...e);Ns.warn(t)},df=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},fi="[MIN_NAME]",xr="[MAX_NAME]",co=function(e,t){if(e===t)return 0;if(e===fi||t===xr)return-1;if(t===fi||e===xr)return 1;{const n=TO(e),r=TO(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},KX=function(e,t){return e===t?0:e<t?-1:1},Nc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ye(t))},YI=function(e){if("object"!=typeof e||null===e)return Ye(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ye(t[r]),n+=":",n+=YI(e[t[r]]);return n+="}",n},wO=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function nt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const DO=function(e){w(!df(e),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===e?(o=0,s=0,i=1/e==-1/0?1:0):(i=e<0,(e=Math.abs(e))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(e/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const l=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(l.substr(c,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()},XX=new RegExp("^-?(0*)\\d{1,10}$"),TO=function(e){if(XX.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Rs=function(e){try{e()}catch(t){setTimeout(()=>{throw yt("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Rc=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class nJ{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){yt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class rJ{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&"auth/token-not-initialized"===n.code?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yt(t)}}let xc=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const NO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PO="websocket",OO="long_polling";class ZI{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=so.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&so.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function FO(e,t,n){let r;if(w("string"==typeof t,"typeof type must == string"),w("object"==typeof n,"typeof params must == object"),t===PO)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==OO)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function iJ(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return nt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class oJ{constructor(){this.counters_={}}incrementCounter(t,n=1){qn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return p6(this.counters_)}}const XI={},JI={};function eb(e){const t=e.toString();return XI[t]||(XI[t]=new oJ),XI[t]}class aJ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Rs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hi{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kc(t),this.stats_=eb(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),FO(n,OO,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new aJ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tb((...o)=>{const[s,a,c,u,l]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&NO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hi.forceAllow_=!0}static forceDisallow(){hi.forceDisallow_=!0}static isAvailable(){return!(!hi.forceAllow_&&(hi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ye(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=uR(n),i=wO(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ye(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tb{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=tb.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){tt("frame writing exception"),a.stack&&tt(a.stack),tt(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||tt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{tt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hf=null;typeof MozWebSocket<"u"?hf=MozWebSocket:typeof WebSocket<"u"&&(hf=WebSocket);let xs=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kc(this.connId),this.stats_=eb(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&NO.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),FO(n,PO,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,so.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new hf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==hf&&!e.forceDisallow_}static previouslyFailed(){return so.isInMemoryStorage||!0===so.get("previous_websocket_failure")}markConnectionHealthy(){so.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=lc(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(w(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Ye(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=wO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),HO=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[hi,xs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=xs&&xs.isAvailable();let i=r&&!xs.previouslyFailed();if(n.webSocketOnly&&(r||yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xs];else{const o=this.transports_=[];for(const s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class QO{constructor(t,n,r,i,o,s,a,c,u,l){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kc("c:"+this.id+":"),this.transportManager_=new HO(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Rc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const n=t.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Nc("t",t),r=Nc("d",t);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Nc("t",t),r=Nc("d",t);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Nc("t",t);if("d"in t){const r=t.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?KI("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KI("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Rc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(so.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ZO{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}class XO{constructor(t){this.allowedEvents_=t,this.listeners_={},w(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){w(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class pf extends XO{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!s_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pf}getInitialEvent(t){return w("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class oe{constructor(t,n){if(void 0===n){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(t+="/"+this.pieces_[n]);return t||"/"}}function ee(){return new oe("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pi(e){return e.pieces_.length-e.pieceNum_}function pe(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new oe(e.pieces_,t)}function rb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Pc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function t1(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new oe(t,0)}function Se(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof oe)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new oe(n,0)}function H(e){return e.pieceNum_>=e.pieces_.length}function xt(e,t){const n=$(e),r=$(t);if(null===n)return t;if(n===r)return xt(pe(e),pe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ib(e,t){if(pi(e)!==pi(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function yn(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(pi(e)>pi(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class kJ{constructor(t,n){this.errorPrefix_=n,this.parts_=Pc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bd(this.parts_[r]);n1(this)}}function n1(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+uo(e))}function uo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ob extends XO{constructor(){let t,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ob}getInitialEvent(t){return w("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Oc=1e3;let mf,lo=(()=>{class e extends ZO{constructor(n,r,i,o,s,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=e.nextPersistentConnectionId_++,this.log_=kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ob.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&pf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Ye(s)),w(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new Wi,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),w(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,c=>{const u=c.d,l=c.s;e.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),"ok"!==l&&this.removeListen_(i,o),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&qn(n,"w")){const i=ys(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(e){const t=vd(e).claims;return"object"==typeof t&&!0===t.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(e){const n=vd(e).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ye(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):KI("Unrecognized action received from server: "+Ye(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){w(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return g(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+e.nextConnectionId_++,a=n.lastSessionId;let c=!1,u=null;const l=function(){u?u.close():(c=!0,o())};n.realtime_={close:l,sendRequest:function(h){w(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(h)}};const f=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[h,p]=yield Promise.all([n.authTokenProvider_.getToken(f),n.appCheckTokenProvider_.getToken(f)]);c?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),n.authToken_=h&&h.accessToken,n.appCheckToken_=p&&p.token,u=new QO(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,m=>{yt(m+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(h){n.log_("Failed to get token: "+h),c||(n.repoInfo_.nodeAdmin&&yt(h),l())}}})()}interrupt(n){tt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){tt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],u_(this.interruptReasons_)&&(this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>YI(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new oe(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){tt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){tt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+zI.replace(/\./g,"-")]=1,s_()?n["framework.cordova"]=1:_R()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=pf.getInstance().currentlyOnline();return u_(this.interruptReasons_)&&n}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class W{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new W(t,n)}}class gf{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new W(fi,t),i=new W(fi,n);return 0!==this.compare(r,i)}minPost(){return W.MIN}}class o1 extends gf{static get __EMPTY_NODE(){return mf}static set __EMPTY_NODE(t){mf=t}compare(t,n){return co(t.name,n.name)}isDefinedOn(t){throw _s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return W.MIN}maxPost(){return new W(xr,mf)}makePost(t,n){return w("string"==typeof t,"KeyIndex indexValue must always be a string."),new W(t,mf)}toString(){return".key"}}const Xn=new o1;class _f{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,t=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let ab,An=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Gt.EMPTY_NODE,this.right=s??Gt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Gt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class Gt{constructor(t,n=Gt.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Gt(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,An.BLACK,null,null))}remove(t){return new Gt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,An.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new _f(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new _f(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new _f(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new _f(this.root_,null,this.comparator_,!0,t)}}function VJ(e,t){return co(e.name,t.name)}function sb(e,t){return co(e,t)}Gt.EMPTY_NODE=new class LJ{copy(t,n,r,i,o){return this}insert(t,n,r){return new An(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const s1=function(e){return"number"==typeof e?"number:"+DO(e):"string:"+e},a1=function(e){if(e.isLeafNode()){const t=e.val();w("string"==typeof t||"number"==typeof t||"object"==typeof t&&qn(t,".sv"),"Priority must be a string or number.")}else w(e===ab||e.isEmpty(),"priority of unexpected type.");w(e===ab||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let c1,u1,l1,Ps=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,w(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),a1(this.priorityNode_)}static set __childrenNodeConstructor(n){c1=n}static get __childrenNodeConstructor(){return c1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return H(n)?this:".priority"===$(n)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=$(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(w(".priority"!==i||1===pi(n),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+s1(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?DO(this.value_):this.value_,this.lazyHash_=IO(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(w(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return w(o>=0,"Unknown leaf type: "+r),w(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const Ee=new class $J extends gf{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?co(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(xr,new Ps("[PRIORITY-POST]",l1))}makePost(t,n){const r=u1(t);return new W(n,new Ps("[PRIORITY-POST]",r))}toString(){return".priority"}},HJ=Math.log(2);class WJ{constructor(t){this.count=parseInt(Math.log(t+1)/HJ,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const yf=function(e,t,n,r){e.sort(t);const i=function(c,u){const l=u-c;let d,f;if(0===l)return null;if(1===l)return d=e[c],f=n?n(d):d,new An(f,d.node,An.BLACK,null,null);{const h=parseInt(l/2,10)+c,p=i(c,h),m=i(h+1,u);return d=e[h],f=n?n(d):d,new An(f,d.node,An.BLACK,p,m)}},a=function(c){let u=null,l=null,d=e.length;const f=function(p,m){const y=d-p,v=d;d-=p;const _=i(y+1,v),I=e[y],D=n?n(I):I;h(new An(D,I.node,m,null,_))},h=function(p){u?(u.left=p,u=p):(l=p,u=p)};for(let p=0;p<c.count;++p){const m=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));m?f(y,An.BLACK):(f(y,An.BLACK),f(y,An.RED))}return l}(new WJ(e.length));return new Gt(r||t,a)};let cb;const Os={};class Pr{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return w(Os&&Ee,"ChildrenNode.ts has not been loaded"),cb=cb||new Pr({".priority":Os},{".priority":Ee}),cb}get(t){const n=ys(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Gt?n:null}hasIndex(t){return qn(this.indexSet_,t.toString())}addIndex(t,n){w(t!==Xn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(W.Wrap);let a,s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?yf(r,t.getCompare()):Os;const c=t.toString(),u=Object.assign({},this.indexSet_);u[c]=t;const l=Object.assign({},this.indexes_);return l[c]=a,new Pr(l,u)}addToIndexes(t,n){const r=Ed(this.indexes_,(i,o)=>{const s=ys(this.indexSet_,o);if(w(s,"Missing index implementation for "+o),i===Os){if(s.isDefinedOn(t.node)){const a=[],c=n.getIterator(W.Wrap);let u=c.getNext();for(;u;)u.name!==t.name&&a.push(u),u=c.getNext();return a.push(t),yf(a,s.getCompare())}return Os}{const a=n.get(t.name);let c=i;return a&&(c=c.remove(new W(t.name,a))),c.insert(t,t.node)}});return new Pr(r,this.indexSet_)}removeFromIndexes(t,n){const r=Ed(this.indexes_,i=>{if(i===Os)return i;{const o=n.get(t.name);return o?i.remove(new W(t.name,o)):i}});return new Pr(r,this.indexSet_)}}let Fc,B=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&a1(this.priorityNode_),this.children_.isEmpty()&&w(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fc||(Fc=new e(new Gt(sb),null,Pr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fc}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Fc:r}}getChild(n){const r=$(n);return null===r?this:this.getImmediateChild(r).getChild(pe(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(w(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new W(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?Fc:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){const i=$(n);if(null===i)return r;{w(".priority"!==$(n)||1===pi(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(pe(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Ee,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+s1(this.getPriority().val())+":"),this.forEachChild(Ee,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":IO(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new W(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new W(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new W(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,W.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,W.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Lc?-1:0}withIndex(n){if(n===Xn||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Xn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ee),o=r.getIterator(Ee);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===Xn?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const Lc=new class GJ extends B{constructor(){super(new Gt(sb),B.EMPTY_NODE,Pr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return B.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(W,{MIN:{value:new W(fi,B.EMPTY_NODE)},MAX:{value:new W(xr,Lc)}}),o1.__EMPTY_NODE=B.EMPTY_NODE,Ps.__childrenNodeConstructor=B,function UJ(e){ab=e}(Lc),function BJ(e){l1=e}(Lc);const zJ=!0;function Ne(e,t=null){if(null===e)return B.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),w(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ps(e,Ne(t));if(e instanceof Array||!zJ){let n=B.EMPTY_NODE;return nt(e,(r,i)=>{if(qn(e,r)&&"."!==r.substring(0,1)){const o=Ne(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ne(t))}{const n=[];let r=!1;if(nt(e,(s,a)=>{if("."!==s.substring(0,1)){const c=Ne(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new W(s,c)))}}),0===n.length)return B.EMPTY_NODE;const o=yf(n,VJ,s=>s.name,sb);if(r){const s=yf(n,Ee.getCompare());return new B(o,Ne(t),new Pr({".priority":s},{".priority":Ee}))}return new B(o,Ne(t),Pr.Default)}}!function jJ(e){u1=e}(Ne);class ub extends gf{constructor(t){super(),this.indexPath_=t,w(!H(t)&&".priority"!==$(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?co(t.name,n.name):o}makePost(t,n){const r=Ne(t),i=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new W(n,i)}maxPost(){const t=B.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new W(xr,t)}toString(){return Pc(this.indexPath_,0).join("/")}}const lb=new class qJ extends gf{compare(t,n){const r=t.node.compareTo(n.node);return 0===r?co(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(t,n){const r=Ne(t);return new W(n,r)}toString(){return".value"}};function d1(e){return{type:"value",snapshotNode:e}}function Fs(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Vc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Uc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class db{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){w(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Vc(n,a)):w(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Fs(n,r)):s.trackChildChange(Uc(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Ee,(i,o)=>{n.hasChild(i)||r.trackChildChange(Vc(i,o))}),n.isLeafNode()||n.forEachChild(Ee,(i,o)=>{if(t.hasChild(i)){const s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Uc(i,o,s))}else r.trackChildChange(Fs(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?B.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jc{constructor(t){this.indexedFilter_=new db(t.getIndex()),this.index_=t.getIndex(),this.startPost_=jc.getStartPost_(t),this.endPost_=jc.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new W(n,r))||(r=B.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=B.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(B.EMPTY_NODE);const o=this;return n.forEachChild(Ee,(s,a)=>{o.matches(new W(s,a))||(i=i.updateImmediateChild(s,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}return t.getIndex().maxPost()}}class YJ{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new jc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new W(n,r))||(r=B.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=B.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=B.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(B.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();const a=t;w(a.numChildren()===this.limit_,"");const c=new W(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=f&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const h=null==f?1:s(f,c);if(l&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Uc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Vc(n,d));const m=a.updateImmediateChild(n,B.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Fs(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}return r.isEmpty()?t:l&&s(u,c)>=0?(null!=o&&(o.trackChildChange(Vc(u.name,u.node)),o.trackChildChange(Fs(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,B.EMPTY_NODE)):t}}class fb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ee}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return w(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return w(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}hasEnd(){return this.endSet_}getIndexEndValue(){return w(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return w(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return w(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ee}copy(){const t=new fb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function f1(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ee?n="$priority":e.index_===lb?n="$value":e.index_===Xn?n="$key":(w(e.index_ instanceof ub,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ye(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=Ye(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Ye(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Ye(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Ye(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function h1(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ee&&(t.i=e.index_.toString()),t}class Ef extends ZO{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kc("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return void 0!==n?"tag$"+n:(w(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const s=Ef.getListenId_(t,r),a={};this.listens_[s]=a;const c=f1(t._queryParams);this.restRequest_(o+".json",c,(u,l)=>{let d=l;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,r),ys(this.listens_,s)===a){let f;f=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(f,null)}})}unlisten(t,n){const r=Ef.getListenId_(t,n);delete this.listens_[r]}get(t){const n=f1(t._queryParams),r=t._path.toString(),i=new Wi;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+vs(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=lc(a.responseText)}catch{yt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&yt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class tee{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function If(){return{value:null,children:new Map}}function Ls(e,t,n){if(H(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=$(t);e.children.has(r)||e.children.set(r,If()),Ls(e.children.get(r),t=pe(t),n)}}function mb(e,t,n){null!==e.value?n(t,e.value):function nee(e,t){e.children.forEach((n,r)=>{t(r,n)})}(e,(r,i)=>{mb(i,new oe(t.toString()+"/"+r),n)})}class ree{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&nt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}class see{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ree(t);const r=1e4+2e4*Math.random();Rc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;nt(t,(i,o)=>{o>0&&qn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Rc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Jn||{});function vb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class bf{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Jn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(H(this.path)){if(null!=this.affectedTree.value)return w(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new oe(t));return new bf(ee(),n,this.revert)}}return w($(this.path)===t,"operationForChild called for unrelated child."),new bf(pe(this.path),this.affectedTree,this.revert)}}class Bc{constructor(t,n){this.source=t,this.path=n,this.type=Jn.LISTEN_COMPLETE}operationForChild(t){return H(this.path)?new Bc(this.source,ee()):new Bc(this.source,pe(this.path))}}class fo{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Jn.OVERWRITE}operationForChild(t){return H(this.path)?new fo(this.source,ee(),this.snap.getImmediateChild(t)):new fo(this.source,pe(this.path),this.snap)}}class Vs{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Jn.MERGE}operationForChild(t){if(H(this.path)){const n=this.children.subtree(new oe(t));return n.isEmpty()?null:n.value?new fo(this.source,ee(),n.value):new Vs(this.source,ee(),n)}return w($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Vs(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gi{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(H(t))return this.isFullyInitialized()&&!this.filtered_;const n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class aee{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function $c(e,t,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,c)=>function lee(e,t,n){if(null==t.childName||null==n.childName)throw _s("Should only compare child_ events.");const r=new W(t.childName,t.snapshotNode),i=new W(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,a,c)),s.forEach(a=>{const c=function uee(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,a,o);i.forEach(u=>{u.respondsTo(a.type)&&t.push(u.createEvent(c,e.query_))})})}function Cf(e,t){return{eventCache:e,serverCache:t}}function Hc(e,t,n,r){return Cf(new gi(t,n,r),e.serverCache)}function g1(e,t,n,r){return Cf(e.eventCache,new gi(t,n,r))}function wf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ho(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Eb;class Ie{constructor(t,n=(()=>(Eb||(Eb=new Gt(KX)),Eb))()){this.value=t,this.children=n}static fromObject(t){let n=new Ie(null);return nt(t,(r,i)=>{n=n.set(new oe(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(null!=this.value&&n(this.value))return{path:ee(),value:this.value};if(H(t))return null;{const r=$(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(pe(t),n);return null!=o?{path:Se(new oe(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(H(t))return this;{const n=$(t),r=this.children.get(n);return null!==r?r.subtree(pe(t)):new Ie(null)}}set(t,n){if(H(t))return new Ie(n,this.children);{const r=$(t),o=(this.children.get(r)||new Ie(null)).set(pe(t),n),s=this.children.insert(r,o);return new Ie(this.value,s)}}remove(t){if(H(t))return this.children.isEmpty()?new Ie(null):new Ie(null,this.children);{const n=$(t),r=this.children.get(n);if(r){const i=r.remove(pe(t));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new Ie(null):new Ie(this.value,o)}return this}}get(t){if(H(t))return this.value;{const n=$(t),r=this.children.get(n);return r?r.get(pe(t)):null}}setTree(t,n){if(H(t))return n;{const r=$(t),o=(this.children.get(r)||new Ie(null)).setTree(pe(t),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Ie(this.value,s)}}fold(t){return this.fold_(ee(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Se(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,ee(),n)}findOnPath_(t,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(H(t))return null;{const o=$(t),s=this.children.get(o);return s?s.findOnPath_(pe(t),Se(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ee(),n)}foreachOnPath_(t,n,r){if(H(t))return this;{this.value&&r(n,this.value);const i=$(t),o=this.children.get(i);return o?o.foreachOnPath_(pe(t),Se(n,i),r):new Ie(null)}}foreach(t){this.foreach_(ee(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Se(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}class Mn{constructor(t){this.writeTree_=t}static empty(){return new Mn(new Ie(null))}}function Wc(e,t,n){if(H(t))return new Mn(new Ie(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=xt(i,t);return o=o.updateChild(s,n),new Mn(e.writeTree_.set(i,o))}{const i=new Ie(n),o=e.writeTree_.setTree(t,i);return new Mn(o)}}}function Ib(e,t,n){let r=e;return nt(n,(i,o)=>{r=Wc(r,Se(t,i),o)}),r}function m1(e,t){if(H(t))return Mn.empty();{const n=e.writeTree_.setTree(t,new Ie(null));return new Mn(n)}}function bb(e,t){return null!=po(e,t)}function po(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xt(n.path,t)):null}function _1(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ee,(r,i)=>{t.push(new W(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new W(r,i.value))}),t}function mi(e,t){if(H(t))return e;{const n=po(e,t);return new Mn(null!=n?new Ie(n):e.writeTree_.subtree(t))}}function Cb(e){return e.writeTree_.isEmpty()}function Us(e,t){return y1(ee(),e.writeTree_,t)}function y1(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?(w(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=y1(Se(e,i),o,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(Se(e,".priority"),r)),n}}function Df(e,t){return C1(t,e)}function mee(e,t){if(e.snap)return yn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&yn(Se(e.path,n),t))return!0;return!1}function yee(e){return e.visible}function v1(e,t,n){let r=Mn.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const s=o.path;let a;if(o.snap)yn(n,s)?(a=xt(n,s),r=Wc(r,a,o.snap)):yn(s,n)&&(a=xt(s,n),r=Wc(r,ee(),o.snap.getChild(a)));else{if(!o.children)throw _s("WriteRecord should have .snap or .children");if(yn(n,s))a=xt(n,s),r=Ib(r,a,o.children);else if(yn(s,n))if(a=xt(s,n),H(a))r=Ib(r,ee(),o.children);else{const c=ys(o.children,$(a));if(c){const u=c.getChild(pe(a));r=Wc(r,ee(),u)}}}}}return r}function E1(e,t,n,r,i){if(r||i){const o=mi(e.visibleWrites,t);return!i&&Cb(o)?n:i||null!=n||bb(o,ee())?Us(v1(e.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(yn(u.path,t)||yn(t,u.path))},t),n||B.EMPTY_NODE):null}{const o=po(e.visibleWrites,t);if(null!=o)return o;{const s=mi(e.visibleWrites,t);return Cb(s)?n:null!=n||bb(s,ee())?Us(s,n||B.EMPTY_NODE):null}}}function Tf(e,t,n,r){return E1(e.writeTree,e.treePath,t,n,r)}function wb(e,t){return function vee(e,t,n){let r=B.EMPTY_NODE;const i=po(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ee,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=mi(e.visibleWrites,t);return n.forEachChild(Ee,(s,a)=>{const c=Us(mi(o,new oe(s)),a);r=r.updateImmediateChild(s,c)}),_1(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return _1(mi(e.visibleWrites,t)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(e.writeTree,e.treePath,t)}function I1(e,t,n,r){return function Eee(e,t,n,r,i){w(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Se(t,n);if(bb(e.visibleWrites,o))return null;{const s=mi(e.visibleWrites,o);return Cb(s)?i.getChild(n):Us(s,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Sf(e,t){return function bee(e,t){return po(e.visibleWrites,t)}(e.writeTree,Se(e.treePath,t))}function Db(e,t,n){return function Iee(e,t,n,r){const i=Se(t,n),o=po(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Us(mi(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function b1(e,t){return C1(Se(e.treePath,t),e.writeTree)}function C1(e,t){return{treePath:e,writeTree:t}}class Tee{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;w("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),w(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,Uc(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,Vc(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,Fs(r,t.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw _s("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,Uc(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const w1=new class See{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}};class Tb{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new gi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Db(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ho(this.viewCache_),o=function Dee(e,t,n,r,i,o){return function Cee(e,t,n,r,i,o,s){let a;const c=mi(e.visibleWrites,t),u=po(c,ee());if(null!=u)a=u;else{if(null==n)return[];a=Us(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let h=f.getNext();for(;h&&l.length<i;)0!==d(h,r)&&l.push(h),h=f.getNext();return l}}(e.writeTree,e.treePath,t,n,r,i,o)}(this.writes_,i,n,1,r,t);return 0===o.length?null:o[0]}}function D1(e,t,n,r,i,o){const s=t.eventCache;if(null!=Sf(r,n))return t;{let a,c;if(H(n))if(w(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=ho(t),d=wb(r,u instanceof B?u:B.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{const u=Tf(r,ho(t));a=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=$(n);if(".priority"===u){w(1===pi(n),"Can't have a priority with additional path components");const l=s.getNode();c=t.serverCache.getNode();const d=I1(r,n,l,c);a=null!=d?e.filter.updatePriority(l,d):s.getNode()}else{const l=pe(n);let d;if(s.isCompleteForChild(u)){c=t.serverCache.getNode();const f=I1(r,n,s.getNode(),c);d=null!=f?s.getNode().getImmediateChild(u).updateChild(l,f):s.getNode().getImmediateChild(u)}else d=Db(r,u,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),u,d,l,i,o):s.getNode()}}return Hc(t,a,s.isFullyInitialized()||H(n),e.filter.filtersNodes())}}function Af(e,t,n,r,i,o,s,a){const c=t.serverCache;let u;const l=s?e.filter:e.filter.getIndexedFilter();if(H(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{const h=$(n);if(!c.isCompleteForPath(n)&&pi(n)>1)return t;const p=pe(n),y=c.getNode().getImmediateChild(h).updateChild(p,r);u=".priority"===h?l.updatePriority(c.getNode(),y):l.updateChild(c.getNode(),h,y,p,w1,null)}const d=g1(t,u,c.isFullyInitialized()||H(n),l.filtersNodes());return D1(e,d,n,i,new Tb(i,d,o),a)}function Sb(e,t,n,r,i,o,s){const a=t.eventCache;let c,u;const l=new Tb(i,t,o);if(H(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Hc(t,u,!0,e.filter.filtersNodes());else{const d=$(n);if(".priority"===d)u=e.filter.updatePriority(t.eventCache.getNode(),r),c=Hc(t,u,a.isFullyInitialized(),a.isFiltered());else{const f=pe(n),h=a.getNode().getImmediateChild(d);let p;if(H(f))p=r;else{const m=l.getCompleteChild(d);p=null!=m?".priority"===rb(f)&&m.getChild(t1(f)).isEmpty()?m:m.updateChild(f,r):B.EMPTY_NODE}c=h.equals(p)?t:Hc(t,e.filter.updateChild(a.getNode(),d,p,f,l,s),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function T1(e,t){return e.eventCache.isCompleteForChild(t)}function S1(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Ab(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u,c=t;u=H(n)?r:new Ie(null).setTree(n,r);const l=t.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(l.hasChild(d)){const p=S1(0,t.serverCache.getNode().getImmediateChild(d),f);c=Af(e,c,new oe(d),p,i,o,s,a)}}),u.children.inorderTraversal((d,f)=>{const h=!t.serverCache.isCompleteForChild(d)&&null===f.value;if(!l.hasChild(d)&&!h){const m=S1(0,t.serverCache.getNode().getImmediateChild(d),f);c=Af(e,c,new oe(d),m,i,o,s,a)}}),c}class Fee{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new db(r.getIndex()),o=function QJ(e){return e.loadsAllData()?new db(e.getIndex()):e.hasLimit()?new YJ(e):new jc(e)}(r);this.processor_=function Aee(e){return{filter:e}}(o);const s=n.serverCache,a=n.eventCache,c=i.updateFullNode(B.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(B.EMPTY_NODE,a.getNode(),null),l=new gi(c,s.isFullyInitialized(),i.filtersNodes()),d=new gi(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cf(d,l),this.eventGenerator_=new aee(this.query_)}get query(){return this.query_}}function Uee(e,t){const n=ho(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!H(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function A1(e){return 0===e.eventRegistrations_.length}function M1(e,t,n){const r=[];if(n){w(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}else i.push(s)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function k1(e,t,n,r){t.type===Jn.MERGE&&null!==t.source.queryId&&(w(ho(e.viewCache_),"We should always have a full cache before handling merges"),w(wf(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=function kee(e,t,n,r,i){const o=new Tee;let s,a;if(n.type===Jn.OVERWRITE){const u=n;u.source.fromUser?s=Sb(e,t,u.path,u.snap,r,i,o):(w(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!H(u.path),s=Af(e,t,u.path,u.snap,r,i,a,o))}else if(n.type===Jn.MERGE){const u=n;u.source.fromUser?s=function Ree(e,t,n,r,i,o,s){let a=t;return r.foreach((c,u)=>{const l=Se(n,c);T1(t,$(l))&&(a=Sb(e,a,l,u,i,o,s))}),r.foreach((c,u)=>{const l=Se(n,c);T1(t,$(l))||(a=Sb(e,a,l,u,i,o,s))}),a}(e,t,u.path,u.children,r,i,o):(w(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered(),s=Ab(e,t,u.path,u.children,r,i,a,o))}else if(n.type===Jn.ACK_USER_WRITE){const u=n;s=u.revert?function Oee(e,t,n,r,i,o){let s;if(null!=Sf(r,n))return t;{const a=new Tb(r,t,i),c=t.eventCache.getNode();let u;if(H(n)||".priority"===$(n)){let l;if(t.serverCache.isFullyInitialized())l=Tf(r,ho(t));else{const d=t.serverCache.getNode();w(d instanceof B,"serverChildren would be complete if leaf node"),l=wb(r,d)}u=e.filter.updateFullNode(c,l,o)}else{const l=$(n);let d=Db(r,l,t.serverCache);null==d&&t.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),u=null!=d?e.filter.updateChild(c,l,d,pe(n),a,o):t.eventCache.getNode().hasChild(l)?e.filter.updateChild(c,l,B.EMPTY_NODE,pe(n),a,o):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Tf(r,ho(t)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=Sf(r,ee()),Hc(t,u,s,e.filter.filtersNodes())}}(e,t,u.path,r,i,o):function xee(e,t,n,r,i,o,s){if(null!=Sf(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(H(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Af(e,t,n,c.getNode().getChild(n),i,o,a,s);if(H(n)){let u=new Ie(null);return c.getNode().forEachChild(Xn,(l,d)=>{u=u.set(new oe(l),d)}),Ab(e,t,n,u,i,o,a,s)}return t}{let u=new Ie(null);return r.foreach((l,d)=>{const f=Se(n,l);c.isCompleteForPath(f)&&(u=u.set(l,c.getNode().getChild(f)))}),Ab(e,t,n,u,i,o,a,s)}}(e,t,u.path,u.affectedTree,r,i,o)}else{if(n.type!==Jn.LISTEN_COMPLETE)throw _s("Unknown operation type: "+n.type);s=function Pee(e,t,n,r,i){const o=t.serverCache;return D1(e,g1(t,o.getNode(),o.isFullyInitialized()||H(n),o.isFiltered()),n,r,w1,i)}(e,t,n.path,r,o)}const c=o.getChanges();return function Nee(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=wf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(d1(wf(t)))}}(t,s,c),{viewCache:s,changes:c}}(e.processor_,i,t,n,r);return function Mee(e,t){w(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),w(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,o.viewCache),w(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,N1(e,o.changes,o.viewCache.eventCache.getNode(),null)}function N1(e,t,n,r){return function cee(e,t,n,r){const i=[],o=[];return t.forEach(s=>{"child_changed"===s.type&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function KJ(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(s.childName,s.snapshotNode))}),$c(e,i,"child_removed",t,r,n),$c(e,i,"child_added",t,r,n),$c(e,i,"child_moved",o,r,n),$c(e,i,"child_changed",t,r,n),$c(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let Mf,Nf;class R1{constructor(){this.views=new Map}}function Mb(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return w(null!=o,"SyncTree gave us an op for an invalid query."),k1(o,t,n,r)}{let o=[];for(const s of e.views.values())o=o.concat(k1(s,t,n,r));return o}}function x1(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let a=Tf(n,i?r:null),c=!1;a?c=!0:r instanceof B?(a=wb(n,r),c=!1):(a=B.EMPTY_NODE,c=!1);const u=Cf(new gi(a,c,!1),new gi(r,i,!1));return new Fee(t,u)}return s}function P1(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function _i(e,t){let n=null;for(const r of e.views.values())n=n||Uee(r,t);return n}function O1(e,t){return t._queryParams.loadsAllData()?kf(e):e.views.get(t._queryIdentifier)}function F1(e,t){return null!=O1(e,t)}function yi(e){return null!=kf(e)}function kf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Yee=1;class L1{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ie(null),this.pendingWriteTree_=function wee(){return{visibleWrites:Mn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kb(e,t,n,r,i){return function fee(e,t,n,r,i){w(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Wc(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?js(e,new fo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function vi(e,t,n=!1){const r=function pee(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function gee(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);w(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const a=e.allWrites[s];a.visible&&(s>=n&&mee(a,r.path)?i=!1:yn(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function _ee(e){e.visibleWrites=v1(e.allWrites,yee,ee()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=m1(e.visibleWrites,r.path):nt(r.children,c=>{e.visibleWrites=m1(e.visibleWrites,Se(r.path,c))}),!0))}(e.pendingWriteTree_,t)){let o=new Ie(null);return null!=r.snap?o=o.set(ee(),!0):nt(r.children,s=>{o=o.set(new oe(s),!0)}),js(e,new bf(r.path,o,n))}return[]}function Gc(e,t,n){return js(e,new fo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Rf(e,t,n,r,i=!1){const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||F1(s,t))){const c=function zee(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=yi(e);if("default"===i)for(const[c,u]of e.views.entries())s=s.concat(M1(u,n,r)),A1(u)&&(e.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{const c=e.views.get(i);c&&(s=s.concat(M1(c,n,r)),A1(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!yi(e)&&o.push(new(function Hee(){return w(Mf,"Reference.ts has not been loaded"),Mf}())(t._repo,t._path)),{removed:o,events:s}}(s,t,n,r);(function Wee(e){return 0===e.views.size})(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const u=c.removed;if(a=c.events,!i){const l=-1!==u.findIndex(f=>f._queryParams.loadsAllData()),d=e.syncPointTree_.findOnPath(o,(f,h)=>yi(h));if(l&&!d){const f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){const h=function nte(e){return e.fold((t,n,r)=>{if(n&&yi(n))return[kf(n)];{let i=[];return n&&(i=P1(n)),nt(r,(o,s)=>{i=i.concat(s)}),i}})}(f);for(let p=0;p<h.length;++p){const m=h[p],y=m.query,v=B1(e,m);e.listenProvider_.startListening(qc(y),zc(e,y),v.hashFn,v.onComplete)}}}!d&&u.length>0&&!r&&(l?e.listenProvider_.stopListening(qc(t),null):u.forEach(f=>{const h=e.queryToTagMap.get(Pf(f));e.listenProvider_.stopListening(qc(f),h)}))}!function rte(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=Pf(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function V1(e,t,n,r){const i=Rb(e,r);if(null!=i){const o=xb(i),s=o.path,a=o.queryId,c=xt(s,t);return Pb(e,s,new fo(vb(a),c,n))}return[]}function Nb(e,t,n,r=!1){const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{const p=xt(f,i);o=o||_i(h,p),s=s||yi(h)});let c,a=e.syncPointTree_.get(i);a?(s=s||yi(a),o=o||_i(a,ee())):(a=new R1,e.syncPointTree_=e.syncPointTree_.set(i,a)),null!=o?c=!0:(c=!1,o=B.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,p)=>{const m=_i(p,ee());m&&(o=o.updateImmediateChild(h,m))}));const u=F1(a,t);if(!u&&!t._queryParams.loadsAllData()){const f=Pf(t);w(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=function ite(){return Yee++}();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let d=function Gee(e,t,n,r,i,o){const s=x1(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function jee(e,t){e.eventRegistrations_.push(t)}(s,n),function Bee(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ee,(o,s)=>{r.push(Fs(o,s))}),n.isFullyInitialized()&&r.push(d1(n.getNode())),N1(e,r,n.getNode(),t)}(s,n)}(a,t,n,Df(e.pendingWriteTree_,i),o,c);if(!u&&!s&&!r){const f=O1(a,t);d=d.concat(function ote(e,t,n){const r=t._path,i=zc(e,t),o=B1(e,n),s=e.listenProvider_.startListening(qc(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)w(!yi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,l,d)=>{if(!H(u)&&l&&yi(l))return[kf(l).query];{let f=[];return l&&(f=f.concat(P1(l).map(h=>h.query))),nt(d,(h,p)=>{f=f.concat(p)}),f}});for(let u=0;u<c.length;++u){const l=c[u];e.listenProvider_.stopListening(qc(l),zc(e,l))}}return s}(e,t,f))}return d}function xf(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{const u=_i(a,xt(s,t));if(u)return u});return E1(i,t,o,n,!0)}function js(e,t){return U1(t,e.syncPointTree_,null,Df(e.pendingWriteTree_,ee()))}function U1(e,t,n,r){if(H(e.path))return j1(e,t,n,r);{const i=t.get(ee());null==n&&null!=i&&(n=_i(i,ee()));let o=[];const s=$(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){const u=n?n.getImmediateChild(s):null,l=b1(r,s);o=o.concat(U1(a,c,u,l))}return i&&(o=o.concat(Mb(i,e,r,n))),o}}function j1(e,t,n,r){const i=t.get(ee());null==n&&null!=i&&(n=_i(i,ee()));let o=[];return t.children.inorderTraversal((s,a)=>{const c=n?n.getImmediateChild(s):null,u=b1(r,s),l=e.operationForChild(s);l&&(o=o.concat(j1(l,a,c,u)))}),i&&(o=o.concat(Mb(i,e,r,n))),o}function B1(e,t){const n=t.query,r=zc(e,n);return{hashFn:()=>(function Lee(e){return e.viewCache_.serverCache.getNode()}(t)||B.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Jee(e,t,n){const r=Rb(e,n);if(r){const i=xb(r),o=i.path,s=i.queryId,a=xt(o,t);return Pb(e,o,new Bc(vb(s),a))}return[]}(e,n._path,r):function Xee(e,t){return js(e,new Bc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const o=function ZX(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(i,n);return Rf(e,n,null,o)}}}}function zc(e,t){const n=Pf(t);return e.queryToTagMap.get(n)}function Pf(e){return e._path.toString()+"$"+e._queryIdentifier}function Rb(e,t){return e.tagToQueryMap.get(t)}function xb(e){const t=e.indexOf("$");return w(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new oe(e.substr(0,t))}}function Pb(e,t,n){const r=e.syncPointTree_.get(t);return w(r,"Missing sync point for query tag that we're tracking"),Mb(r,n,Df(e.pendingWriteTree_,t),null)}function qc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function Kee(){return w(Nf,"Reference.ts has not been loaded"),Nf}())(e._repo,e._path):e}class Ob{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new Ob(n)}node(){return this.node_}}class Fb{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Se(this.path_,t);return new Fb(this.syncTree_,n)}node(){return xf(this.syncTree_,this.path_)}}const ste=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},$1=function(e,t,n){return e&&"object"==typeof e?(w(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ate(e[".sv"],t,n):"object"==typeof e[".sv"]?cte(e[".sv"],t):void w(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ate=function(e,t,n){if("timestamp"===e)return n.timestamp;w(!1,"Unexpected server value: "+e)},cte=function(e,t,n){e.hasOwnProperty("increment")||w(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&w(!1,"Unexpected increment value: "+r);const i=t.node();if(w(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},H1=function(e,t,n,r){return Vb(t,new Fb(n,e),r)},Lb=function(e,t,n){return Vb(e,new Ob(t),n)};function Vb(e,t,n){const r=e.getPriority().val(),i=$1(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const s=e,a=$1(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Ps(a,Ne(i)):e}{const s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Ps(i))),s.forEachChild(Ee,(a,c)=>{const u=Vb(c,t.getImmediateChild(a),n);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}class Ub{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function Of(e,t){let n=t instanceof oe?t:new oe(t),r=e,i=$(n);for(;null!==i;){const o=ys(r.node.children,i)||{children:{},childCount:0};r=new Ub(i,r,o),n=pe(n),i=$(n)}return r}function go(e){return e.node.value}function jb(e,t){e.node.value=t,Bb(e)}function W1(e){return e.node.childCount>0}function Ff(e,t){nt(e.node.children,(n,r)=>{t(new Ub(n,e,r))})}function G1(e,t,n,r){n&&!r&&t(e),Ff(e,i=>{G1(i,t,!0,r)}),n&&r&&t(e)}function Kc(e){return new oe(null===e.parent?e.name:Kc(e.parent)+"/"+e.name)}function Bb(e){null!==e.parent&&function dte(e,t,n){const r=function ute(e){return void 0===go(e)&&!W1(e)}(n),i=qn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Bb(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Bb(e))}(e.parent,e.name,e)}const fte=/[\[\].#$\/\u0000-\u001F\u007F]/,hte=/[\[\].#$\u0000-\u001F\u007F]/,$b=10485760,Lf=function(e){return"string"==typeof e&&0!==e.length&&!fte.test(e)},z1=function(e){return"string"==typeof e&&0!==e.length&&!hte.test(e)},Yc=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!df(e)||e&&"object"==typeof e&&qn(e,".sv")},er=function(e,t,n,r){r&&void 0===t||Qc(Es(e,"value"),t,n)},Qc=function(e,t,n){const r=n instanceof oe?new kJ(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+uo(r));if("function"==typeof t)throw new Error(e+"contains a function "+uo(r)+" with contents = "+t.toString());if(df(t))throw new Error(e+"contains "+t.toString()+" "+uo(r));if("string"==typeof t&&t.length>$b/3&&bd(t)>$b)throw new Error(e+"contains a string greater than "+$b+" utf8 bytes "+uo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(nt(t,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Lf(s)))throw new Error(e+" contains an invalid key ("+s+") "+uo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function NJ(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=bd(t),n1(e)})(r,s),Qc(e,a,r),function RJ(e){const t=e.parts_.pop();e.byteLength_-=bd(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),i&&o)throw new Error(e+' contains ".value" child '+uo(r)+" in addition to actual children.")}},Wb=function(e,t,n,r){if(!(r&&void 0===n||z1(n)))throw new Error(Es(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mte=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wb(e,t,n,r)},tr=function(e,t){if(".info"===$(t))throw new Error(e+" failed = Can't modify data under /.info/")};class _te{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vf(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==n&&!ib(o,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Y1(e,t,n){Vf(e,n),Q1(e,r=>ib(r,t))}function rn(e,t,n){Vf(e,n),Q1(e,r=>yn(r,t)||yn(t,r))}function Q1(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(yte(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function yte(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();ao&&tt("event: "+n.toString()),Rs(r)}}}const vte=25;class Ete{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _te,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=If(),this.transactionQueueTree_=new Ub,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X1(e){const n=e.infoData_.getNode(new oe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Xc(e){return ste({timestamp:X1(e)})}function J1(e,t,n,r,i){e.dataUpdateCount++;const o=new oe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const c=Ed(n,u=>Ne(u));s=function ete(e,t,n,r){const i=Rb(e,r);if(i){const o=xb(i),s=o.path,a=o.queryId,c=xt(s,t),u=Ie.fromObject(n);return Pb(e,s,new Vs(vb(a),c,u))}return[]}(e.serverSyncTree_,o,c,i)}else{const c=Ne(n);s=V1(e.serverSyncTree_,o,c,i)}else if(r){const c=Ed(n,u=>Ne(u));s=function Zee(e,t,n){const r=Ie.fromObject(n);return js(e,new Vs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{const c=Ne(n);s=Gc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=$s(e,o)),rn(e.eventQueue_,a,s)}function eF(e,t){Gb(e,"connected",t),!1===t&&function Dte(e){Bs(e,"onDisconnectEvents");const t=Xc(e),n=If();mb(e.onDisconnect_,ee(),(i,o)=>{const s=H1(i,o,e.serverSyncTree_,t);Ls(n,i,s)});let r=[];mb(n,ee(),(i,o)=>{r=r.concat(Gc(e.serverSyncTree_,i,o));const s=Yb(e,i);$s(e,s)}),e.onDisconnect_=If(),rn(e.eventQueue_,ee(),r)}(e)}function Gb(e,t,n){const r=new oe("/.info/"+t),i=Ne(n);e.infoData_.updateSnapshot(r,i);const o=Gc(e.infoSyncTree_,r,i);rn(e.eventQueue_,r,o)}function Uf(e){return e.nextWriteId_++}function zb(e,t,n,r,i){Bs(e,"set",{path:t.toString(),value:n,priority:r});const o=Xc(e),s=Ne(n,r),a=xf(e.serverSyncTree_,t),c=Lb(s,a,o),u=Uf(e),l=kb(e.serverSyncTree_,t,c,u,!0);Vf(e.eventQueue_,l),e.server_.put(t.toString(),s.val(!0),(f,h)=>{const p="ok"===f;p||yt("set at "+t+" failed: "+f);const m=vi(e.serverSyncTree_,u,!p);rn(e.eventQueue_,t,m),function Ei(e,t,n,r){t&&Rs(()=>{if("ok"===n)t(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,t(s)}})}(0,i,f,h)});const d=Yb(e,t);$s(e,d),rn(e.eventQueue_,d,[])}function qb(e,t,n){let r;r=".info"===$(t._path)?Rf(e.infoSyncTree_,t,n):Rf(e.serverSyncTree_,t,n),Y1(e.eventQueue_,t._path,r)}function Bs(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),tt(n,...t)}function Kb(e,t,n){return xf(e.serverSyncTree_,t,n)||B.EMPTY_NODE}function jf(e,t=e.transactionQueueTree_){if(t||Bf(e,t),go(t)){const n=iF(e,t);w(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function Rte(e,t,n){const r=n.map(u=>u.currentWriteId),i=Kb(e,t,r);let o=i;const s=i.hash();for(let u=0;u<n.length;u++){const l=n[u];w(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=xt(t,l.path);o=o.updateChild(d,l.currentOutputSnapshotRaw)}const a=o.val(!0),c=t;e.server_.put(c.toString(),a,u=>{Bs(e,"transaction put response",{path:c.toString(),status:u});let l=[];if("ok"===u){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,l=l.concat(vi(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Bf(e,Of(e.transactionQueueTree_,t)),jf(e,e.transactionQueueTree_),rn(e.eventQueue_,t,l);for(let f=0;f<d.length;f++)Rs(d[f])}else{if("datastale"===u)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{yt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}$s(e,t)}},s)}(e,Kc(t),n)}else W1(t)&&Ff(t,n=>{jf(e,n)})}function $s(e,t){const n=rF(e,t),r=Kc(n);return function xte(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],u=xt(n,c.path);let d,l=!1;if(w(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,d=c.abortReason,i=i.concat(vi(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=vte)l=!0,d="maxretry",i=i.concat(vi(e.serverSyncTree_,c.currentWriteId,!0));else{const f=Kb(e,c.path,s);c.currentInputSnapshot=f;const h=t[a].update(f.val());if(void 0!==h){Qc("transaction failed: Data returned ",h,c.path);let p=Ne(h);"object"==typeof h&&null!=h&&qn(h,".priority")||(p=p.updatePriority(f.getPriority()));const y=c.currentWriteId,v=Xc(e),_=Lb(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=_,c.currentWriteId=Uf(e),s.splice(s.indexOf(y),1),i=i.concat(kb(e.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),i=i.concat(vi(e.serverSyncTree_,y,!0))}else l=!0,d="nodata",i=i.concat(vi(e.serverSyncTree_,c.currentWriteId,!0))}rn(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===d?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(d),!1,null)))}Bf(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Rs(r[a]);jf(e,e.transactionQueueTree_)}(e,iF(e,n),r),r}function rF(e,t){let n,r=e.transactionQueueTree_;for(n=$(t);null!==n&&void 0===go(r);)r=Of(r,n),n=$(t=pe(t));return r}function iF(e,t){const n=[];return oF(e,t,n),n.sort((r,i)=>r.order-i.order),n}function oF(e,t,n){const r=go(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ff(t,i=>{oF(e,i,n)})}function Bf(e,t){const n=go(t);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,jb(t,n.length>0?n:void 0)}Ff(t,r=>{Bf(e,r)})}function Yb(e,t){const n=Kc(rF(e,t)),r=Of(e.transactionQueueTree_,t);return function lte(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{Qb(e,i)}),Qb(e,r),G1(r,i=>{Qb(e,i)}),n}function Qb(e,t){const n=go(t);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(w(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(w(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(vi(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?jb(t,void 0):n.length=o+1,rn(e.eventQueue_,Kc(t),i);for(let s=0;s<r.length;s++)Rs(r[s])}}const Zb=function(e,t){const n=Fte(e),r=n.namespace;return"firebase.com"===n.domain&&Zn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ZI(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,t,"",r!==n.subdomain),path:new oe(n.pathString)}},Fte=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let l=e.indexOf("/");-1===l&&(l=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(l,d)),l<d&&(i=function Pte(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(e.substring(l,d)));const f=function Ote(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(t.substring(u+1),10)):u=t.length;const h=t.slice(0,u);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{const p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},sF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Lte=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=sF.charAt(n%64),n=Math.floor(n/64);w(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=sF.charAt(t[i]);return w(20===s.length,"nextPushId: Length should be 20."),s}}();class aF{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ye(this.snapshot.exportVal())}}class cF{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xb{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return w(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class on{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return H(this._path)?null:rb(this._path)}get ref(){return new kn(this._repo,this._path)}get _queryIdentifier(){const t=h1(this._queryParams),n=YI(t);return"{}"===n?"default":n}get _queryObject(){return h1(this._queryParams)}isEqual(t){if(!((t=He(t))instanceof on))return!1;const n=this._repo===t._repo,r=ib(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function AJ(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class kn extends on{constructor(t,n){super(t,n,new fb,!1)}get parent(){const t=t1(this._path);return null===t?null:new kn(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class mo{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new oe(t),r=Hs(this.ref,t);return new mo(this._node.getChild(n),r,Ee)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new mo(i,Hs(this.ref,r),Ee)))}hasChild(t){const n=new oe(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uF(e,t){return(e=He(e))._checkNotDeleted("ref"),void 0!==t?Hs(e._root,t):e._root}function Hs(e,t){return null===$((e=He(e))._path)?mte("child","path",t,!1):Wb("child","path",t,!1),new kn(e._repo,Se(e._path,t))}function Ute(e,t){e=He(e),tr("push",e._path),er("push",t,e._path,!0);const n=X1(e._repo),r=Lte(n),i=Hs(e,r),o=Hs(e,r);let s;return s=null!=t?Jb(o,t).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Jb(e,t){e=He(e),tr("set",e._path),er("set",t,e._path,!1);const n=new Wi;return zb(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function jte(e){e=He(e);const t=new Xb(()=>{}),n=new Jc(t);return function Cte(e,t,n){const r=function tte(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(u,l)=>{const d=xt(u,n);r=r||_i(l,d)});let i=e.syncPointTree_.get(n);i?r=r||_i(i,ee()):(i=new R1,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new gi(r,!0,!1):null;return function Vee(e){return wf(e.viewCache_)}(x1(i,t,Df(e.pendingWriteTree_,t._path),o?s.getNode():B.EMPTY_NODE,o))}(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(i=>{const o=Ne(i).withIndex(t._queryParams.getIndex());let s;if(Nb(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Gc(e.serverSyncTree_,t._path,o);else{const a=zc(e.serverSyncTree_,t);s=V1(e.serverSyncTree_,t._path,o,a)}return rn(e.eventQueue_,t._path,s),Rf(e.serverSyncTree_,t,n,null,!0),o},i=>(Bs(e,"get for query "+Ye(t)+" failed: "+i),Promise.reject(new Error(i))))}(e._repo,e,n).then(r=>new mo(r,new kn(e._repo,e._path),e._queryParams.getIndex()))}class Jc{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,n){const r=n._queryParams.getIndex();return new aF("value",this,new mo(t.snapshotNode,new kn(n._repo,n._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new cF(this,t,n):null}matches(t){return t instanceof Jc&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wf{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n="children_added"===t?"child_added":t;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new cF(this,t,n):null}createEvent(t,n){w(null!=t.childName,"Child events should have a childName.");const r=Hs(new kn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new aF(t.type,this,new mo(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Wf&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lF(e,t,n,r){return function eu(e,t,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const c=n,u=(l,d)=>{qb(e._repo,e,a),c(l,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const s=new Xb(n,o||void 0),a="value"===t?new Jc(s):new Wf(t,s);return function Mte(e,t,n){let r;r=".info"===$(t._path)?Nb(e.infoSyncTree_,t,n):Nb(e.serverSyncTree_,t,n),Y1(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>qb(e._repo,e,a)}(e,"value",t,n,r)}class bi{}class Gte extends bi{constructor(t){super(),this._path=t}_apply(t){!function $f(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}(t,"orderByChild");const n=new oe(this._path);if(H(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ub(n),i=function vf(e,t){const n=e.copy();return n.index_=t,n}(t._queryParams,r);return function Ii(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Xn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==fi)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==xr)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Ee){if(null!=t&&!Yc(t)||null!=n&&!Yc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w(e.getIndex()instanceof ub||e.getIndex()===lb,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}(i),new on(t._repo,t._path,i,!0)}}function zte(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Wb("orderByChild","path",e,!1),new Gte(e)}function Zte(e,...t){let n=He(e);for(const r of t)n=r._apply(n);return n}(function $ee(e){w(!Mf,"__referenceConstructor has already been defined"),Mf=e})(kn),function qee(e){w(!Nf,"__referenceConstructor has already been defined"),Nf=e}(kn);const eC={};function ene(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c,u,s=Zb(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=Zb(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const l=i&&c?new xc(xc.OWNER):new rJ(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Lf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),z1(e)}(n))throw new Error(Es(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),H(s.path)||Zn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function nne(e,t,n,r){let i=eC[t.name];i||(i={},eC[t.name]=i);let o=i[e.toURLString()];return o&&Zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ete(e,false,n,r),i[e.toURLString()]=o,o}(a,e,l,new nJ(e.name,n));return new ine(d,e)}class ine{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ite(e,t,n){if(e.stats_=eb(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ef(e.repoInfo_,(r,i,o,s)=>{J1(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>eF(e,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ye(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new lo(e.repoInfo_,t,(r,i,o,s)=>{J1(e,r,i,o,s)},r=>{eF(e,r)},r=>{!function bte(e,t){nt(t,(n,r)=>{Gb(e,n,r)})}(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=function sJ(e,t){const n=e.toString();return JI[n]||(JI[n]=t()),JI[n]}(e.repoInfo_,()=>new see(e.stats_,e.server_)),e.infoData_=new tee,e.infoSyncTree_=new L1({startListening:(r,i,o,s)=>{let a=[];const c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Gc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Gb(e,"connected",!1),e.serverSyncTree_=new L1({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{const u=s(a,c);rn(e.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kn(this._repo,ee())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function tne(e,t){const n=eC[t];(!n||n[e.key]!==e)&&Zn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function nF(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Zn("Cannot call "+t+" on a deleted database.")}}function one(e=Dd(),t){const n=Yi(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=fR("database");r&&function sne(e,t,n,r={}){(e=He(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Zn("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xc(xc.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:gR(r.mockUserToken,e.app.options.projectId);o=new xc(s)}!function Jte(e,t,n,r){e.repoInfo_=new ZI(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...r)}return n}lo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},lo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function ane(e){(function HX(e){zI=e})(ci),_t(new ut("database",(t,{instanceIdentifier:n})=>ene(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),be(_O,"0.14.4",e),be(_O,"0.14.4","esm2017")}();class Ws{constructor(t){return t}}const gF="database",tC=new N("angularfire2.database-instances");function fne(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Ws(r)}}const hne={provide:class lne{constructor(){return Pd(gF)}},deps:[[new Ze,tC]]},pne={provide:Ws,useFactory:function dne(e,t){const n=xd(gF,e,t);return n&&new Ws(n)},deps:[[new Ze,tC],no]};let gne=(()=>{class e{constructor(){be("angularfire",pc.full,"rtdb")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=un({type:e}),e.\u0275inj=Yt({providers:[pne,hne]}),e})();function mne(e,...t){return{ngModule:gne,providers:[{provide:tC,useFactory:fne(e),multi:!0,deps:[fe,Dt,Od,Fd,[new Ze,WI],[new Ze,Wd],...t]}]}}const _ne=Rt(jte,!0),yne=Rt(one,!0),mF=Rt(lF,!0),vne=Rt(zte,!0),Ene=Rt(Ute,!0),Ine=Rt(Zte,!0),tu=Rt(uF,!0),bne=Rt(Jb,!0),_F="firebasestorage.googleapis.com",yF="storageBucket";class Re extends mn{constructor(t,n,r=0){super(nC(t),`Firebase Storage: ${n} (${nC(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Re.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return nC(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ae=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Ae||{});function nC(e){return"storage/"+e}function rC(){return new Re(Ae.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function iC(e){return new Re(Ae.INVALID_ARGUMENT,e)}function bF(){return new Re(Ae.APP_DELETED,"The Firebase app was deleted.")}function nu(e,t){return new Re(Ae.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ru(e){throw new Re(Ae.INTERNAL_ERROR,"Internal error: "+e)}class Pt{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Pt.makeFromUrl(t,n)}catch{return new Pt(t,"")}if(""===r.path)return r;throw function Rne(e){return new Re(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(D){D.path_=decodeURIComponent(D.path)}const d=n.replace(/[.]/g,"\\."),I=[{regex:a,indices:{bucket:1,path:3},postModify:function o(D){"/"===D.path.charAt(D.path.length-1)&&(D.path_=D.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${n===_F?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<I.length;D++){const k=I[D],re=k.regex.exec(t);if(re){let vt=re[k.indices.path];vt||(vt=""),r=new Pt(re[k.indices.bucket],vt),k.postModify(r);break}}if(null==r)throw function Nne(e){return new Re(Ae.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}class Vne{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Gf(e){return"string"==typeof e||e instanceof String}function CF(e){return oC()&&e instanceof Blob}function oC(){return typeof Blob<"u"&&!function mR(){var e;const t=null===(e=yd())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()}function sC(e,t,n,r){if(r<t)throw iC(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw iC(`Invalid value for '${e}'. Expected ${n} or less.`)}function Or(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function wF(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}var Gs=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(Gs||{});class Wne{constructor(t,n,r,i,o,s,a,c,u,l,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function Bne(e){return void 0!==e}(c)?o():o(c)}catch(c){s(c)}else if(null!==a){const c=rC();c.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,c):c)}else s(i.canceled?this.appDelete_?bF():function EF(){return new Re(Ae.CANCELED,"User canceled the upload/download.")}():function vF(){return new Re(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?n(0,new zf(!1,null,!0)):this.backoffId_=function Une(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let u=!1;function l(...y){u||(u=!0,t.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,e(h,c())},y)}function f(){o&&clearTimeout(o)}function h(y,...v){if(u)return void f();if(y)return f(),void l.call(null,y,...v);if(c()||s)return f(),void l.call(null,y,...v);let I;r<64&&(r*=2),1===a?(a=2,I=0):I=1e3*(r+Math.random()),d(I)}let p=!1;function m(y){p||(p=!0,f(),!u&&(null!==i?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,m(!0)},n),m}((r,i)=>{if(i)return void r(!1,new zf(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Gs.NO_ERROR,c=o.getStatus();if(!a||function DF(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==t.indexOf(e);return n||i||o}(c,this.additionalRetryCodes_)&&this.retry){const l=o.getErrorCode()===Gs.ABORT;return void r(!1,new zf(!1,null,l))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new zf(u,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function jne(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zf{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Zne(...e){const t=function Qne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}if(oC())return new Blob(e);throw new Re(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aC{constructor(t,n){this.data=t,this.contentType=n||null}}function SF(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function AF(e,t){switch(e){case Nn.BASE64:{const i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o)throw nu(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Nn.BASE64URL:{const i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw nu(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Jne(e){if(typeof atob>"u")throw function Fne(e){return new Re(Ae.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(e)}(t)}catch(i){throw i.message.includes("polyfill")?i:nu(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class MF{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(null===n)throw nu(Nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function rre(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}class Fr{constructor(t,n){let r=0,i="";CF(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(CF(this.data_)){const i=function Xne(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===i?null:new Fr(i)}{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Fr(r,!0)}}static getBlob(...t){if(oC()){const n=t.map(r=>r instanceof Fr?r.data_:r);return new Fr(Zne.apply(null,n))}{const n=t.map(s=>Gf(s)?function TF(e,t){switch(e){case Nn.RAW:return new aC(SF(t));case Nn.BASE64:case Nn.BASE64URL:return new aC(AF(e,t));case Nn.DATA_URL:return new aC(function tre(e){const t=new MF(e);return t.base64?AF(Nn.BASE64,t.rest):function ere(e){let t;try{t=decodeURIComponent(e)}catch{throw nu(Nn.DATA_URL,"Malformed data URL.")}return SF(t)}(t.rest)}(t),function nre(e){return new MF(e).contentType}(t))}throw rC()}(Nn.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Fr(i,!0)}}uploadData(){return this.data_}}function cC(e){let t;try{t=JSON.parse(e)}catch{return null}return function Hne(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function kF(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function sre(e,t){return t}class Ot{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||sre}}let qf=null;function iu(){if(qf)return qf;const e=[];e.push(new Ot("bucket")),e.push(new Ot("generation")),e.push(new Ot("metageneration")),e.push(new Ot("name","fullPath",!0));const n=new Ot("name");n.xform=function t(o,s){return function are(e){return!Gf(e)||e.length<2?e:kF(e)}(s)},e.push(n);const i=new Ot("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},e.push(i),e.push(new Ot("timeCreated")),e.push(new Ot("updated")),e.push(new Ot("md5Hash",null,!0)),e.push(new Ot("cacheControl",null,!0)),e.push(new Ot("contentDisposition",null,!0)),e.push(new Ot("contentEncoding",null,!0)),e.push(new Ot("contentLanguage",null,!0)),e.push(new Ot("contentType",null,!0)),e.push(new Ot("metadata","customMetadata",!0)),qf=e,qf}function NF(e,t,n){const r=cC(t);return null===r?null:function ure(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,t[s.server])}return function cre(e,t){Object.defineProperty(e,"ref",{get:function n(){const o=new Pt(e.bucket,e.fullPath);return t._makeStorageReference(o)}})}(r,e),r}(e,r,n)}class nr{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rr(e){if(!e)throw rC()}function zs(e){return function t(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Mne(){return new Re(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Ane(){return new Re(Ae.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Sne(e){return new Re(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===n.getStatus()?function kne(e){return new Re(Ae.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function LF(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let I="";for(let D=0;D<2;D++)I+=Math.random().toString().slice(2);return I}();s["Content-Type"]="multipart/related; boundary="+c;const u=function FF(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function vre(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}(t,r,i),l=function uC(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}(u,n),h=Fr.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===h)throw function IF(){return new Re(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const p={name:u.fullPath},m=Or(o,e.host,e._protocol),v=e.maxUploadRetryTime,_=new nr(m,"POST",function Kf(e,t){return function n(r,i){const o=NF(e,i,t);return rr(null!==o),o}}(e,n),v);return _.urlParams=p,_.headers=s,_.body=h.uploadData(),_.errorHandler=zs(t),_}let UF=null;class wre{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gs.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gs.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw ru("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ru("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ru("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ru("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ru("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class Dre extends wre{initXhr(){this.xhr_.responseType="text"}}function Rn(){return UF?UF():new Dre}class _o{constructor(t,n){this._service=t,this._location=n instanceof Pt?n:Pt.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new _o(t,n)}get root(){const t=new Pt(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kF(this._location.path)}get storage(){return this._service}get parent(){const t=function ire(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;const n=new Pt(this._location.bucket,t);return new _o(this._service,n)}_throwIfRoot(t){if(""===this._location.path)throw function Lne(e){return new Re(Ae.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function Vre(e){e._throwIfRoot("getDownloadURL");const t=function mre(e,t,n){const i=Or(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,a=new nr(i,"GET",function pre(e,t){return function n(r,i){const o=NF(e,i,t);return rr(null!==o),function lre(e,t,n,r){const i=cC(t);if(null===i||!Gf(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(u=>{const d=e.fullPath;return Or("/b/"+s(e.bucket)+"/o/"+s(d),n,r)+wF({alt:"media",token:u})})[0]}(o,i,e.host,e._protocol)}}(e,n),s);return a.errorHandler=function ou(e){const t=zs(e);return function n(r,i){let o=t(r,i);return 404===r.getStatus()&&(o=function Tne(e){return new Re(Ae.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),o.serverResponse=i.serverResponse,o}}(t),a}(e.storage,e._location,iu());return e.storage.makeRequestWithTokens(t,Rn).then(n=>{if(null===n)throw function One(){return new Re(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function WF(e,t){if(e instanceof hC){const n=e;if(null==n._bucket)throw function xne(){return new Re(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yF+"' property when initializing the app?")}();const r=new _o(n,n._bucket);return null!=t?WF(r,t):r}return void 0!==t?function HF(e,t){const n=function ore(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Pt(e._location.bucket,n);return new _o(e.storage,r)}(e,t):e}function GF(e,t){const n=t?.[yF];return null==n?null:Pt.makeFromBucketSpec(n,e)}class hC{constructor(t,n,r,i,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=_F,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Pt.makeFromBucketSpec(i,this._host):GF(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Pt.makeFromBucketSpec(this._url,t):GF(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){sC("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){sC("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return g(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const n=t._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return g(function*(){const n=t._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _o(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new Vne(bF());{const s=function Yne(e,t,n,r,i,o,s=!0){const a=wF(e.urlParams),c=e.url+a,u=Object.assign({},e.headers);return function qne(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function Gne(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function zne(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(u,o),function Kne(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Wne(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(t,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,n){var r=this;return g(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,n,i,o).getPromise()})()}}const zF="@firebase/storage",KF="storage";function Wre(e,t,n){return function jF(e,t,n){e._throwIfRoot("uploadBytes");const r=LF(e.storage,e._location,iu(),new Fr(t,!0),n);return e.storage.makeRequestWithTokens(r,Rn).then(i=>({metadata:i,ref:e}))}(e=He(e),t,n)}function Gre(e){return Vre(e=He(e))}function zre(e,t){return function $re(e,t){if(t&&function jre(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof hC)return function Bre(e,t){return new _o(e,t)}(e,t);throw iC("To use ref(service, url), the first argument must be a Storage instance.")}return WF(e,t)}(e=He(e),t)}function qre(e=Dd(),t){const r=Yi(e=He(e),KF).getImmediate({identifier:t}),i=fR("storage");return i&&function Kre(e,t,n,r={}){!function Hre(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:gR(i,e.app.options.projectId))}(e,t,n,r)}(r,...i),r}function Yre(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new hC(n,r,i,t,ci)}!function Qre(){_t(new ut(KF,Yre,"PUBLIC").setMultipleInstances(!0)),be(zF,"0.11.2",""),be(zF,"0.11.2","esm2017")}();class Qf{constructor(t){return t}}const YF="storage",pC=new N("angularfire2.storage-instances");function Jre(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Qf(r)}}const eie={provide:class Zre{constructor(){return Pd(YF)}},deps:[[new Ze,pC]]},tie={provide:Qf,useFactory:function Xre(e,t){const n=xd(YF,e,t);return n&&new Qf(n)},deps:[[new Ze,pC],no]};let nie=(()=>{class e{constructor(){be("angularfire",pc.full,"gcs")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=un({type:e}),e.\u0275inj=Yt({providers:[tie,eie]}),e})();function rie(e,...t){return{ngModule:nie,providers:[{provide:pC,useFactory:Jre(e),multi:!0,deps:[fe,Dt,Od,Fd,[new Ze,WI],[new Ze,Wd],...t]}]}}const iie=Rt(Gre,!0),oie=Rt(qre,!0),sie=Rt(zre,!0),aie=Rt(Wre,!0);let cie=(()=>{class e{constructor(n){this.elementRef=n,this.clickOutside=new ct}onClick(n){this.elementRef.nativeElement.contains(n)||this.clickOutside.emit()}static{this.\u0275fac=function(r){return new(r||e)(C(fn))}}static{this.\u0275dir=L({type:e,selectors:[["","clickOutside",""]],hostBindings:function(r,i){1&r&&De("click",function(s){return i.onClick(s.target)},0,CS)},outputs:{clickOutside:"clickOutside"}})}}return e})();const uie=["fileInput"],lie=["imageInput"];function die(e,t){if(1&e&&(Jr(0),Z(1,"div",20),Ke(2),J(),ei()),2&e){const n=Tt().$implicit;ce(2),Li(n.text)}}function fie(e,t){if(1&e){const n=cs();Jr(0),Z(1,"img",21),De("click",function(){qr(n);const i=Tt().$implicit;return Kr(Tt().openImage(i.image.url))}),J(),ei()}if(2&e){const n=Tt().$implicit;ce(1),Pe("src",n.image.url,Ni)("alt",n.image.name)}}function hie(e,t){if(1&e&&(Jr(0),Z(1,"div",22)(2,"a",23),Ke(3),Fg(4,"number"),J()(),ei()),2&e){const n=Tt().$implicit;ce(2),Pe("href",n.file.url,Ni),ce(1),Tg(" \u{1f4ce} ",n.file.name," (",oM(4,3,n.file.size)," bytes) ")}}function pie(e,t){if(1&e&&(Z(0,"div",14),Oi(1,"img",15),Z(2,"div",16)(3,"div",17),Ke(4),J(),en(5,die,3,1,"ng-container",18),en(6,fie,2,2,"ng-container",18),en(7,hie,5,5,"ng-container",18),Z(8,"div",19),Ke(9),Fg(10,"date"),J()()()),2&e){const n=t.$implicit,r=Tt();ja("sent",n.sender===r.currentUser.uid)("received",n.sender!==r.currentUser.uid),ce(1),Pe("src",n.senderPhoto,Ni)("alt",n.senderName||n.senderDisplayName||"User"),ce(3),Li(n.senderName||n.senderDisplayName||"User"),ce(1),Pe("ngIf",n.text),ce(1),Pe("ngIf",n.image),ce(1),Pe("ngIf",n.file),ce(2),$a(" ",sM(10,11,n.timestamp,"short")," ")}}function gie(e,t){if(1&e){const n=cs();Z(0,"div",24),De("clickOutside",function(){return qr(n),Kr(Tt().showEmojiPicker=!1)}),Z(1,"emoji-picker",25),De("emoji-click",function(i){return qr(n),Kr(Tt().onEmojiSelect(i))}),J()()}}function mie(e,t){1&e&&(Z(0,"div",26),Ke(1," Uploading... "),J())}let _ie=(()=>{class e{constructor(n,r){this.db=n,this.storage=r,this.message="",this.messages=[],this.showEmojiPicker=!1,this.isUploading=!1,this.uploadProgress={}}ngOnInit(){this.listenToMessages()}listenToMessages(){const n=tu(this.db,"messages"),r=Ine(n,vne("timestamp"));mF(r,i=>{const o=[];i.forEach(s=>{o.push({id:s.key,...s.val()})}),this.messages=o})}sendMessage(){var n=this;return g(function*(r={}){if(n.message||r)try{const i={text:n.message,sender:n.currentUser.uid,senderName:n.currentUser.displayName,senderPhoto:n.currentUser.photoURL,timestamp:Date.now(),...r};yield Ene(tu(n.db,"messages"),i),n.message="",n.showEmojiPicker=!1}catch(i){console.error("Error sending message:",i)}}).apply(this,arguments)}handleFileUpload(n,r){var i=this;return g(function*(){try{i.isUploading=!0;const o=sie(i.storage,`${r}s/${Date.now()}_${n.name}`);yield aie(o,n);const s=yield iie(o);yield i.sendMessage({[r]:{url:s,name:n.name,size:n.size}}),i.isUploading=!1}catch(o){console.error(`Error uploading ${r}:`,o),i.isUploading=!1}})()}onImageUpload(n){const r=n.target.files?.[0];r&&this.handleFileUpload(r,"image")}onFileUpload(n){const r=n.target.files?.[0];r&&this.handleFileUpload(r,"file")}onEmojiSelect(n){this.message+=n.detail.unicode||n.detail.emoji}toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker}openImage(n){window.open(n,"_blank")}static{this.\u0275fac=function(r){return new(r||e)(C(Ws),C(Qf))}}static{this.\u0275cmp=ra({type:e,selectors:[["app-chat"]],viewQuery:function(r,i){if(1&r&&(Gg(uie,5),Gg(lie,5)),2&r){let o;Wg(o=zg())&&(i.fileInput=o.first),Wg(o=zg())&&(i.imageInput=o.first)}},inputs:{currentUser:"currentUser"},decls:21,vars:4,consts:[[1,"chat"],[1,"messages"],["class","message",3,"sent","received",4,"ngFor","ngForOf"],[1,"input-area"],[1,"upload-buttons"],[3,"click"],["type","file","accept","image/*",2,"display","none",3,"change"],["imageInput",""],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"message-input"],["type","text","placeholder","Type a message...",3,"ngModel","ngModelChange","keyup.enter"],["class","emoji-picker","clickOutside","",3,"clickOutside",4,"ngIf"],["class","upload-progress",4,"ngIf"],[1,"message"],[1,"avatar",3,"src","alt"],[1,"message-content"],[1,"sender-name"],[4,"ngIf"],[1,"timestamp"],[1,"text"],[1,"image-preview",3,"src","alt","click"],[1,"file"],["target","_blank","download","",3,"href"],["clickOutside","",1,"emoji-picker",3,"clickOutside"],[2,"height","300px",3,"emoji-click"],[1,"upload-progress"]],template:function(r,i){if(1&r){const o=cs();Z(0,"div",0)(1,"div",1),en(2,pie,11,14,"div",2),J(),Z(3,"div",3)(4,"div",4)(5,"button",5),De("click",function(){return qr(o),Kr(yg(8).click())}),Ke(6,"\u{1f4f7}"),J(),Z(7,"input",6,7),De("change",function(a){return i.onImageUpload(a)}),J(),Z(9,"button",5),De("click",function(){return qr(o),Kr(yg(12).click())}),Ke(10,"\u{1f4ce}"),J(),Z(11,"input",8,9),De("change",function(a){return i.onFileUpload(a)}),J(),Z(13,"button",5),De("click",function(){return i.toggleEmojiPicker()}),Ke(14,"\u{1f60a}"),J()(),Z(15,"div",10)(16,"input",11),De("ngModelChange",function(a){return i.message=a})("keyup.enter",function(){return i.sendMessage()}),J(),Z(17,"button",5),De("click",function(){return i.sendMessage()}),Ke(18,"Send"),J()(),en(19,gie,2,0,"div",12),en(20,mie,2,0,"div",13),J()()}2&r&&(ce(2),Pe("ngForOf",i.messages),ce(14),Pe("ngModel",i.message),ce(3),Pe("ngIf",i.showEmojiPicker),ce(1),Pe("ngIf",i.isUploading))},dependencies:[bm,Cm,id,MN,Xm,cie,Ok,xk],styles:[".chat[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#fff;border-radius:8px;overflow:hidden;color:#333;box-shadow:0 2px 4px #0000001a;margin-left:1rem;flex:1}.messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column;background-color:#fff}.message-input[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid #e9ecef;background-color:#fff}.message-form[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}input[type=text][_ngcontent-%COMP%]{flex:1;padding:.8rem 1rem;border:1px solid #e9ecef;border-radius:20px;font-size:.95rem;transition:border-color .2s;background-color:#f8f9fa}input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#0084ff;background-color:#fff}.send-button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;background-color:#0084ff;color:#fff;border:none;border-radius:20px;cursor:pointer;transition:background-color .2s;font-weight:500}.send-button[_ngcontent-%COMP%]:hover{background-color:#0073e6}.message[_ngcontent-%COMP%]{display:flex;gap:.8rem;max-width:70%;align-items:flex-start;margin-bottom:1rem}.message.sent[_ngcontent-%COMP%]{margin-left:auto;flex-direction:row-reverse}.message.received[_ngcontent-%COMP%]{margin-right:auto}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#e9ecef;display:flex;align-items:center;justify-content:center;font-size:16px;color:#fff;text-transform:uppercase;flex-shrink:0}.message-content[_ngcontent-%COMP%]{background-color:#f1f3f5;padding:1rem;border-radius:15px;position:relative;box-shadow:0 1px 2px #0000000d;max-width:calc(100% - 50px)}.sent[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#0084ff;color:#fff;border-top-right-radius:4px}.received[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#2c3e50;border-top-left-radius:4px}.message-text[_ngcontent-%COMP%]{margin:0;line-height:1.4}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;margin-top:.3rem;display:block}.sent[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fffc}.message-content[_ngcontent-%COMP%]{background-color:#fff;padding:.8rem 1rem;border-radius:12px;box-shadow:0 1px 2px #0000001a;color:#333}.sent[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#0084ff;color:#fff}.sender-name[_ngcontent-%COMP%]{font-size:.8em;color:#666;margin-bottom:.3rem;font-weight:500}.text[_ngcontent-%COMP%]{word-break:break-word}.image-preview[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:4px;cursor:pointer}.file[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.file[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.timestamp[_ngcontent-%COMP%]{font-size:.7em;opacity:.6;margin-top:.2rem}.input-area[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;position:relative;border-top:1px solid #e5e5e5}.upload-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.5rem}.upload-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;padding:.5rem;cursor:pointer;font-size:1.2rem;transition:transform .2s}.upload-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.message-input[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.8rem;border-radius:20px;border:1px solid #e0e0e0;background-color:#f8f8f8;color:#333;font-size:.95rem;transition:border-color .3s}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0084ff;background-color:#fff}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0084ff;color:#fff;border:none;padding:.8rem 1.5rem;border-radius:20px;font-weight:500;cursor:pointer;transition:background-color .3s}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#06c}.emoji-picker[_ngcontent-%COMP%]{position:absolute;bottom:100%;right:1rem;z-index:1000}.upload-progress[_ngcontent-%COMP%]{position:absolute;top:-2rem;left:50%;transform:translate(-50%);background-color:#646cff;padding:.2rem 1rem;border-radius:4px;font-size:.8em}"]})}}return e})();function yie(e,t){if(1&e&&(Z(0,"div",3),Oi(1,"img",4),Z(2,"span",5),Ke(3),J()()),2&e){const n=t.$implicit;ce(1),Pe("src",n.photoURL,Ni)("alt",n.displayName||n.name||"User"),ce(2),Li(n.displayName||n.name||"User")}}let vie=(()=>{class e{constructor(){this.users=[]}getOtherUsers(){return this.users.filter(n=>n.uid!==this.currentUser.uid)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ra({type:e,selectors:[["app-user-list"]],inputs:{currentUser:"currentUser",users:"users"},decls:5,vars:1,consts:[[1,"user-list"],[1,"users"],["class","user",4,"ngFor","ngForOf"],[1,"user"],[1,"avatar",3,"src","alt"],[1,"name"]],template:function(r,i){1&r&&(Z(0,"div",0)(1,"h3"),Ke(2,"Online Users"),J(),Z(3,"div",1),en(4,yie,4,3,"div",2),J()()),2&r&&(ce(4),Pe("ngForOf",i.getOtherUsers()))},dependencies:[bm],styles:[".user-list[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:1rem;height:100%;overflow-y:auto;box-shadow:0 2px 4px #0000001a;color:#333;display:flex;flex-direction:column;min-width:250px}h3[_ngcontent-%COMP%]{margin:0 0 1rem;text-align:left;font-size:1.1rem;padding-bottom:.5rem;border-bottom:2px solid #e9ecef;color:#2c3e50}.users[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.7rem;border-radius:8px;transition:all .2s ease;background-color:#f8f9fa;margin-bottom:.5rem;border:1px solid #e9ecef;text-decoration:none;color:#2c3e50}.user[_ngcontent-%COMP%]:hover{background-color:#e9ecef;transform:translateY(-1px);box-shadow:0 2px 4px #0000000d}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#e9ecef;display:flex;align-items:center;justify-content:center;font-size:16px;color:#fff;text-transform:uppercase}.name[_ngcontent-%COMP%]{font-size:.95em;font-weight:500;color:#2c3e50;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return e})(),Eie=(()=>{class e{constructor(n){this.db=n,this.status="checking",this.message="Checking database connection..."}ngOnInit(){this.testConnection()}testConnection(){var n=this;return g(function*(){try{if(!n.db)return n.status="error",void(n.message="Database not initialized");const r=tu(n.db,".info/connected");(yield _ne(r)).exists()?(n.status="success",n.message="Database connected successfully! \u2705"):(n.status="warning",n.message="Database connection established but no data found")}catch(r){console.error("Database connection test failed:",r),n.status="error",n.message=`Database connection failed: ${r.message}`}})()}getStatusColor(){switch(this.status){case"success":return"#10b981";case"warning":return"#f59e0b";case"error":return"#ef4444";default:return"#6b7280"}}static{this.\u0275fac=function(r){return new(r||e)(C(Ws))}}static{this.\u0275cmp=ra({type:e,selectors:[["app-database-status"]],decls:2,vars:5,consts:[[1,"status-container"]],template:function(r,i){1&r&&(Z(0,"div",0),Ke(1),J()),2&r&&(wg("background-color",i.getStatusColor()+"20")("border-color",i.getStatusColor()),ce(1),$a(" \u{1f4e1} ",i.message,"\n"))},styles:[".status-container[_ngcontent-%COMP%]{padding:10px 15px;margin:10px 0;border-radius:8px;border-width:1px;border-style:solid;font-size:14px;font-weight:500}"]})}}return e})();function Iie(e,t){1&e&&(Jr(0),Z(1,"div",2),Ke(2,"Loading..."),J(),ei())}function bie(e,t){if(1&e&&(Z(0,"div",8),Ke(1),J()),2&e){const n=Tt(3);ce(1),Li(n.error)}}function Cie(e,t){if(1&e){const n=cs();Z(0,"div",5)(1,"h1"),Ke(2,"Firebase Chat App"),J(),Z(3,"button",6),De("click",function(){return qr(n),Kr(Tt(2).login())}),Ke(4,"Login with Google"),J(),en(5,bie,2,1,"div",7),J()}if(2&e){const n=Tt(2);ce(5),Pe("ngIf",n.error)}}function wie(e,t){if(1&e){const n=cs();Z(0,"div",9)(1,"header")(2,"div",10),Oi(3,"img",11),Z(4,"span"),Ke(5),J()(),Z(6,"button",6),De("click",function(){return qr(n),Kr(Tt(2).logout())}),Ke(7,"Logout"),J()(),Oi(8,"app-database-status"),Z(9,"main"),Oi(10,"app-user-list",12)(11,"app-chat",13),J()()}if(2&e){const n=Tt(2);ce(3),Pe("src",n.user.photoURL||"",Ni)("alt",n.user.displayName||n.user.name||"User"),ce(2),Li(n.user.displayName||n.user.name||"User"),ce(5),Pe("currentUser",n.user)("users",n.users),ce(1),Pe("currentUser",n.user)}}function Die(e,t){if(1&e&&(Jr(0),en(1,Cie,6,1,"div",3),en(2,wie,12,6,"div",4),ei()),2&e){const n=Tt();ce(1),Pe("ngIf",!n.isUser(n.user)),ce(1),Pe("ngIf",n.isUser(n.user))}}let Tie=(()=>{class e{isUser(n){return null!==n}constructor(n,r){this.auth=n,this.db=r,this.user=null,this.users=[],this.loading=!0,this.error=null}ngOnInit(){this.auth.onAuthStateChanged(n=>{this.user=n,n&&(this.updateUserData(n),this.listenToUsers()),this.loading=!1})}login(){var n=this;return g(function*(){try{const r=new BQ;yield $X(n.auth,r)}catch(r){n.error=r.message,console.error("Login error:",r)}})()}logout(){var n=this;return g(function*(){try{yield n.auth.signOut()}catch(r){n.error=r.message,console.error("Logout error:",r)}})()}updateUserData(n){const r=tu(this.db,`users/${n.uid}`);bne(r,{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL})}listenToUsers(){const n=tu(this.db,"users");mF(n,r=>{const i=[];r.forEach(o=>{i.push({id:o.key,...o.val()})}),this.users=i})}static{this.\u0275fac=function(r){return new(r||e)(C(lf),C(Ws))}}static{this.\u0275cmp=ra({type:e,selectors:[["app-root"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"loading"],["class","login-container",4,"ngIf"],["class","chat-container",4,"ngIf"],[1,"login-container"],[3,"click"],["class","error",4,"ngIf"],[1,"error"],[1,"chat-container"],[1,"user-info"],[1,"avatar",3,"src","alt"],[3,"currentUser","users"],[3,"currentUser"]],template:function(r,i){1&r&&(Z(0,"div",0),en(1,Iie,3,0,"ng-container",1),en(2,Die,3,2,"ng-container",1),J()),2&r&&(ce(1),Pe("ngIf",i.loading),ce(1),Pe("ngIf",!i.loading))},dependencies:[Cm,_ie,vie,Eie],styles:[".container[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;padding:2rem;text-align:center}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.chat-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#f0f0f0;border-radius:8px;margin-bottom:1rem;color:#333;box-shadow:0 2px 4px #0000001a}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#333}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid #fff;box-shadow:0 2px 4px #0000001a}header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#e63946;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#dc2f3c}main[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:1rem;height:calc(100vh - 200px)}.error[_ngcontent-%COMP%]{color:#ef4444;padding:.5rem;border-radius:4px;background-color:#ef44441a}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-size:1.2rem}"]})}}return e})();const Sie_firebase={apiKey:"AIzaSyCOWmXSlBvxLhCG4EbnStFhQPyqNdDRRok",authDomain:"fir-6cfb0.firebaseapp.com",databaseURL:"https://fir-6cfb0-default-rtdb.firebaseio.com",projectId:"fir-6cfb0",storageBucket:"fir-6cfb0.firebasestorage.app",messagingSenderId:"800677388464",appId:"1:800677388464:web:2833913c137ee0726d5b75"};function Zf(e){if("string"!=typeof e||!e)throw new Error("expected a non-empty string, got: "+e)}function gC(e){if("number"!=typeof e)throw new Error("expected a number, got: "+e)}const Aie=1,Mie=1,yo="emoji",Ks="keyvalue",mC="favorites",kie="tokens",QF="tokens",Nie="unicode",ZF="count",Rie="group",xie="order",XF="group-order",_C="eTag",Xf="url",JF="skinTone",Ys="readonly",yC="readwrite",eL="skinUnicodes",Pie="skinUnicodes";function tL(e){return function Lie(e,t){const n=new Set,r=[];for(const i of e){const o=t(i);n.has(o)||(n.add(o),r.push(i))}return r}(e,t=>t.unicode)}const vC={},Jf={},eh={};function nL(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}function EC(){return(EC=g(function*(e){const t=yield new Promise((n,r)=>{const i=indexedDB.open(e,Aie);vC[e]=i,i.onupgradeneeded=o=>{o.oldVersion<Mie&&function Vie(e){function t(n,r,i){const o=r?e.createObjectStore(n,{keyPath:r}):e.createObjectStore(n);if(i)for(const[s,[a,c]]of Object.entries(i))o.createIndex(s,a,{multiEntry:c});return o}t(Ks),t(yo,Nie,{[QF]:[kie,!0],[XF]:[[Rie,xie]],[eL]:[Pie,!0]}),t(mC,void 0,{[ZF]:[""]})}(i.result)},nL(n,r,i)});return t.onclose=()=>IC(e),t})).apply(this,arguments)}function Lr(e,t,n,r){return new Promise((i,o)=>{const s=e.transaction(t,n,{durability:"relaxed"}),a="string"==typeof t?s.objectStore(t):t.map(u=>s.objectStore(u));let c;r(a,s,u=>{c=u}),s.oncomplete=()=>i(c),s.onerror=()=>o(s.error)})}function IC(e){const t=vC[e],n=t&&t.result;if(n){n.close();const r=eh[e];if(r)for(const i of r)i()}delete vC[e],delete Jf[e],delete eh[e]}const Hie=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Qs(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||Hie.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase()).filter(Boolean)}const Wie=2;function rL(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=Wie)}function iL(e,t,n,r){e[t](n).onsuccess=i=>r&&r(i.target.result)}function vo(e,t,n){iL(e,"get",t,n)}function oL(e,t,n){iL(e,"getAll",t,n)}function bC(e){e.commit&&e.commit()}function sL(e,t){const n=function zie(e,t){let n=e[0];for(let r=1;r<e.length;r++){const i=e[r];t(n)>t(i)&&(n=i)}return n}(e,i=>i.length),r=[];for(const i of n)e.some(o=>-1===o.findIndex(s=>t(s)===t(i)))||r.push(i);return r}function CC(){return(CC=g(function*(e){return!(yield NC(e,Ks,Xf))})).apply(this,arguments)}function wC(){return(wC=g(function*(e,t,n){const[r,i]=yield Promise.all([_C,Xf].map(o=>NC(e,Ks,o)));return r===n&&i===t})).apply(this,arguments)}function DC(){return(DC=g(function*(e,t){return Lr(e,yo,Ys,(r,i,o)=>{let s;const a=()=>{r.getAll(s&&IDBKeyRange.lowerBound(s,!0),50).onsuccess=c=>{const u=c.target.result;for(const l of u)if(s=l.unicode,t(l))return o(l);if(u.length<50)return o();a()}};a()})})).apply(this,arguments)}function aL(e,t,n,r){return TC.apply(this,arguments)}function TC(){return(TC=g(function*(e,t,n,r){try{const i=function Gie(e){return e.map(({annotation:n,emoticon:r,group:i,order:o,shortcodes:s,skins:a,tags:c,emoji:u,version:l})=>{const f={annotation:n,group:i,order:o,tags:c,tokens:[...new Set(rL([...(s||[]).map(Qs).flat(),...(c||[]).map(Qs).flat(),...Qs(n),r]))].sort(),unicode:u,version:l};if(r&&(f.emoticon=r),s&&(f.shortcodes=s),a){f.skinTones=[],f.skinUnicodes=[],f.skinVersions=[];for(const{tone:h,emoji:p,version:m}of a)f.skinTones.push(h),f.skinUnicodes.push(p),f.skinVersions.push(m)}return f})}(t);yield Lr(e,[yo,Ks],yC,([o,s],a)=>{let c,u,l=0;function d(){2==++l&&function f(){if(c!==r||u!==n){o.clear();for(const h of i)o.put(h);s.put(r,_C),s.put(n,Xf),bC(a)}}()}vo(s,_C,h=>{c=h,d()}),vo(s,Xf,h=>{u=h,d()})})}finally{}})).apply(this,arguments)}function SC(){return(SC=g(function*(e,t){return Lr(e,yo,Ys,(n,r,i)=>{const o=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);oL(n.index(XF),o,i)})})).apply(this,arguments)}function cL(e,t){return AC.apply(this,arguments)}function AC(){return(AC=g(function*(e,t){const n=rL(Qs(t));return n.length?Lr(e,yo,Ys,(r,i,o)=>{const s=[],c=()=>{const u=sL(s,l=>l.unicode);o(u.sort((l,d)=>l.order<d.order?-1:1))};for(let u=0;u<n.length;u++){const l=n[u],d=u===n.length-1?IDBKeyRange.bound(l,l+"\uffff",!1,!0):IDBKeyRange.only(l);oL(r.index(QF),d,f=>{s.push(f),s.length===n.length&&c()})}}):[]})).apply(this,arguments)}function MC(){return MC=g(function*(e,t){const n=yield cL(e,t);return n.length?n.filter(r=>(r.shortcodes||[]).map(o=>o.toLowerCase()).includes(t.toLowerCase()))[0]||null:(yield function Yie(e,t){return DC.apply(this,arguments)}(e,i=>(i.shortcodes||[]).includes(t.toLowerCase())))||null}),MC.apply(this,arguments)}function kC(){return(kC=g(function*(e,t){return Lr(e,yo,Ys,(n,r,i)=>vo(n,t,o=>{if(o)return i(o);vo(n.index(eL),t,s=>i(s||null))}))})).apply(this,arguments)}function NC(e,t,n){return Lr(e,t,Ys,(r,i,o)=>vo(r,n,o))}const roe=["name","url"];function uL(e){!function ioe(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||roe.some(r=>!(r in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}(e);const t=(f,h)=>f.name.toLowerCase()<h.name.toLowerCase()?-1:1,n=e.sort(t),i=function noe(e,t){const n=new Map;for(const i of e){const o=t(i);for(const s of o){let a=n;for(let u=0;u<s.length;u++){const l=s.charAt(u);let d=a.get(l);d||(d=new Map,a.set(l,d)),a=d}let c=a.get("");c||(c=[],a.set("",c)),c.push(i)}}return(i,o)=>{let s=n;for(let u=0;u<i.length;u++){const l=i.charAt(u),d=s.get(l);if(!d)return[];s=d}if(o)return s.get("")||[];const a=[],c=[s];for(;c.length;){const l=[...c.shift().entries()].sort((d,f)=>d[0]<f[0]?-1:1);for(const[d,f]of l)""===d?a.push(...f):c.push(f)}return a}}(e,f=>{const h=new Set;if(f.shortcodes)for(const p of f.shortcodes)for(const m of Qs(p))h.add(m);return h}),o=f=>i(f,!0),s=f=>i(f,!1),c=new Map,u=new Map;for(const f of e){u.set(f.name.toLowerCase(),f);for(const h of f.shortcodes||[])c.set(h.toLowerCase(),f)}return{all:n,search:f=>{const h=Qs(f);return sL(h.map((m,y)=>(y<h.length-1?o:s)(m)),m=>m.name).sort(t)},byShortcode:f=>c.get(f.toLowerCase()),byName:f=>u.get(f.toLowerCase())}}const ooe=typeof wrappedJSObject<"u";function su(e){if(!e)return e;if(ooe&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function lL(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const soe=["annotation","emoji","group","order","version"];function dL(e,t){if(2!==Math.floor(e.status/100))throw new Error("Failed to fetch: "+t+":  "+e.status)}function RC(){return(RC=g(function*(e){const t=yield fetch(e,{method:"HEAD"});dL(t,e);const n=t.headers.get("etag");return lL(n),n})).apply(this,arguments)}function xC(e){return PC.apply(this,arguments)}function PC(){return(PC=g(function*(e){const t=yield fetch(e);dL(t,e);const n=t.headers.get("etag");lL(n);const r=yield t.json();return function aoe(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||soe.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}(r),[n,r]})).apply(this,arguments)}function fL(e){return OC.apply(this,arguments)}function OC(){return(OC=g(function*(e){let n=function loe(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=-1;++i<t;)r[i]=e.charCodeAt(i);return n}(JSON.stringify(e));const i=function uoe(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=-1;++i<r;)t+=String.fromCharCode(n[i]);return t}(yield crypto.subtle.digest("SHA-1",n));return btoa(i)})).apply(this,arguments)}function FC(){return FC=g(function*(e,t){let n,r=yield function coe(e){return RC.apply(this,arguments)}(t);if(!r){const i=yield xC(t);r=i[0],n=i[1],r||(r=yield fL(n))}(yield function Kie(e,t,n){return wC.apply(this,arguments)}(e,t,r))||(n||(n=(yield xC(t))[1]),yield aL(e,n,t,r))}),FC.apply(this,arguments)}function LC(){return(LC=g(function*(e,t){let[n,r]=yield xC(t);n||(n=yield fL(r)),yield aL(e,r,t,n)})).apply(this,arguments)}function VC(){return VC=g(function*(e,t){try{yield function doe(e,t){return FC.apply(this,arguments)}(e,t)}catch(n){if("InvalidStateError"!==n.name)throw n}}),VC.apply(this,arguments)}class poe{constructor({dataSource:t="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:n="en",customEmoji:r=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=uL(r),this._clear=this._clear.bind(this),this._ready=this._init()}_init(){var t=this;return g(function*(){const n=t._db=yield function jie(e){return Jf[e]||(Jf[e]=function Uie(e){return EC.apply(this,arguments)}(e)),Jf[e]}(t._dbName);!function $ie(e,t){let n=eh[e];n||(n=eh[e]=[]),n.push(t)}(t._dbName,t._clear);const r=t.dataSource;(yield function qie(e){return CC.apply(this,arguments)}(n))?yield function foe(e,t){return LC.apply(this,arguments)}(n,r):t._lazyUpdate=function hoe(e,t){return VC.apply(this,arguments)}(n,r)})()}ready(){var t=this;return g(function*(){const n=function(){var r=g(function*(){return t._ready||(t._ready=t._init()),t._ready});return function(){return r.apply(this,arguments)}}();yield n(),t._db||(yield n())})()}getEmojiByGroup(t){var n=this;return g(function*(){return gC(t),yield n.ready(),tL(yield function Qie(e,t){return SC.apply(this,arguments)}(n._db,t)).map(su)})()}getEmojiBySearchQuery(t){var n=this;return g(function*(){return Zf(t),yield n.ready(),[...n._custom.search(t),...tL(yield cL(n._db,t)).map(su)]})()}getEmojiByShortcode(t){var n=this;return g(function*(){return Zf(t),yield n.ready(),n._custom.byShortcode(t)||su(yield function Zie(e,t){return MC.apply(this,arguments)}(n._db,t))})()}getEmojiByUnicodeOrName(t){var n=this;return g(function*(){return Zf(t),yield n.ready(),n._custom.byName(t)||su(yield function Xie(e,t){return kC.apply(this,arguments)}(n._db,t))})()}getPreferredSkinTone(){var t=this;return g(function*(){return yield t.ready(),(yield NC(t._db,Ks,JF))||0})()}setPreferredSkinTone(t){var n=this;return g(function*(){return gC(t),yield n.ready(),function Jie(e,t,n,r){return Lr(e,t,yC,(i,o)=>{i.put(r,n),bC(o)})}(n._db,Ks,JF,t)})()}incrementFavoriteEmojiCount(t){var n=this;return g(function*(){return Zf(t),yield n.ready(),function eoe(e,t){return Lr(e,mC,yC,(n,r)=>vo(n,t,i=>{n.put((i||0)+1,t),bC(r)}))}(n._db,t)})()}getTopFavoriteEmoji(t){var n=this;return g(function*(){return gC(t),yield n.ready(),(yield function toe(e,t,n){return 0===n?[]:Lr(e,[mC,yo],Ys,([r,i],o,s)=>{const a=[];r.index(ZF).openCursor(void 0,"prev").onsuccess=c=>{const u=c.target.result;if(!u)return s(a);function l(h){if(a.push(h),a.length===n)return s(a);u.continue()}const d=u.primaryKey,f=t.byName(d);if(f)return l(f);vo(i,d,h=>{if(h)return l(h);u.continue()})}})}(n._db,n._custom,t)).map(su)})()}set customEmoji(t){this._custom=uL(t)}get customEmoji(){return this._custom.all}_shutdown(){var t=this;return g(function*(){yield t.ready();try{yield t._lazyUpdate}catch{}})()}_clear(){this._db=this._ready=this._lazyUpdate=void 0}close(){var t=this;return g(function*(){yield t._shutdown(),yield IC(t._dbName)})()}delete(){var t=this;return g(function*(){yield t._shutdown(),yield function Bie(e){return new Promise((t,n)=>{IC(e),nL(t,n,indexedDB.deleteDatabase(e))})}(t._dbName)})()}}const UC=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),jC=UC.slice(1),pL="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function gL(e){return e.unicode.includes("\u200d")}const moe={"\u{1fae9}":16,"\u{1fae8}":15.1,"\u{1fae0}":14,"\u{1f972}":13.1,"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6},Eoe=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],mL='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Ioe=(e,t)=>e<t?-1:e>t?1:0,_L=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0});return r.textBaseline="top",r.font=`100px ${mL}`,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data};function Coe(e){const t=_L(e,"#000"),n=_L(e,"#fff");return t&&n&&((e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")})(t,n)}let BC;const $C=()=>(BC||(BC=new Promise(e=>pL(()=>e(function woe(){const e=Object.entries(moe);try{for(const[t,n]of e)if(Coe(t))return n}catch{}return e[0][1]}())))),BC),HC=new Map;function ir(e){e.preventDefault(),e.stopPropagation()}function WC(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function yL(e,t){const n=new Set,r=[];for(const i of e){const o=t(i);n.has(o)||(n.add(o),r.push(i))}return r}const nh=requestAnimationFrame;let GC,Roe="function"==typeof ResizeObserver;function vL(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function au(e,t,n){let r=e.get(t);return r||(r=n(),e.set(t,r)),r}function EL(e){return""+e}function Loe(e){const t=document.createElement("template");return t.innerHTML=e,t}const Voe=new WeakMap,Uoe=new WeakMap,joe=Symbol("un-keyed"),Boe="replaceChildren"in Element.prototype;function Woe(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,i=!1;r?i=function Hoe(e,t){let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(i=!0,t.targetNode=void 0,t.targetParentNode=r=n.parentNode),i&&function $oe(e,t){Boe?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}function IL(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];n.push({binding:i,targetNode:i.attributeName?t:t.firstChild,targetParentNode:void 0,currentExpression:void 0})}}function Qoe(e,t,n,r,i,o,s,a,c){const{labelWithSkin:u,titleForEmoji:l,unicodeWithSkin:d}=n,{html:f,map:h}=function Yoe(e){const t=au(Uoe,e,()=>new Map);let n=joe;return{map:function i(o,s,a){return o.map((c,u)=>{const l=n;n=a(c);try{return s(c,u)}finally{n=l}})},html:function r(o,...s){const a=au(t,o,()=>new Map);return au(a,n,()=>function Koe(e){const{template:t,elementsToBindings:n}=au(Voe,e,()=>function zoe(e){let t="",n=!1,r=!1,i=-1;const o=new Map,s=[];let a=0;for(let u=0,l=e.length;u<l;u++){const d=e[u];if(t+=d.slice(a),u===l-1)break;for(let _=0;_<d.length;_++)switch(d.charAt(_)){case"<":"/"===d.charAt(_+1)?s.pop():(n=!0,s.push(++i));break;case">":n=!1,r=!1;break;case"=":r=!0}const h=au(o,s[s.length-1],()=>[]);let p,m,y;if(r){const _=/(\S+)="?([^"=]*)$/.exec(d);p=_[1],m=_[2];const I=/^([^">]*)("?)/.exec(e[u+1]);y=I[1],t=t.slice(0,-1*_[0].length),a=I[0].length}else a=0;h.push({attributeName:p,attributeValuePre:m,attributeValuePost:y,expressionIndex:u}),!n&&!r&&(t+=" ")}return{template:Loe(t),elementsToBindings:o}}(e)),r=t.cloneNode(!0).content.firstElementChild,i=function qoe(e,t){const n=[];let r;if(1===t.size&&(r=t.get(0)))IL(r,e,n);else{const i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let o=e,s=-1;do{const a=t.get(++s);a&&IL(a,o,n)}while(o=i.nextNode())}return n}(r,n);return function(s){return function Goe(e,t){for(const n of t){const{targetNode:r,currentExpression:i,binding:{expressionIndex:o,attributeName:s,attributeValuePre:a,attributeValuePost:c}}=n,u=e[o];if(i!==u)if(n.currentExpression=u,s)if(null===u)r.removeAttribute(s);else{const l=a+EL(u)+c;r.setAttribute(s,l)}else{let l;Array.isArray(u)?Woe(u,n):u instanceof Element?(l=u,r.replaceWith(l)):r.nodeValue=EL(u),l&&(n.targetNode=l)}}}(s,i),r}}(o))(s)}}}(t);function p(_,I,D){return h(_,(k,re)=>f`<button role="${I?"option":"menuitem"}" aria-selected="${I?re===t.activeSearchItem:null}" aria-label="${u(k,t.currentSkinTone)}" title="${l(k)}" class="${"emoji"+(I&&re===t.activeSearchItem?" active":"")+(k.unicode?"":" custom-emoji")}" id="${`${D}-${k.id}`}" style="${k.unicode?null:`--custom-emoji-background: url(${JSON.stringify(k.url)})`}">${k.unicode?d(k,t.currentSkinTone):""}</button>`,k=>`${D}-${k.id}`)}const y=f`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?`emo-${t.activeSearchItemId}`:null}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${h(t.skinTones,(_,I)=>f`<div id="skintone-${I}" class="emoji ${I===t.activeSkinTone?"active":""}" aria-selected="${I===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[I]}" aria-label="${t.i18n.skinTones[I]}">${_}</div>`,_=>_)}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${h(t.groups,_=>f`<button role="tab" class="nav-button" aria-controls="tab-${_.id}" aria-label="${t.i18n.categories[_.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===_.id}" title="${t.i18n.categories[_.name]}" data-group-id="${_.id}"><div class="nav-emoji emoji">${_.emoji}</div></button>`,_=>_.id)}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?null:`tab-${t.currentGroup.id}`}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${h(t.currentEmojisWithCategories,(_,I)=>f`<div><div id="menu-label-${I}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:_.category?_.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===I||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${`--num-rows: ${Math.ceil(_.emojis.length/t.numColumns)}`}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${I}" id="${t.searchMode?"search-results":null}">${p(_.emojis,t.searchMode,"emo")}</div></div>`,_=>_.category)}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${p(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji"></button></section>`,v=(_,I)=>{for(const D of e.querySelectorAll(`[${_}]`))I(D,D.getAttribute(_))};if(c){e.appendChild(y);for(const _ of["click","focusout","input","keydown","keyup"])v(`data-on-${_}`,(I,D)=>{I.addEventListener(_,r[D])});v("data-ref",(_,I)=>{o[I]=_}),s.addEventListener("abort",()=>{e.removeChild(y)})}v("data-action",(_,I)=>{let D=a.get(I);D||a.set(I,D=new WeakSet),D.has(_)||(D.add(_),i[I](_))})}const rh="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e);function zC(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}const bL=new WeakMap,qC=[],{assign:ih}=Object;function Joe(e,t){const n={},r=new AbortController,i=r.signal,{state:o,createEffect:s}=function Zoe(e){let n,t=!1;const r=new Map,i=new Set;let o;const s=()=>{if(t)return;const u=[...i];i.clear();try{for(const l of u)l()}finally{o=!1,i.size&&(o=!0,rh(s))}},a=new Proxy({},{get(u,l){if(n){let d=r.get(l);d||(d=new Set,r.set(l,d)),d.add(n)}return u[l]},set(u,l,d){if(u[l]!==d){u[l]=d;const f=r.get(l);if(f){for(const h of f)i.add(h);o||(o=!0,rh(s))}}return!0}});return e.addEventListener("abort",()=>{t=!0}),{state:a,createEffect:u=>{const l=()=>{const d=n;n=l;try{return u()}finally{n=d}};return l()}}}(i),a=new Map;ih(o,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),ih(o,t),ih(o,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:jC,databaseLoaded:!1,activeSearchItemId:void 0}),s(()=>{o.currentGroup!==o.groups[o.currentGroupIndex]&&(o.currentGroup=o.groups[o.currentGroupIndex])});const c=E=>{e.getElementById(E).focus()},u=E=>e.getElementById(`emo-${E.id}`),l=(E,A)=>{n.rootElement.dispatchEvent(new CustomEvent(E,{detail:A,bubbles:!0,composed:!0}))},d=(E,A)=>E.id===A.id,f=(E,A)=>{const{category:O,emojis:G}=E,{category:Ve,emojis:an}=A;return O===Ve&&zC(G,an,d)},h=E=>{zC(o.currentEmojis,E,d)||(o.currentEmojis=E)},p=E=>{o.searchMode!==E&&(o.searchMode=E)},y=(E,A)=>A&&E.skins&&E.skins[A]||E.unicode,I={labelWithSkin:(E,A)=>function Ooe(e){return yL(e,t=>t)}([E.name||y(E,A),E.annotation,...E.shortcodes||qC].filter(Boolean)).join(", "),titleForEmoji:E=>E.annotation||(E.shortcodes||qC).join(", "),unicodeWithSkin:y},D={onClickSkinToneButton:function pse(E){o.skinTonePickerExpanded=!o.skinTonePickerExpanded,o.activeSkinTone=o.currentSkinTone,o.skinTonePickerExpanded&&(ir(E),nh(()=>c("skintone-list")))},onEmojiClick:function fse(E){return tw.apply(this,arguments)},onNavClick:function lse(E){const{target:A}=E,O=A.closest(".nav-button");if(!O)return;const G=parseInt(O.dataset.groupId,10);n.searchElement.value="",o.rawSearchText="",o.searchText="",o.activeSearchItem=-1,o.currentGroupIndex=o.groups.findIndex(Ve=>Ve.id===G)},onNavKeydown:function dse(E){const{target:A,key:O}=E,G=Ve=>{Ve&&(ir(E),Ve.focus())};switch(O){case"ArrowLeft":return G(A.previousElementSibling);case"ArrowRight":return G(A.nextElementSibling);case"Home":return G(A.parentElement.firstElementChild);case"End":return G(A.parentElement.lastElementChild)}},onSearchKeydown:function use(E){if(!o.searchMode||!o.currentEmojis.length)return;const A=O=>{ir(E),o.activeSearchItem=WC(O,o.activeSearchItem,o.currentEmojis)};switch(E.key){case"ArrowDown":return A(!1);case"ArrowUp":return A(!0);case"Enter":if(-1!==o.activeSearchItem)return ir(E),SL(o.currentEmojis[o.activeSearchItem].id);o.activeSearchItem=0}},onSkinToneOptionsClick:function hse(E){const{target:{id:A}}=E,O=A&&A.match(/^skintone-(\d)/);O&&(ir(E),nw(parseInt(O[1],10)))},onSkinToneOptionsFocusOut:function _se(E){return rw.apply(this,arguments)},onSkinToneOptionsKeydown:function gse(E){if(!o.skinTonePickerExpanded)return;const A=function(){var O=g(function*(G){ir(E),o.activeSkinTone=G});return function(Ve){return O.apply(this,arguments)}}();switch(E.key){case"ArrowUp":return A(WC(!0,o.activeSkinTone,o.skinTones));case"ArrowDown":return A(WC(!1,o.activeSkinTone,o.skinTones));case"Home":return A(0);case"End":return A(o.skinTones.length-1);case"Enter":return ir(E),nw(o.activeSkinTone);case"Escape":return ir(E),o.skinTonePickerExpanded=!1,c("skintone-button")}},onSkinToneOptionsKeyup:function mse(E){if(o.skinTonePickerExpanded&&" "===E.key)return ir(E),nw(o.activeSkinTone)},onSearchInput:function yse(E){o.rawSearchText=E.target.value}},k={calculateEmojiGridStyle:function vt(E){!function xoe(e,t,n){let r;Roe?(r=new ResizeObserver(n),r.observe(e)):nh(n),t.addEventListener("abort",()=>{r&&r.disconnect()})}(E,i,()=>{{const A=getComputedStyle(n.rootElement),O=parseInt(A.getPropertyValue("--num-columns"),10),G="rtl"===A.getPropertyValue("direction");o.numColumns=O,o.isRtl=G}})},updateOnIntersection:function sn(E){!function Xoe(e,t,n){{const r=e.closest(".tabpanel");let i=bL.get(r);i||(i=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),bL.set(r,i),t.addEventListener("abort",()=>{i.disconnect()})),i.observe(e)}}(E,i,A=>{for(const{target:O,isIntersecting:G}of A)O.classList.toggle("onscreen",G)})}};let re=!0;function Qe(){const{customEmoji:E,database:A}=o,O=E||qC;A.customEmoji!==O&&(A.customEmoji=O)}s(()=>{Qoe(e,o,I,D,k,n,i,a,re),re=!1}),o.emojiVersion||$C().then(E=>{E||(o.message=o.i18n.emojiUnsupportedMessage)}),s(()=>{function A(){return(A=g(function*(){let O=!1;const G=setTimeout(()=>{O=!0,o.message=o.i18n.loadingMessage},1e3);try{yield o.database.ready(),o.databaseLoaded=!0}catch(Ve){console.error(Ve),o.message=o.i18n.networkErrorMessage}finally{clearTimeout(G),O&&(O=!1,o.message="")}})).apply(this,arguments)}o.database&&function E(){A.apply(this,arguments)}()}),s(()=>{o.pickerStyle=`\n      --num-groups: ${o.groups.length}; \n      --indicator-opacity: ${o.searchMode?0:1}; \n      --num-skintones: 6;`}),s(()=>{o.customEmoji&&o.database&&Qe()}),s(()=>{o.customEmoji&&o.customEmoji.length?o.groups!==UC&&(o.groups=UC):o.groups!==jC&&(o.currentGroupIndex&&o.currentGroupIndex--,o.groups=jC)}),s(()=>{function A(){return(A=g(function*(){o.databaseLoaded&&(o.currentSkinTone=yield o.database.getPreferredSkinTone())})).apply(this,arguments)}!function E(){A.apply(this,arguments)}()}),s(()=>{o.skinTones=Array(6).fill().map((E,A)=>function koe(e,t){if(0===t)return e;const n=e.indexOf("\u200d");return-1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("\ufe0f")&&(e=e.substring(0,e.length-1)),e+"\ud83c"+String.fromCodePoint(57339+t-1))}(o.skinToneEmoji,A))}),s(()=>{o.skinToneButtonText=o.skinTones[o.currentSkinTone]}),s(()=>{o.skinToneButtonLabel=o.i18n.skinToneLabel.replace("{skinTone}",o.i18n.skinTones[o.currentSkinTone])}),s(()=>{function A(){return(A=g(function*(){const{database:O}=o,G=(yield Promise.all(Eoe.map(Ve=>O.getEmojiByUnicodeOrName(Ve)))).filter(Boolean);o.defaultFavoriteEmojis=G})).apply(this,arguments)}o.databaseLoaded&&function E(){A.apply(this,arguments)}()}),s(()=>{function A(){return(A=g(function*(){Qe();const{database:O,defaultFavoriteEmojis:G,numColumns:Ve}=o,an=yield O.getTopFavoriteEmoji(Ve),qt=yield QC(yL([...an,...G],Vr=>Vr.unicode||Vr.name).slice(0,Ve));o.currentFavorites=qt})).apply(this,arguments)}o.databaseLoaded&&o.defaultFavoriteEmojis&&function E(){A.apply(this,arguments)}()}),s(()=>{function A(){return A=g(function*(){const{searchText:O,currentGroup:G,databaseLoaded:Ve,customEmoji:an}=o;if(Ve)if(O.length>=2){const qt=yield function cse(E){return JC.apply(this,arguments)}(O);o.searchText===O&&(h(qt),p(!0))}else{const{id:qt}=G;if(-1!==qt||an&&an.length){const Vr=yield function ase(E){return XC.apply(this,arguments)}(qt);o.currentGroup.id===qt&&(h(Vr),p(!1))}}else o.currentEmojis=[],o.searchMode=!1}),A.apply(this,arguments)}!function E(){A.apply(this,arguments)}()});const Zs=()=>{nh(()=>function Foe(e){e&&(e.scrollTop=0)}(n.tabpanelElement))};function sse(E){return!E.unicode||!gL(E)||HC.get(E.unicode)}function TL(E){return YC.apply(this,arguments)}function YC(){return(YC=g(function*(E){const A=o.emojiVersion||(yield $C());return E.filter(({version:O})=>!O||O<=A)})).apply(this,arguments)}function QC(E){return ZC.apply(this,arguments)}function ZC(){return ZC=g(function*(E){return function Noe(e,t){const n=r=>{const i={};for(const o of r)"number"==typeof o.tone&&o.version<=t&&(i[o.tone]=o.unicode);return i};return e.map(({unicode:r,skins:i,shortcodes:o,url:s,name:a,category:c,annotation:u})=>({unicode:r,name:a,shortcodes:o,url:s,category:c,annotation:u,id:r||a,skins:i&&n(i)}))}(E,o.emojiVersion||(yield $C()))}),ZC.apply(this,arguments)}function XC(){return(XC=g(function*(E){const A=-1===E?o.customEmoji:yield o.database.getEmojiByGroup(E);return QC(yield TL(A))})).apply(this,arguments)}function JC(){return(JC=g(function*(E){return QC(yield TL(yield o.database.getEmojiBySearchQuery(E)))})).apply(this,arguments)}function SL(E){return ew.apply(this,arguments)}function ew(){return(ew=g(function*(E){const A=yield o.database.getEmojiByUnicodeOrName(E),O=[...o.currentEmojis,...o.currentFavorites].find(Ve=>Ve.id===E),G=O.unicode&&y(O,o.currentSkinTone);yield o.database.incrementFavoriteEmojiCount(E),l("emoji-click",{emoji:A,skinTone:o.currentSkinTone,...G&&{unicode:G},...O.name&&{name:O.name}})})).apply(this,arguments)}function tw(){return(tw=g(function*(E){const{target:A}=E;A.classList.contains("emoji")&&(ir(E),SL(A.id.substring(4)))})).apply(this,arguments)}function nw(E){o.currentSkinTone=E,o.skinTonePickerExpanded=!1,c("skintone-button"),l("skin-tone-change",{skinTone:E}),o.database.setPreferredSkinTone(E)}function rw(){return(rw=g(function*(E){const{relatedTarget:A}=E;(!A||"skintone-list"!==A.id)&&(o.skinTonePickerExpanded=!1)})).apply(this,arguments)}return s(()=>{const{currentEmojis:E,emojiVersion:A}=o,O=E.filter(G=>G.unicode).filter(G=>gL(G)&&!HC.has(G.unicode));if(!A&&O.length)h(E),nh(()=>function KC(E){!function Poe(e,t,n){let r=!0;for(const i of e){const o=n(i);if(!o)continue;const s=vL(o);typeof GC>"u"&&(GC=vL(t));const a=s/1.8<GC;HC.set(i.unicode,a),a||(r=!1)}return r}(E,n.baselineEmoji,u)?o.currentEmojis=[...o.currentEmojis]:Zs()}(O));else{const G=A?E:E.filter(sse);h(G),Zs()}}),s(()=>{}),s(()=>{(E=>{zC(o.currentEmojisWithCategories,E,f)||(o.currentEmojisWithCategories=E)})(function E(){const{searchMode:O,currentEmojis:G}=o;if(O)return[{category:"",emojis:G}];const Ve=new Map;for(const an of G){const qt=an.category||"";let Vr=Ve.get(qt);Vr||(Vr=[],Ve.set(qt,Vr)),Vr.push(an)}return[...Ve.entries()].map(([an,qt])=>({category:an,emojis:qt})).sort((an,qt)=>o.customCategorySorting(an.category,qt.category))}())}),s(()=>{o.activeSearchItemId=-1!==o.activeSearchItem&&o.currentEmojis[o.activeSearchItem].id}),s(()=>{const{rawSearchText:E}=o;pL(()=>{o.searchText=(E||"").trim(),o.activeSearchItem=-1})}),s(()=>{o.skinTonePickerExpanded?n.skinToneDropdown.addEventListener("transitionend",()=>{o.skinTonePickerExpandedAfterAnimation=!0},{once:!0}):o.skinTonePickerExpandedAfterAnimation=!1}),{$set(E){ih(o,E)},$destroy(){r.abort()}}}var nse={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const CL=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],ise=`:host{--emoji-font-family:${mL}}`;class wL extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+ise,this.shadowRoot.appendChild(n),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:Ioe,customEmoji:null,i18n:nse,emojiVersion:null,...t};for(const r of CL)"database"!==r&&Object.prototype.hasOwnProperty.call(this,r)&&(this._ctx[r]=this[r],delete this[r]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=Joe(this.shadowRoot,this._ctx))}disconnectedCallback(){rh(()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t.close().catch(n=>console.error(n))}})}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(t,n,r){this._set(t.replace(/-([a-z])/g,(i,o)=>o.toUpperCase()),"emoji-version"===t?parseFloat(r):r)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:r}=this._ctx;(!r||r.locale!==t||r.dataSource!==n)&&this._set("database",new poe({locale:t,dataSource:n}))}_dbFlush(){rh(()=>this._dbCreate())}}const DL={};for(const e of CL)DL[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(wL.prototype,DL),customElements.get("emoji-picker")||customElements.define("emoji-picker",wL);let ose=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=un({type:e,bootstrap:[Tie]})}static{this.\u0275inj=Yt({imports:[Q4,d6,oY(()=>sY(Sie_firebase)),jX(()=>BX()),mne(()=>yne()),rie(()=>oie())]})}}return e})();K4().bootstrapModule(ose).catch(e=>console.error(e))}},Ce=>{Ce(Ce.s=263)}]);